<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:camunda="http://activiti.org/bpmn" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:fox="http://www.camunda.com/fox" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd" id="_hdIPsMPaEeOV7tWYlGoq-A" exporter="camunda modeler" exporterVersion="2.6.0" targetNamespace="http://activiti.org/DropC">
  <bpmn2:process id="delete_resources_noENM" name="Decommission EPG, MME, SAPC - OSS" isExecutable="true">
    <bpmn2:documentation>Workflow to decommission EPG/MME/SAPC</bpmn2:documentation>
    <bpmn2:extensionElements>
      <camunda:executionListener class="com.ericsson.oss.nfe.poc.listeners.AppConfigLoadListener" event="start"/>
      <camunda:executionListener class="com.ericsson.oss.nfe.poc.listeners.ActivityEntryExitListener" event="start"/>
      <camunda:executionListener class="com.ericsson.oss.nfe.poc.listeners.ActivityEntryExitListener" event="end"/>
    </bpmn2:extensionElements>
    <bpmn2:exclusiveGateway id="ChooseOption__prg__p41" name="Should Delete ?" default="SequenceFlow_2_no">
      <bpmn2:incoming>SequenceFlow_1</bpmn2:incoming>
      <bpmn2:incoming>SequenceFlow_4</bpmn2:incoming>
      <bpmn2:incoming>SequenceFlow_16</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_2_no</bpmn2:outgoing>
      <bpmn2:outgoing>SequenceFlow_11</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="SequenceFlow_2_no" name="No" sourceRef="ChooseOption__prg__p41" targetRef="LogNo__prg__p90"/>
    <bpmn2:exclusiveGateway id="IDMapPresent__prg" name="ID Map Present ?" default="name_ids_present">
      <bpmn2:incoming>SequenceFlow_14</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_10_empty</bpmn2:outgoing>
      <bpmn2:outgoing>name_ids_present</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="SequenceFlow_10_empty" name="Populate&#xD;&#xA;ID Map" sourceRef="IDMapPresent__prg" targetRef="PopulateURLs__prg__p10">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression">${empty execution.getVariable('ECM_NAMEID_MAP')} </bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="name_ids_present" name="yes" sourceRef="IDMapPresent__prg" targetRef="ExtractVDC_ID__prg__p40"/>
    <bpmn2:exclusiveGateway id="ExclusiveGateway_1__prg__p5" name="Is AutoDelete ?" default="SequenceFlow_14">
      <bpmn2:incoming>SequenceFlow_13</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_14</bpmn2:outgoing>
      <bpmn2:outgoing>autodeleteFlow_15</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="SequenceFlow_14" name="no" sourceRef="ExclusiveGateway_1__prg__p5" targetRef="IDMapPresent__prg"/>
    <bpmn2:sequenceFlow id="autodeleteFlow_15" name="yes" sourceRef="ExclusiveGateway_1__prg__p5" targetRef="ExclusiveGateway_1__prg__p10">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${execution.getVariable('autodelete')!=null && execution.getVariable('autodelete')=='yes' } ]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="SequenceFlow_11" name="Yes" sourceRef="ChooseOption__prg__p41" targetRef="ScriptTask__prg__p45">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[ ${execution.getVariable("YesDelete")!=null && YesDelete}]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:startEvent id="StartEvent__prg__p0" camunda:formKey="embedded:app:json:model1:forms/deleteResources.json" name="Start">
      <bpmn2:outgoing>SequenceFlow_13</bpmn2:outgoing>
    </bpmn2:startEvent>
    <bpmn2:sequenceFlow id="SequenceFlow_13" name="" sourceRef="StartEvent__prg__p0" targetRef="ExclusiveGateway_1__prg__p5"/>
    <bpmn2:scriptTask id="ScriptTask__prg__p45" camunda:async="true" name="Build VNName" scriptFormat="groovy">
      <bpmn2:extensionElements>
        <fox:failedJobRetryTimeCycle>R1/PT2S</fox:failedJobRetryTimeCycle>
      </bpmn2:extensionElements>
      <bpmn2:incoming>SequenceFlow_11</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_8</bpmn2:outgoing>
      <bpmn2:script><![CDATA[if(execution.getVariable('resourceType')!=null &&  execution.getVariable('resourceType')=='EPG')
	execution.setVariable('vnName','EPG-Public-VN');
else if(execution.getVariable('resourceType')!=null &&  execution.getVariable('resourceType')=='MME')
	execution.setVariable('vnName','MME-External-VN');
else if(execution.getVariable('resourceType')!=null &&  execution.getVariable('resourceType')=='SAPC')
	execution.setVariable('vnName','SAPC-External-VN');]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:exclusiveGateway id="ExclusiveGateway__prg__p51" name="Is SegID There ?" default="SequenceFlow_24">
      <bpmn2:incoming>SequenceFlow_22</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_23_yes</bpmn2:outgoing>
      <bpmn2:outgoing>SequenceFlow_24</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="SequenceFlow_23_yes" name="" sourceRef="ExclusiveGateway__prg__p51" targetRef="BuildCMD__prg__p52">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression">${execution.getVariable('segID')!=null}</bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="SequenceFlow_24" name="No" sourceRef="ExclusiveGateway__prg__p51" targetRef="DeleteVM__prg__p70"/>
    <bpmn2:callActivity id="getsegid__prg__p50" name="Get SegmentationID" calledElement="getsegmentationid_forvdc">
      <bpmn2:extensionElements>
        <camunda:in variables="all"/>
        <camunda:out variables="all"/>
      </bpmn2:extensionElements>
      <bpmn2:incoming>SequenceFlow_17</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_22</bpmn2:outgoing>
    </bpmn2:callActivity>
    <bpmn2:sequenceFlow id="SequenceFlow_22" name="" sourceRef="getsegid__prg__p50" targetRef="ExclusiveGateway__prg__p51"/>
    <bpmn2:scriptTask id="BuildCMD__prg__p52" name="Build UnconfigVLAN" scriptFormat="groovy">
      <bpmn2:incoming>SequenceFlow_23_yes</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_25</bpmn2:outgoing>
      <bpmn2:script><![CDATA[org.slf4j.Logger SCRIPTLOGGER = org.slf4j.LoggerFactory.getLogger("script");
def segId =execution.getVariable('segID');
def vlanPrefix = execution.getVariable('appConfigProps')['VLAN-PREFIX'];
def vlanID=vlanPrefix+segId
def configCmdStr = 'unconfigure vlan \"' + vlanID  + '\" ipaddress ;save configuration;'
SCRIPTLOGGER.info('Unconfig command built is  '+configCmdStr);
execution.setVariable('extremeCMD',configCmdStr);]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="SequenceFlow_25" name="" sourceRef="BuildCMD__prg__p52" targetRef="authext__prg__p55"/>
    <bpmn2:sequenceFlow id="SequenceFlow_8" name="" sourceRef="ScriptTask__prg__p45" targetRef="ExclusiveGateway__prg__p46"/>
    <bpmn2:exclusiveGateway id="ExclusiveGateway__prg__p46" name="Remove from&#xD;&#xA;extreme?" default="SequenceFlow_10">
      <bpmn2:incoming>SequenceFlow_8</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_10</bpmn2:outgoing>
      <bpmn2:outgoing>SequenceFlow_17</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="SequenceFlow_10" name="No" sourceRef="ExclusiveGateway__prg__p46" targetRef="DeleteVM__prg__p70"/>
    <bpmn2:sequenceFlow id="SequenceFlow_17" name="Yes" sourceRef="ExclusiveGateway__prg__p46" targetRef="getsegid__prg__p50">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${execution.getVariable('doXtreme')!=null && execution.getVariable('doXtreme')=="yes"}]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:serviceTask id="authext__prg__p55" camunda:class="com.ericsson.oss.nfe.poc.tasks.ExtremeSOAPAuthenticator" name="Authencticate ExtremeSOAP">
      <bpmn2:incoming>SequenceFlow_25</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_26</bpmn2:outgoing>
    </bpmn2:serviceTask>
    <bpmn2:sequenceFlow id="SequenceFlow_26" name="" sourceRef="authext__prg__p55" targetRef="Exec__prg__p60"/>
    <bpmn2:serviceTask id="Exec__prg__p60" camunda:class="com.ericsson.oss.nfe.poc.tasks.ExtremeSOAPCLIInvoker" name="Execute Extreme CMD on SOAP">
      <bpmn2:extensionElements>
        <camunda:field name="cliCommand">
          <camunda:expression>${extremeCMD}</camunda:expression>
        </camunda:field>
        <camunda:field name="commandOutPutVariable">
          <camunda:string>cliout</camunda:string>
        </camunda:field>
      </bpmn2:extensionElements>
      <bpmn2:incoming>SequenceFlow_26</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_20</bpmn2:outgoing>
    </bpmn2:serviceTask>
    <bpmn2:sequenceFlow id="SequenceFlow_20" name="" sourceRef="Exec__prg__p60" targetRef="DeleteVM__prg__p70"/>
    <bpmn2:serviceTask id="DeleteVM__prg__p70" camunda:class="com.ericsson.oss.nfe.poc.tasks.DeleteVMS" name="Delete VMs">
      <bpmn2:incoming>SequenceFlow_20</bpmn2:incoming>
      <bpmn2:incoming>SequenceFlow_24</bpmn2:incoming>
      <bpmn2:incoming>SequenceFlow_10</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_3</bpmn2:outgoing>
    </bpmn2:serviceTask>
    <bpmn2:sequenceFlow id="SequenceFlow_3" name="" sourceRef="DeleteVM__prg__p70" targetRef="Wait__prg__p71"/>
    <bpmn2:intermediateCatchEvent id="IntermediateCatchEvent__prg__p73" name="Wait 50s more">
      <bpmn2:incoming>SequenceFlow_18</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_19</bpmn2:outgoing>
      <bpmn2:timerEventDefinition id="TimerEventDefinition_2">
        <bpmn2:timeDuration xsi:type="bpmn2:tFormalExpression">PT50S</bpmn2:timeDuration>
      </bpmn2:timerEventDefinition>
    </bpmn2:intermediateCatchEvent>
    <bpmn2:sequenceFlow id="SequenceFlow_19" name="" sourceRef="IntermediateCatchEvent__prg__p73" targetRef="DeleteVDC__prg__p75"/>
    <bpmn2:intermediateCatchEvent id="Wait__prg__p71" name="Wait 5 Seconds">
      <bpmn2:incoming>SequenceFlow_3</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_23</bpmn2:outgoing>
      <bpmn2:timerEventDefinition id="TimerEventDefinition_1">
        <bpmn2:timeDuration xsi:type="bpmn2:tFormalExpression">PT5S</bpmn2:timeDuration>
      </bpmn2:timerEventDefinition>
    </bpmn2:intermediateCatchEvent>
    <bpmn2:sequenceFlow id="SequenceFlow_23" name="" sourceRef="Wait__prg__p71" targetRef="ServiceTask_1_verify_orders__prg__p73"/>
    <bpmn2:boundaryEvent id="BoundaryEvent_1" name="" attachedToRef="ServiceTask_1_verify_orders__prg__p73">
      <bpmn2:outgoing>SequenceFlow_21</bpmn2:outgoing>
      <bpmn2:errorEventDefinition id="ErrorEventDefinition_1" errorRef="Error_4"/>
    </bpmn2:boundaryEvent>
    <bpmn2:sequenceFlow id="SequenceFlow_21" name="" sourceRef="BoundaryEvent_1" targetRef="ScriptTask_2__prg__p99"/>
    <bpmn2:serviceTask id="ServiceTask_1_verify_orders__prg__p73" camunda:class="com.ericsson.oss.nfe.poc.tasks.VerifyOrderStatus" camunda:async="true" name="Verify Delete Orders">
      <bpmn2:extensionElements>
        <camunda:field name="inputcreateOrderResponse">
          <camunda:expression>${deleteResultString}</camunda:expression>
        </camunda:field>
        <fox:failedJobRetryTimeCycle>R15/PT20S</fox:failedJobRetryTimeCycle>
      </bpmn2:extensionElements>
      <bpmn2:incoming>SequenceFlow_23</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_15</bpmn2:outgoing>
    </bpmn2:serviceTask>
    <bpmn2:sequenceFlow id="SequenceFlow_15" name="" sourceRef="ServiceTask_1_verify_orders__prg__p73" targetRef="ExclusiveGateway__prg__p74"/>
    <bpmn2:scriptTask id="BuildVDCName__prg__p80" name="Extract VDCName" scriptFormat="groovy">
      <bpmn2:incoming>SequenceFlow_29</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_30</bpmn2:outgoing>
      <bpmn2:script><![CDATA[def vdcNameVar = execution.getVariable('VDCName');
def vdcStrNameID =execution.getVariable('delVdcNameId');

org.slf4j.Logger SCRIPTLOGGER = org.slf4j.LoggerFactory.getLogger("script");
SCRIPTLOGGER.info('----------------------------------------Setting VDCName to  ---------------------------------------------' + vdcStrNameID  );

def 	vdcNameVar2 = "Not-Set";

	if(vdcStrNameID.contains('('))
	{
		vdcNameVar2  =vdcStrNameID.substring(0,vdcStrNameID.indexOf('('));
	}
	else
	{
		vdcNameVar2  = vdcStrNameID ;
	}

SCRIPTLOGGER.info('----------------------------------------Setting VDCName to  ---------------------------------------------' + vdcNameVar2  +' from ' + vdcNameVar   );

vdcNameVar2   = vdcNameVar2.trim();
execution.setVariable('extVDCName',vdcNameVar2 );]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="SequenceFlow_30" name="" sourceRef="BuildVDCName__prg__p80" targetRef="DeleteFromONRM__prg__p95"/>
    <bpmn2:boundaryEvent id="BoundaryEvent_2" name="Catch &amp; Ignore Error" attachedToRef="DeleteFromONRM__prg__p95">
      <bpmn2:outgoing>SequenceFlow_32</bpmn2:outgoing>
      <bpmn2:errorEventDefinition id="ErrorEventDefinition_2" errorRef="Error_5"/>
    </bpmn2:boundaryEvent>
    <bpmn2:sequenceFlow id="SequenceFlow_32" name="" sourceRef="BoundaryEvent_2" targetRef="EndEvent_1__prg__p100"/>
    <bpmn2:callActivity id="DeleteFromONRM__prg__p95" name="DeleteFrom ONRM" calledElement="DeleteEPGfromONRM">
      <bpmn2:extensionElements>
        <camunda:in sourceExpression="${extVDCName}" target="VDCName"/>
        <camunda:in sourceExpression="${deploymentMode}" target="deploymentMode"/>
        <camunda:in variables="all"/>
        <camunda:out variables="all"/>
      </bpmn2:extensionElements>
      <bpmn2:incoming>SequenceFlow_30</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_31</bpmn2:outgoing>
    </bpmn2:callActivity>
    <bpmn2:sequenceFlow id="SequenceFlow_31" name="" sourceRef="DeleteFromONRM__prg__p95" targetRef="EndSuccess__prg__p100"/>
    <bpmn2:scriptTask id="PopulateURLs__prg__p10" name="PopulateURLs" scriptFormat="groovy">
      <bpmn2:incoming>SequenceFlow_10_empty</bpmn2:incoming>
      <bpmn2:incoming>SequenceFlow_33</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_5</bpmn2:outgoing>
      <bpmn2:script><![CDATA[def url = execution.getVariable('appConfigProps')['QUERY_VDC_FOR_TENANT']
def tenantName = execution.getVariable('appConfigProps')['ecm.props.map.tenantName']
execution.setVariable("GET_VDC_URL",url+"tenantName%3D'"+tenantName+"'");]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="SequenceFlow_5" name="" sourceRef="PopulateURLs__prg__p10" targetRef="GetVDC_RESTCall__prg__p20"/>
    <bpmn2:serviceTask id="GetVDC_RESTCall__prg__p20" camunda:class="com.ericsson.oss.nfe.poc.tasks.GenericECMRESTInvoker" name="Get VDCS">
      <bpmn2:extensionElements>
        <camunda:field name="method" stringValue="GET"/>
        <camunda:field name="endpointURL">
          <camunda:expression>${GET_VDC_URL}</camunda:expression>
        </camunda:field>
        <camunda:field name="outPutVariable">
          <camunda:string>getVDCSResp</camunda:string>
        </camunda:field>
        <camunda:field name="requestString">
          <camunda:string>--</camunda:string>
        </camunda:field>
      </bpmn2:extensionElements>
      <bpmn2:incoming>SequenceFlow_5</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_12</bpmn2:outgoing>
    </bpmn2:serviceTask>
    <bpmn2:sequenceFlow id="SequenceFlow_12" name="" sourceRef="GetVDC_RESTCall__prg__p20" targetRef="BuildMap__prg__p30"/>
    <bpmn2:endEvent id="End__prg__p100" name="End&#xD;&#xA;Cancelled VDC Delete">
      <bpmn2:incoming>SequenceFlow_6</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:scriptTask id="LogNo__prg__p90" name="Log No" scriptFormat="groovy">
      <bpmn2:incoming>SequenceFlow_2_no</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_6</bpmn2:outgoing>
      <bpmn2:script><![CDATA[org.slf4j.Logger SCRIPTLOGGER = org.slf4j.LoggerFactory.getLogger("script");
SCRIPTLOGGER.info('Use cancelled delete of VDC : '+execution.getVariable('delVdcNameId') +' in the cleanup flow');
org.slf4j.Logger logger = org.slf4j.LoggerFactory.getLogger("com.ericsson.oss.nfe.poc.tasks"); 
logger.info('Use cancelled delete of VDC : '+execution.getVariable('delVdcNameId') +' in the cleanup flow');]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="SequenceFlow_6" name="" sourceRef="LogNo__prg__p90" targetRef="End__prg__p100"/>
    <bpmn2:userTask id="UserTask_1__prg__p40" camunda:formKey="embedded:app:json:model1:forms/vdcdelete-select.json" name="Choose VDC from List">
      <bpmn2:incoming>SequenceFlow_35</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_4</bpmn2:outgoing>
    </bpmn2:userTask>
    <bpmn2:sequenceFlow id="SequenceFlow_4" name="" sourceRef="UserTask_1__prg__p40" targetRef="ChooseOption__prg__p41"/>
    <bpmn2:exclusiveGateway id="ExclusiveGateway_2__prg__p35" default="SequenceFlow_35">
      <bpmn2:incoming>SequenceFlow_34</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_35</bpmn2:outgoing>
      <bpmn2:outgoing>SequenceFlow_42</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="SequenceFlow_35" name="" sourceRef="ExclusiveGateway_2__prg__p35" targetRef="UserTask_1__prg__p40"/>
    <bpmn2:userTask id="ConfirmDelete__prg__p50" camunda:formKey="embedded:app:json:model1:forms/vdc-deleteconfirmation.json" name="Confirm VDC Delete">
      <bpmn2:incoming>SequenceFlow_41</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_1</bpmn2:outgoing>
    </bpmn2:userTask>
    <bpmn2:sequenceFlow id="SequenceFlow_1" name="" sourceRef="ConfirmDelete__prg__p50" targetRef="ChooseOption__prg__p41"/>
    <bpmn2:scriptTask id="ExtractVDC_ID__prg__p40" name="Extract VDC ID" scriptFormat="groovy">
      <bpmn2:incoming>name_ids_present</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_41</bpmn2:outgoing>
      <bpmn2:script><![CDATA[org.slf4j.Logger SCRIPTLOGGER = org.slf4j.LoggerFactory.getLogger("script");
SCRIPTLOGGER.info(' The vdc to delete is '+execution.getVariable('ECM_NAMEID_MAP'));

def vdcNameVar = execution.getVariable('VDCName')
def vdcStr =vdcNameVar +" (" + execution.getVariable('ECM_NAMEID_MAP') [vdcNameVar] + ")"
execution.setVariable('delVdcNameId',vdcStr);]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="SequenceFlow_41" name="" sourceRef="ExtractVDC_ID__prg__p40" targetRef="ConfirmDelete__prg__p50"/>
    <bpmn2:sequenceFlow id="SequenceFlow_42" name="auto-delete" sourceRef="ExclusiveGateway_2__prg__p35" targetRef="ScriptTask_1__prg__p20">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${execution.getVariable('autodelete')!=null && execution.getVariable('autodelete')=='yes' } ]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:scriptTask id="ScriptTask_1__prg__p20" name="Populate Delete Variables" scriptFormat="groovy">
      <bpmn2:incoming>SequenceFlow_42</bpmn2:incoming>
      <bpmn2:incoming>SequenceFlow_28</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_16</bpmn2:outgoing>
      <bpmn2:script><![CDATA[def vdcNameVar = execution.getVariable('VDCName')
def vdcIdVar = execution.getVariable('VDCId')
def vdcStr =vdcNameVar +" (" + vdcIdVar   + ")"
execution.setVariable('delVdcNameId',vdcStr);
execution.setVariable("YesDelete",true);
]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="SequenceFlow_16" name="" sourceRef="ScriptTask_1__prg__p20" targetRef="ChooseOption__prg__p41"/>
    <bpmn2:exclusiveGateway id="ExclusiveGateway_1__prg__p10" name="VDC Details Present?" default="SequenceFlow_33">
      <bpmn2:incoming>autodeleteFlow_15</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_28</bpmn2:outgoing>
      <bpmn2:outgoing>SequenceFlow_33</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="SequenceFlow_28" name="yes" sourceRef="ExclusiveGateway_1__prg__p10" targetRef="ScriptTask_1__prg__p20">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression">${not empty execution.getVariable('VDCId') } </bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:sequenceFlow id="SequenceFlow_33" name="no" sourceRef="ExclusiveGateway_1__prg__p10" targetRef="PopulateURLs__prg__p10"/>
    <bpmn2:scriptTask id="BuildMap__prg__p30" name="Build Map" scriptFormat="groovy">
      <bpmn2:incoming>SequenceFlow_12</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_34</bpmn2:outgoing>
      <bpmn2:script><![CDATA[def vdcNameVar = execution.getVariable('VDCName')

try{
	org.slf4j.Logger SCRIPTLOGGER = org.slf4j.LoggerFactory.getLogger("script");
	def respSTR = execution.getVariable('getVDCSResp')
	def slurper = new groovy.json.JsonSlurper()
	def respJson = slurper.parseText(respSTR)
	execution.removeVariable('getVDCSResp')
	def vdc
	def vdcStr = ""

	if(vdcNameVar!=null && vdcNameVar != "") {
		 respJson.vdcs.each {
		 item ->
			if(item.provisioningStatus=='ACTIVE' && vdcNameVar.equals(item.name))
			{	
				vdc = item;		
			}	 
		}
		if(vdc!=null)
		{
			def map = new java.util.HashMap();
			map.put(vdc.name,vdc.id);
			execution.setVariable('ECM_NAMEID_MAP',   map) 
			vdcStr= vdc.name + "(" +vdc.id + ")"
		}
	}
	else { 
		def map = new java.util.HashMap();
		respJson.vdcs.each {
		item ->
			if(item.provisioningStatus=='ACTIVE')
			{	
				map.put(item.name,item.id);
				vdcStr += item.name + "(" +item.id + "), "
			}
		}
		execution.setVariable('ECM_NAMEID_MAP',   map)
	}
	execution.setVariable('delVdcNameId', vdcStr)
	SCRIPTLOGGER.info( 'VDCs List - ' + vdcStr);
} catch(e) {
	println e
}


def VDCId = execution.getVariable('ECM_NAMEID_MAP') [vdcNameVar]
execution.setVariable('VDCId', VDCId )]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="SequenceFlow_34" name="" sourceRef="BuildMap__prg__p30" targetRef="ExclusiveGateway_2__prg__p35"/>
    <bpmn2:endEvent id="EndEvent_1__prg__p100" name="End with Failures">
      <bpmn2:incoming>SequenceFlow_32</bpmn2:incoming>
      <bpmn2:incoming>SequenceFlow_27</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:scriptTask id="ScriptTask_2__prg__p99" name="Log Error" scriptFormat="groovy">
      <bpmn2:incoming>SequenceFlow_21</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_27</bpmn2:outgoing>
      <bpmn2:script><![CDATA[org.slf4j.Logger SCRIPTLOGGER = org.slf4j.LoggerFactory.getLogger("script");
SCRIPTLOGGER.info('----------------------------------------Error deleteing VMs ---------------------------------------------');]]></bpmn2:script>
    </bpmn2:scriptTask>
    <bpmn2:sequenceFlow id="SequenceFlow_27" name="" sourceRef="ScriptTask_2__prg__p99" targetRef="EndEvent_1__prg__p100"/>
    <bpmn2:serviceTask id="DeleteVDC__prg__p75" camunda:class="com.ericsson.oss.nfe.poc.tasks.DeleteVDCS" name="Delete VDC">
      <bpmn2:extensionElements/>
      <bpmn2:incoming>SequenceFlow_19</bpmn2:incoming>
      <bpmn2:incoming>SequenceFlow_9</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_29</bpmn2:outgoing>
    </bpmn2:serviceTask>
    <bpmn2:sequenceFlow id="SequenceFlow_29" name="" sourceRef="DeleteVDC__prg__p75" targetRef="BuildVDCName__prg__p80"/>
    <bpmn2:exclusiveGateway id="ExclusiveGateway__prg__p74" name="is SAPC?" default="SequenceFlow_9">
      <bpmn2:incoming>SequenceFlow_15</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_9</bpmn2:outgoing>
      <bpmn2:outgoing>SequenceFlow_18</bpmn2:outgoing>
    </bpmn2:exclusiveGateway>
    <bpmn2:sequenceFlow id="SequenceFlow_9" name="no" sourceRef="ExclusiveGateway__prg__p74" targetRef="DeleteVDC__prg__p75"/>
    <bpmn2:sequenceFlow id="SequenceFlow_18" name="yes" sourceRef="ExclusiveGateway__prg__p74" targetRef="IntermediateCatchEvent__prg__p73">
      <bpmn2:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${execution.getVariable('resourceType')!=null && execution.getVariable('resourceType')=="SAPC"}]]></bpmn2:conditionExpression>
    </bpmn2:sequenceFlow>
    <bpmn2:endEvent id="EndSuccess__prg__p100" name="End successfully">
      <bpmn2:incoming>SequenceFlow_31</bpmn2:incoming>
    </bpmn2:endEvent>
  </bpmn2:process>
  <bpmn2:error id="Error_4" errorCode="failedJobError" name="failedJobError"/>
  <bpmn2:error id="Error_5" errorCode="BPMN_RUNTIME_ERROR" name="org.camunda.bpm.engine.delegate.BpmnError"/>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="delete_resources_noENM">
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_14" bpmnElement="StartEvent__prg__p0">
        <dc:Bounds height="36.0" width="36.0" x="81.0" y="152.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="34.0" x="82.0" y="193.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_ServiceTask_2" bpmnElement="PopulateURLs__prg__p10">
        <dc:Bounds height="80.0" width="100.0" x="314.0" y="266.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_29" bpmnElement="GetVDC_RESTCall__prg__p20">
        <dc:Bounds height="80.0" width="100.0" x="463.0" y="265.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_5" bpmnElement="SequenceFlow_5" sourceElement="_BPMNShape_ServiceTask_2" targetElement="_BPMNShape_ScriptTask_29">
        <di:waypoint xsi:type="dc:Point" x="414.0" y="306.0"/>
        <di:waypoint xsi:type="dc:Point" x="463.0" y="305.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="436.0" y="305.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_UserTask_2" bpmnElement="ExtractVDC_ID__prg__p40">
        <dc:Bounds height="80.0" width="100.0" x="493.0" y="395.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_ServiceTask_3" bpmnElement="ConfirmDelete__prg__p50">
        <dc:Bounds height="80.0" width="100.0" x="736.0" y="395.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_ExclusiveGateway_9" bpmnElement="IDMapPresent__prg" isMarkerVisible="true">
        <dc:Bounds height="50.0" width="50.0" x="192.0" y="280.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="107.0" x="96.0" y="305.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_10" bpmnElement="SequenceFlow_10_empty" sourceElement="_BPMNShape_ExclusiveGateway_9" targetElement="_BPMNShape_ServiceTask_2">
        <di:waypoint xsi:type="dc:Point" x="242.0" y="305.0"/>
        <di:waypoint xsi:type="dc:Point" x="314.0" y="306.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="38.0" width="67.0" x="242.0" y="288.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_11" bpmnElement="name_ids_present" sourceElement="_BPMNShape_ExclusiveGateway_9" targetElement="_BPMNShape_UserTask_2">
        <di:waypoint xsi:type="dc:Point" x="217.0" y="330.0"/>
        <di:waypoint xsi:type="dc:Point" x="217.0" y="435.0"/>
        <di:waypoint xsi:type="dc:Point" x="493.0" y="435.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="29.0" x="187.0" y="404.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_30" bpmnElement="BuildMap__prg__p30">
        <dc:Bounds height="80.0" width="100.0" x="615.0" y="265.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_12" bpmnElement="SequenceFlow_12" sourceElement="_BPMNShape_ScriptTask_29" targetElement="_BPMNShape_ScriptTask_30">
        <di:waypoint xsi:type="dc:Point" x="563.0" y="305.0"/>
        <di:waypoint xsi:type="dc:Point" x="615.0" y="305.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="585.0" y="305.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ExclusiveGateway_10" bpmnElement="ChooseOption__prg__p41" isMarkerVisible="true">
        <dc:Bounds height="50.0" width="50.0" x="992.0" y="280.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="98.0" x="975.0" y="226.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_1" bpmnElement="SequenceFlow_1" sourceElement="_BPMNShape_ServiceTask_3" targetElement="_BPMNShape_ExclusiveGateway_10">
        <di:waypoint xsi:type="dc:Point" x="836.0" y="435.0"/>
        <di:waypoint xsi:type="dc:Point" x="1017.0" y="435.0"/>
        <di:waypoint xsi:type="dc:Point" x="1017.0" y="330.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="946.0" y="435.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ServiceTask_42" bpmnElement="DeleteVM__prg__p70">
        <dc:Bounds height="80.0" width="100.0" x="1764.0" y="265.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_EndEvent_30" bpmnElement="EndSuccess__prg__p100">
        <dc:Bounds height="36.0" width="36.0" x="2736.0" y="288.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="105.0" x="2702.0" y="329.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_32" bpmnElement="LogNo__prg__p90">
        <dc:Bounds height="80.0" width="100.0" x="1071.0" y="383.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_6" bpmnElement="SequenceFlow_2_no" sourceElement="_BPMNShape_ExclusiveGateway_10" targetElement="_BPMNShape_ScriptTask_32">
        <di:waypoint xsi:type="dc:Point" x="1039.0" y="330.0"/>
        <di:waypoint xsi:type="dc:Point" x="1086.0" y="383.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="22.0" x="1051.0" y="336.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_EndEvent_31" bpmnElement="End__prg__p100">
        <dc:Bounds height="36.0" width="36.0" x="1232.0" y="405.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="38.0" width="135.0" x="1183.0" y="446.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_8" bpmnElement="SequenceFlow_6" sourceElement="_BPMNShape_ScriptTask_32" targetElement="_BPMNShape_EndEvent_31">
        <di:waypoint xsi:type="dc:Point" x="1171.0" y="423.0"/>
        <di:waypoint xsi:type="dc:Point" x="1232.0" y="423.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1064.0" y="421.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_IntermediateCatchEvent_3" bpmnElement="Wait__prg__p71">
        <dc:Bounds height="36.0" width="36.0" x="1944.0" y="287.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="106.0" x="1909.0" y="328.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_ServiceTask_43" bpmnElement="DeleteVDC__prg__p75">
        <dc:Bounds height="80.0" width="100.0" x="2280.0" y="265.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_UserTask_6" bpmnElement="UserTask_1__prg__p40">
        <dc:Bounds height="80.0" width="100.0" x="855.0" y="265.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_16" bpmnElement="SequenceFlow_4" sourceElement="_BPMNShape_UserTask_6" targetElement="_BPMNShape_ExclusiveGateway_10">
        <di:waypoint xsi:type="dc:Point" x="955.0" y="305.0"/>
        <di:waypoint xsi:type="dc:Point" x="992.0" y="305.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="966.0" y="305.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ExclusiveGateway_11" bpmnElement="ExclusiveGateway_1__prg__p5" isMarkerVisible="true">
        <dc:Bounds height="50.0" width="50.0" x="192.0" y="144.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="95.0" x="171.0" y="130.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_13" bpmnElement="SequenceFlow_13" sourceElement="_BPMNShape_StartEvent_14" targetElement="_BPMNShape_ExclusiveGateway_11">
        <di:waypoint xsi:type="dc:Point" x="117.0" y="170.0"/>
        <di:waypoint xsi:type="dc:Point" x="192.0" y="169.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="139.0" y="170.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_17" bpmnElement="SequenceFlow_14" sourceElement="_BPMNShape_ExclusiveGateway_11" targetElement="_BPMNShape_ExclusiveGateway_9">
        <di:waypoint xsi:type="dc:Point" x="217.0" y="194.0"/>
        <di:waypoint xsi:type="dc:Point" x="217.0" y="280.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="20.0" x="201.0" y="234.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_33" bpmnElement="ScriptTask_1__prg__p20">
        <dc:Bounds height="80.0" width="100.0" x="734.0" y="130.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_18" bpmnElement="autodeleteFlow_15" sourceElement="_BPMNShape_ExclusiveGateway_11" targetElement="_BPMNShape_ExclusiveGateway_51">
        <di:waypoint xsi:type="dc:Point" x="242.0" y="169.0"/>
        <di:waypoint xsi:type="dc:Point" x="338.0" y="169.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="105.0" x="243.0" y="169.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_19" bpmnElement="SequenceFlow_16" sourceElement="_BPMNShape_ScriptTask_33" targetElement="_BPMNShape_ExclusiveGateway_10">
        <di:waypoint xsi:type="dc:Point" x="834.0" y="170.0"/>
        <di:waypoint xsi:type="dc:Point" x="1017.0" y="169.0"/>
        <di:waypoint xsi:type="dc:Point" x="1017.0" y="280.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="961.0" y="169.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ServiceTask_70" bpmnElement="getsegid__prg__p50">
        <dc:Bounds height="80.0" width="100.0" x="1249.0" y="145.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_77" bpmnElement="BuildCMD__prg__p52">
        <dc:Bounds height="80.0" width="100.0" x="1501.0" y="145.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_ServiceTask_75" bpmnElement="Exec__prg__p60">
        <dc:Bounds height="80.0" width="100.0" x="1764.0" y="145.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_24" bpmnElement="SequenceFlow_20" sourceElement="_BPMNShape_ServiceTask_75" targetElement="_BPMNShape_ServiceTask_42">
        <di:waypoint xsi:type="dc:Point" x="1814.0" y="225.0"/>
        <di:waypoint xsi:type="dc:Point" x="1814.0" y="265.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1783.0" y="88.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ExclusiveGateway_33" bpmnElement="ExclusiveGateway__prg__p51" isMarkerVisible="true">
        <dc:Bounds height="50.0" width="50.0" x="1402.0" y="159.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="102.0" x="1377.0" y="119.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_26" bpmnElement="SequenceFlow_22" sourceElement="_BPMNShape_ServiceTask_70" targetElement="_BPMNShape_ExclusiveGateway_33">
        <di:waypoint xsi:type="dc:Point" x="1349.0" y="185.0"/>
        <di:waypoint xsi:type="dc:Point" x="1402.0" y="184.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1374.0" y="184.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_27" bpmnElement="SequenceFlow_23_yes" sourceElement="_BPMNShape_ExclusiveGateway_33" targetElement="_BPMNShape_ScriptTask_77">
        <di:waypoint xsi:type="dc:Point" x="1452.0" y="184.0"/>
        <di:waypoint xsi:type="dc:Point" x="1501.0" y="185.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1419.0" y="140.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_28" bpmnElement="SequenceFlow_24" sourceElement="_BPMNShape_ExclusiveGateway_33" targetElement="_BPMNShape_ServiceTask_42">
        <di:waypoint xsi:type="dc:Point" x="1427.0" y="209.0"/>
        <di:waypoint xsi:type="dc:Point" x="1427.0" y="305.0"/>
        <di:waypoint xsi:type="dc:Point" x="1764.0" y="305.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="22.0" x="1432.0" y="239.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ServiceTask_76" bpmnElement="authext__prg__p55">
        <dc:Bounds height="80.0" width="100.0" x="1637.0" y="145.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_29" bpmnElement="SequenceFlow_25" sourceElement="_BPMNShape_ScriptTask_77" targetElement="_BPMNShape_ServiceTask_76">
        <di:waypoint xsi:type="dc:Point" x="1601.0" y="185.0"/>
        <di:waypoint xsi:type="dc:Point" x="1637.0" y="185.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1633.0" y="65.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_30" bpmnElement="SequenceFlow_26" sourceElement="_BPMNShape_ServiceTask_76" targetElement="_BPMNShape_ServiceTask_75">
        <di:waypoint xsi:type="dc:Point" x="1737.0" y="185.0"/>
        <di:waypoint xsi:type="dc:Point" x="1764.0" y="185.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1713.0" y="106.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_79" bpmnElement="ScriptTask__prg__p45">
        <dc:Bounds height="80.0" width="100.0" x="1096.0" y="265.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_15" bpmnElement="SequenceFlow_11" sourceElement="_BPMNShape_ExclusiveGateway_10" targetElement="_BPMNShape_ScriptTask_79">
        <di:waypoint xsi:type="dc:Point" x="1042.0" y="305.0"/>
        <di:waypoint xsi:type="dc:Point" x="1096.0" y="305.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="29.0" x="1055.0" y="305.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ExclusiveGateway_41" bpmnElement="ExclusiveGateway__prg__p74" isMarkerVisible="true">
        <dc:Bounds height="50.0" width="50.0" x="2182.0" y="280.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="63.0" x="2139.0" y="266.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_3" bpmnElement="SequenceFlow_3" sourceElement="_BPMNShape_ServiceTask_42" targetElement="_BPMNShape_IntermediateCatchEvent_3">
        <di:waypoint xsi:type="dc:Point" x="1864.0" y="305.0"/>
        <di:waypoint xsi:type="dc:Point" x="1944.0" y="305.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1913.0" y="304.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_9" bpmnElement="SequenceFlow_9" sourceElement="_BPMNShape_ExclusiveGateway_41" targetElement="_BPMNShape_ServiceTask_43">
        <di:waypoint xsi:type="dc:Point" x="2232.0" y="305.0"/>
        <di:waypoint xsi:type="dc:Point" x="2280.0" y="305.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="20.0" x="2240.0" y="305.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_IntermediateCatchEvent_4" bpmnElement="IntermediateCatchEvent__prg__p73">
        <dc:Bounds height="36.0" width="36.0" x="2312.0" y="195.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="91.0" x="2290.0" y="174.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_22" bpmnElement="SequenceFlow_18" sourceElement="_BPMNShape_ExclusiveGateway_41" targetElement="_BPMNShape_IntermediateCatchEvent_4">
        <di:waypoint xsi:type="dc:Point" x="2207.0" y="280.0"/>
        <di:waypoint xsi:type="dc:Point" x="2207.0" y="213.0"/>
        <di:waypoint xsi:type="dc:Point" x="2312.0" y="213.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="27.0" x="2267.0" y="205.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_23" bpmnElement="SequenceFlow_19" sourceElement="_BPMNShape_IntermediateCatchEvent_4" targetElement="_BPMNShape_ServiceTask_43">
        <di:waypoint xsi:type="dc:Point" x="2330.0" y="231.0"/>
        <di:waypoint xsi:type="dc:Point" x="2330.0" y="265.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="2327.0" y="254.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_31" bpmnElement="SequenceFlow_23" sourceElement="_BPMNShape_IntermediateCatchEvent_3" targetElement="_BPMNShape_ServiceTask_103">
        <di:waypoint xsi:type="dc:Point" x="1980.0" y="305.0"/>
        <di:waypoint xsi:type="dc:Point" x="2029.0" y="305.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1975.0" y="304.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ExclusiveGateway_44" bpmnElement="ExclusiveGateway__prg__p46" isMarkerVisible="true">
        <dc:Bounds height="50.0" width="50.0" x="1273.0" y="280.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="0.0" width="0.0" x="1298.0" y="335.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_2" bpmnElement="SequenceFlow_8" sourceElement="_BPMNShape_ScriptTask_79" targetElement="_BPMNShape_ExclusiveGateway_44">
        <di:waypoint xsi:type="dc:Point" x="1196.0" y="305.0"/>
        <di:waypoint xsi:type="dc:Point" x="1273.0" y="305.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1218.0" y="305.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_14" bpmnElement="SequenceFlow_10" sourceElement="_BPMNShape_ExclusiveGateway_44" targetElement="_BPMNShape_ServiceTask_42">
        <di:waypoint xsi:type="dc:Point" x="1323.0" y="305.0"/>
        <di:waypoint xsi:type="dc:Point" x="1764.0" y="305.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="22.0" x="1647.0" y="305.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_21" bpmnElement="SequenceFlow_17" sourceElement="_BPMNShape_ExclusiveGateway_44" targetElement="_BPMNShape_ServiceTask_70">
        <di:waypoint xsi:type="dc:Point" x="1298.0" y="280.0"/>
        <di:waypoint xsi:type="dc:Point" x="1299.0" y="225.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1296.0" y="252.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ServiceTask_103" bpmnElement="ServiceTask_1_verify_orders__prg__p73">
        <dc:Bounds height="80.0" width="100.0" x="2029.0" y="265.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_20" bpmnElement="SequenceFlow_15" sourceElement="_BPMNShape_ServiceTask_103" targetElement="_BPMNShape_ExclusiveGateway_41">
        <di:waypoint xsi:type="dc:Point" x="2129.0" y="305.0"/>
        <di:waypoint xsi:type="dc:Point" x="2182.0" y="305.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="2148.0" y="305.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_BoundaryEvent_66" bpmnElement="BoundaryEvent_1">
        <dc:Bounds height="36.0" width="36.0" x="2062.0" y="327.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="2077.0" y="368.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_116" bpmnElement="ScriptTask_2__prg__p99">
        <dc:Bounds height="80.0" width="100.0" x="2030.0" y="452.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_25" bpmnElement="SequenceFlow_21" sourceElement="_BPMNShape_BoundaryEvent_66" targetElement="_BPMNShape_ScriptTask_116">
        <di:waypoint xsi:type="dc:Point" x="2080.0" y="363.0"/>
        <di:waypoint xsi:type="dc:Point" x="2079.0" y="408.0"/>
        <di:waypoint xsi:type="dc:Point" x="2080.0" y="452.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="2076.0" y="421.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_EndEvent_63" bpmnElement="EndEvent_1__prg__p100">
        <dc:Bounds height="36.0" width="36.0" x="2736.0" y="474.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="29.0" x="2740.0" y="515.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_32" bpmnElement="SequenceFlow_27" sourceElement="_BPMNShape_ScriptTask_116" targetElement="_BPMNShape_EndEvent_63">
        <di:waypoint xsi:type="dc:Point" x="2130.0" y="492.0"/>
        <di:waypoint xsi:type="dc:Point" x="2736.0" y="492.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="2152.0" y="492.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ScriptTask_122" bpmnElement="BuildVDCName__prg__p80">
        <dc:Bounds height="80.0" width="100.0" x="2430.0" y="265.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_34" bpmnElement="SequenceFlow_29" sourceElement="_BPMNShape_ServiceTask_43" targetElement="_BPMNShape_ScriptTask_122">
        <di:waypoint xsi:type="dc:Point" x="2380.0" y="305.0"/>
        <di:waypoint xsi:type="dc:Point" x="2430.0" y="305.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="2402.0" y="305.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_CallActivity_16" bpmnElement="DeleteFromONRM__prg__p95">
        <dc:Bounds height="80.0" width="100.0" x="2580.0" y="265.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_35" bpmnElement="SequenceFlow_30" sourceElement="_BPMNShape_ScriptTask_122" targetElement="_BPMNShape_CallActivity_16">
        <di:waypoint xsi:type="dc:Point" x="2530.0" y="305.0"/>
        <di:waypoint xsi:type="dc:Point" x="2580.0" y="305.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="2552.0" y="305.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_36" bpmnElement="SequenceFlow_31" sourceElement="_BPMNShape_CallActivity_16" targetElement="_BPMNShape_EndEvent_30">
        <di:waypoint xsi:type="dc:Point" x="2680.0" y="305.0"/>
        <di:waypoint xsi:type="dc:Point" x="2736.0" y="306.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="2704.0" y="305.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_BoundaryEvent_70" bpmnElement="BoundaryEvent_2">
        <dc:Bounds height="36.0" width="36.0" x="2612.0" y="327.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="124.0" x="2552.0" y="360.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_37" bpmnElement="SequenceFlow_32" sourceElement="_BPMNShape_BoundaryEvent_70" targetElement="_BPMNShape_EndEvent_63">
        <di:waypoint xsi:type="dc:Point" x="2630.0" y="363.0"/>
        <di:waypoint xsi:type="dc:Point" x="2630.0" y="492.0"/>
        <di:waypoint xsi:type="dc:Point" x="2736.0" y="492.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="2627.0" y="481.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ExclusiveGateway_51" bpmnElement="ExclusiveGateway_1__prg__p10" isMarkerVisible="true">
        <dc:Bounds height="50.0" width="50.0" x="338.0" y="144.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="133.0" x="316.0" y="119.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_33" bpmnElement="SequenceFlow_28" sourceElement="_BPMNShape_ExclusiveGateway_51" targetElement="_BPMNShape_ScriptTask_33">
        <di:waypoint xsi:type="dc:Point" x="388.0" y="169.0"/>
        <di:waypoint xsi:type="dc:Point" x="734.0" y="170.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="27.0" x="457.0" y="169.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_38" bpmnElement="SequenceFlow_33" sourceElement="_BPMNShape_ExclusiveGateway_51" targetElement="_BPMNShape_ServiceTask_2">
        <di:waypoint xsi:type="dc:Point" x="363.0" y="194.0"/>
        <di:waypoint xsi:type="dc:Point" x="364.0" y="266.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="20.0" x="372.0" y="234.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_ExclusiveGateway_52" bpmnElement="ExclusiveGateway_2__prg__p35" isMarkerVisible="true">
        <dc:Bounds height="50.0" width="50.0" x="758.0" y="279.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="0.0" width="0.0" x="783.0" y="334.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_39" bpmnElement="SequenceFlow_34" sourceElement="_BPMNShape_ScriptTask_30" targetElement="_BPMNShape_ExclusiveGateway_52">
        <di:waypoint xsi:type="dc:Point" x="715.0" y="305.0"/>
        <di:waypoint xsi:type="dc:Point" x="736.0" y="305.0"/>
        <di:waypoint xsi:type="dc:Point" x="736.0" y="304.0"/>
        <di:waypoint xsi:type="dc:Point" x="758.0" y="304.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="725.0" y="305.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_40" bpmnElement="SequenceFlow_35" sourceElement="_BPMNShape_ExclusiveGateway_52" targetElement="_BPMNShape_UserTask_6">
        <di:waypoint xsi:type="dc:Point" x="808.0" y="304.0"/>
        <di:waypoint xsi:type="dc:Point" x="855.0" y="305.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="821.0" y="304.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_46" bpmnElement="SequenceFlow_41" sourceElement="_BPMNShape_UserTask_2" targetElement="_BPMNShape_ServiceTask_3">
        <di:waypoint xsi:type="dc:Point" x="593.0" y="435.0"/>
        <di:waypoint xsi:type="dc:Point" x="736.0" y="435.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="662.0" y="435.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_47" bpmnElement="SequenceFlow_42" sourceElement="_BPMNShape_ExclusiveGateway_52" targetElement="_BPMNShape_ScriptTask_33">
        <di:waypoint xsi:type="dc:Point" x="783.0" y="279.0"/>
        <di:waypoint xsi:type="dc:Point" x="784.0" y="210.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="70.0" x="749.0" y="226.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn2:definitions>