/* Copyright (c) Ericsson 2015 */

define("3pps/dojox/gfx/path",["./_base","../../dojo/_base/lang","../../dojo/_base/declare","./matrix","./shape"],function(t,e,r,n,i){var o=r("dojox.gfx.path.Path",i.Shape,{constructor:function(r){this.shape=e.clone(t.defaultPath),this.segments=[],this.tbbox=null,this.absolute=!0,this.last={},this.rawNode=r,this.segmented=!1},setAbsoluteMode:function(t){return this._confirmSegmented(),this.absolute="string"==typeof t?"absolute"==t:t,this},getAbsoluteMode:function(){return this._confirmSegmented(),this.absolute},getBoundingBox:function(){return this._confirmSegmented(),this.bbox&&"l"in this.bbox?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null},_getRealBBox:function(){if(this._confirmSegmented(),this.tbbox)return this.tbbox;var t=this.bbox,e=this._getRealMatrix();this.bbox=null;for(var r=0,n=this.segments.length;n>r;++r)this._updateWithSegment(this.segments[r],e);var i=this.bbox;return this.bbox=t,this.tbbox=i?[{x:i.l,y:i.t},{x:i.r,y:i.t},{x:i.r,y:i.b},{x:i.l,y:i.b}]:null,this.tbbox},getLastPosition:function(){return this._confirmSegmented(),"x"in this.last?this.last:null},_applyTransform:function(){return this.tbbox=null,this.inherited(arguments)},_updateBBox:function(t,e,r){if(r){var i=n.multiplyPoint(r,t,e);t=i.x,e=i.y}this.bbox&&"l"in this.bbox?(this.bbox.l>t&&(this.bbox.l=t),this.bbox.r<t&&(this.bbox.r=t),this.bbox.t>e&&(this.bbox.t=e),this.bbox.b<e&&(this.bbox.b=e)):this.bbox={l:t,b:e,r:t,t:e}},_updateWithSegment:function(e,r){var n,i=e.args,o=i.length;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(n=0;o>n;n+=2)this._updateBBox(i[n],i[n+1],r);this.last.x=i[o-2],this.last.y=i[o-1],this.absolute=!0;break;case"H":for(n=0;o>n;++n)this._updateBBox(i[n],this.last.y,r);this.last.x=i[o-1],this.absolute=!0;break;case"V":for(n=0;o>n;++n)this._updateBBox(this.last.x,i[n],r);this.last.y=i[o-1],this.absolute=!0;break;case"m":var a=0;"x"in this.last||(this._updateBBox(this.last.x=i[0],this.last.y=i[1],r),a=2);for(n=a;o>n;n+=2)this._updateBBox(this.last.x+=i[n],this.last.y+=i[n+1],r);this.absolute=!1;break;case"l":case"t":for(n=0;o>n;n+=2)this._updateBBox(this.last.x+=i[n],this.last.y+=i[n+1],r);this.absolute=!1;break;case"h":for(n=0;o>n;++n)this._updateBBox(this.last.x+=i[n],this.last.y,r);this.absolute=!1;break;case"v":for(n=0;o>n;++n)this._updateBBox(this.last.x,this.last.y+=i[n],r);this.absolute=!1;break;case"c":for(n=0;o>n;n+=6)this._updateBBox(this.last.x+i[n],this.last.y+i[n+1],r),this._updateBBox(this.last.x+i[n+2],this.last.y+i[n+3],r),this._updateBBox(this.last.x+=i[n+4],this.last.y+=i[n+5],r);this.absolute=!1;break;case"s":case"q":for(n=0;o>n;n+=4)this._updateBBox(this.last.x+i[n],this.last.y+i[n+1],r),this._updateBBox(this.last.x+=i[n+2],this.last.y+=i[n+3],r);this.absolute=!1;break;case"A":for(n=0;o>n;n+=7)this._updateBBox(i[n+5],i[n+6],r);this.last.x=i[o-2],this.last.y=i[o-1],this.absolute=!0;break;case"a":for(n=0;o>n;n+=7)this._updateBBox(this.last.x+=i[n+5],this.last.y+=i[n+6],r);this.absolute=!1}var s=[e.action];for(n=0;o>n;++n)s.push(t.formatNumber(i[n],!0));"string"==typeof this.shape.path?this.shape.path+=s.join(""):Array.prototype.push.apply(this.shape.path,s)},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(t,e){this.tbbox=null;var r,n=this._validSegments[t.toLowerCase()];"number"==typeof n&&(n?e.length>=n&&(r={action:t,args:e.slice(0,e.length-e.length%n)},this.segments.push(r),this._updateWithSegment(r)):(r={action:t,args:[]},this.segments.push(r),this._updateWithSegment(r)))},_collectArgs:function(t,e){for(var r=0;r<e.length;++r){var n=e[r];"boolean"==typeof n?t.push(n?1:0):"number"==typeof n?t.push(n):n instanceof Array?this._collectArgs(t,n):"x"in n&&"y"in n&&t.push(n.x,n.y)}},moveTo:function(){this._confirmSegmented();var t=[];return this._collectArgs(t,arguments),this._pushSegment(this.absolute?"M":"m",t),this},lineTo:function(){this._confirmSegmented();var t=[];return this._collectArgs(t,arguments),this._pushSegment(this.absolute?"L":"l",t),this},hLineTo:function(){this._confirmSegmented();var t=[];return this._collectArgs(t,arguments),this._pushSegment(this.absolute?"H":"h",t),this},vLineTo:function(){this._confirmSegmented();var t=[];return this._collectArgs(t,arguments),this._pushSegment(this.absolute?"V":"v",t),this},curveTo:function(){this._confirmSegmented();var t=[];return this._collectArgs(t,arguments),this._pushSegment(this.absolute?"C":"c",t),this},smoothCurveTo:function(){this._confirmSegmented();var t=[];return this._collectArgs(t,arguments),this._pushSegment(this.absolute?"S":"s",t),this},qCurveTo:function(){this._confirmSegmented();var t=[];return this._collectArgs(t,arguments),this._pushSegment(this.absolute?"Q":"q",t),this},qSmoothCurveTo:function(){this._confirmSegmented();var t=[];return this._collectArgs(t,arguments),this._pushSegment(this.absolute?"T":"t",t),this},arcTo:function(){this._confirmSegmented();var t=[];return this._collectArgs(t,arguments),this._pushSegment(this.absolute?"A":"a",t),this},closePath:function(){return this._confirmSegmented(),this._pushSegment("Z",[]),this},_confirmSegmented:function(){if(!this.segmented){var t=this.shape.path;this.shape.path=[],this._setPath(t),this.shape.path=this.shape.path.join(""),this.segmented=!0}},_setPath:function(r){var n=e.isArray(r)?r:r.match(t.pathSvgRegExp);if(this.segments=[],this.absolute=!0,this.bbox={},this.last={},n){for(var i="",o=[],a=n.length,s=0;a>s;++s){var l=n[s],u=parseFloat(l);isNaN(u)?(i&&this._pushSegment(i,o),o=[],i=l):o.push(u)}this._pushSegment(i,o)}},setShape:function(e){return this.inherited(arguments,["string"==typeof e?{path:e}:e]),this.segmented=!1,this.segments=[],t.lazyPathSegmentation||this._confirmSegmented(),this},_2PI:2*Math.PI}),a=r("dojox.gfx.path.TextPath",o,{constructor:function(r){"text"in this||(this.text=e.clone(t.defaultTextPath)),"fontStyle"in this||(this.fontStyle=e.clone(t.defaultFont))},getText:function(){return this.text},setText:function(e){return this.text=t.makeParameters(this.text,"string"==typeof e?{text:e}:e),this._setText(),this},getFont:function(){return this.fontStyle},setFont:function(e){return this.fontStyle="string"==typeof e?t.splitFontString(e):t.makeParameters(t.defaultFont,e),this._setFont(),this}});return t.path={Path:o,TextPath:a}}),define("3pps/dojox/gfx/matrix",["./_base","../../dojo/_base/lang"],function(t,e){var r=t.matrix={},n={};return r._degToRad=function(t){return n[t]||(n[t]=Math.PI*t/180)},r._radToDeg=function(t){return t/Math.PI*180},r.Matrix2D=function(t){if(t)if("number"==typeof t)this.xx=this.yy=t;else if(t instanceof Array){if(t.length>0){for(var n=r.normalize(t[0]),i=1;i<t.length;++i){var o=n,a=r.normalize(t[i]);n=new r.Matrix2D,n.xx=o.xx*a.xx+o.xy*a.yx,n.xy=o.xx*a.xy+o.xy*a.yy,n.yx=o.yx*a.xx+o.yy*a.yx,n.yy=o.yx*a.xy+o.yy*a.yy,n.dx=o.xx*a.dx+o.xy*a.dy+o.dx,n.dy=o.yx*a.dx+o.yy*a.dy+o.dy}e.mixin(this,n)}}else e.mixin(this,t)},e.extend(r.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0}),e.mixin(r,{identity:new r.Matrix2D,flipX:new r.Matrix2D({xx:-1}),flipY:new r.Matrix2D({yy:-1}),flipXY:new r.Matrix2D({xx:-1,yy:-1}),translate:function(t,e){return arguments.length>1?new r.Matrix2D({dx:t,dy:e}):new r.Matrix2D({dx:t.x,dy:t.y})},scale:function(t,e){return arguments.length>1?new r.Matrix2D({xx:t,yy:e}):"number"==typeof t?new r.Matrix2D({xx:t,yy:t}):new r.Matrix2D({xx:t.x,yy:t.y})},rotate:function(t){var e=Math.cos(t),n=Math.sin(t);return new r.Matrix2D({xx:e,xy:-n,yx:n,yy:e})},rotateg:function(t){return r.rotate(r._degToRad(t))},skewX:function(t){return new r.Matrix2D({xy:Math.tan(t)})},skewXg:function(t){return r.skewX(r._degToRad(t))},skewY:function(t){return new r.Matrix2D({yx:Math.tan(t)})},skewYg:function(t){return r.skewY(r._degToRad(t))},reflect:function(t,e){1==arguments.length&&(e=t.y,t=t.x);var n=t*t,i=e*e,o=n+i,a=2*t*e/o;return new r.Matrix2D({xx:2*n/o-1,xy:a,yx:a,yy:2*i/o-1})},project:function(t,e){1==arguments.length&&(e=t.y,t=t.x);var n=t*t,i=e*e,o=n+i,a=t*e/o;return new r.Matrix2D({xx:n/o,xy:a,yx:a,yy:i/o})},normalize:function(t){return t instanceof r.Matrix2D?t:new r.Matrix2D(t)},isIdentity:function(t){return 1==t.xx&&0==t.xy&&0==t.yx&&1==t.yy&&0==t.dx&&0==t.dy},clone:function(t){var e=new r.Matrix2D;for(var n in t)"number"==typeof t[n]&&"number"==typeof e[n]&&e[n]!=t[n]&&(e[n]=t[n]);return e},invert:function(t){var e=r.normalize(t),n=e.xx*e.yy-e.xy*e.yx;return e=new r.Matrix2D({xx:e.yy/n,xy:-e.xy/n,yx:-e.yx/n,yy:e.xx/n,dx:(e.xy*e.dy-e.yy*e.dx)/n,dy:(e.yx*e.dx-e.xx*e.dy)/n})},_multiplyPoint:function(t,e,r){return{x:t.xx*e+t.xy*r+t.dx,y:t.yx*e+t.yy*r+t.dy}},multiplyPoint:function(t,e,n){var i=r.normalize(t);return"number"==typeof e&&"number"==typeof n?r._multiplyPoint(i,e,n):r._multiplyPoint(i,e.x,e.y)},multiplyRectangle:function(t,e){var n=r.normalize(t);if(e=e||{x:0,y:0,width:0,height:0},r.isIdentity(n))return{x:e.x,y:e.y,width:e.width,height:e.height};var i=r.multiplyPoint(n,e.x,e.y),o=r.multiplyPoint(n,e.x,e.y+e.height),a=r.multiplyPoint(n,e.x+e.width,e.y),s=r.multiplyPoint(n,e.x+e.width,e.y+e.height),l=Math.min(i.x,o.x,a.x,s.x),u=Math.min(i.y,o.y,a.y,s.y),c=Math.max(i.x,o.x,a.x,s.x),d=Math.max(i.y,o.y,a.y,s.y);return{x:l,y:u,width:c-l,height:d-u}},multiply:function(t){for(var e=r.normalize(t),n=1;n<arguments.length;++n){var i=e,o=r.normalize(arguments[n]);e=new r.Matrix2D,e.xx=i.xx*o.xx+i.xy*o.yx,e.xy=i.xx*o.xy+i.xy*o.yy,e.yx=i.yx*o.xx+i.yy*o.yx,e.yy=i.yx*o.xy+i.yy*o.yy,e.dx=i.xx*o.dx+i.xy*o.dy+i.dx,e.dy=i.yx*o.dx+i.yy*o.dy+i.dy}return e},_sandwich:function(t,e,n){return r.multiply(r.translate(e,n),t,r.translate(-e,-n))},scaleAt:function(t,e,n,i){switch(arguments.length){case 4:return r._sandwich(r.scale(t,e),n,i);case 3:return"number"==typeof n?r._sandwich(r.scale(t),e,n):r._sandwich(r.scale(t,e),n.x,n.y)}return r._sandwich(r.scale(t),e.x,e.y)},rotateAt:function(t,e,n){return arguments.length>2?r._sandwich(r.rotate(t),e,n):r._sandwich(r.rotate(t),e.x,e.y)},rotategAt:function(t,e,n){return arguments.length>2?r._sandwich(r.rotateg(t),e,n):r._sandwich(r.rotateg(t),e.x,e.y)},skewXAt:function(t,e,n){return arguments.length>2?r._sandwich(r.skewX(t),e,n):r._sandwich(r.skewX(t),e.x,e.y)},skewXgAt:function(t,e,n){return arguments.length>2?r._sandwich(r.skewXg(t),e,n):r._sandwich(r.skewXg(t),e.x,e.y)},skewYAt:function(t,e,n){return arguments.length>2?r._sandwich(r.skewY(t),e,n):r._sandwich(r.skewY(t),e.x,e.y)},skewYgAt:function(t,e,n){return arguments.length>2?r._sandwich(r.skewYg(t),e,n):r._sandwich(r.skewYg(t),e.x,e.y)}}),t.Matrix2D=r.Matrix2D,r}),define("3pps/dojox/gfx/shape",["./_base","../../dojo/_base/lang","../../dojo/_base/declare","../../dojo/_base/kernel","../../dojo/_base/sniff","../../dojo/_base/connect","../../dojo/_base/array","../../dojo/dom-construct","../../dojo/_base/Color","./matrix"],function(t,e,r,n,i,o,a,s,l,u){var c=t.shape={},d={},h={};return c.register=function(t){var e=t.declaredClass.split(".").pop(),r=e in d?++d[e]:d[e]=0,n=e+r;return h[n]=t,n},c.byId=function(t){return h[t]},c.dispose=function(t,e){if(e&&t.children)for(var r=0;r<t.children.length;++r)c.dispose(t.children[r],!0);delete h[t.getUID()]},c.Shape=r("dojox.gfx.shape.Shape",null,{constructor:function(){this.rawNode=null,this.shape=null,this.matrix=null,this.fillStyle=null,this.strokeStyle=null,this.bbox=null,this.parent=null,this.parentMatrix=null;var t=c.register(this);this.getUID=function(){return t}},destroy:function(){c.dispose(this)},getNode:function(){return this.rawNode},getShape:function(){return this.shape},getTransform:function(){return this.matrix},getFill:function(){return this.fillStyle},getStroke:function(){return this.strokeStyle},getParent:function(){return this.parent},getBoundingBox:function(){return this.bbox},getTransformedBoundingBox:function(){var t=this.getBoundingBox();if(!t)return null;var e=this._getRealMatrix(),r=u;return[r.multiplyPoint(e,t.x,t.y),r.multiplyPoint(e,t.x+t.width,t.y),r.multiplyPoint(e,t.x+t.width,t.y+t.height),r.multiplyPoint(e,t.x,t.y+t.height)]},getEventSource:function(){return this.rawNode},setClip:function(t){this.clip=t},getClip:function(){return this.clip},setShape:function(e){return this.shape=t.makeParameters(this.shape,e),this.bbox=null,this},setFill:function(e){if(!e)return this.fillStyle=null,this;var r=null;if("object"==typeof e&&"type"in e)switch(e.type){case"linear":r=t.makeParameters(t.defaultLinearGradient,e);break;case"radial":r=t.makeParameters(t.defaultRadialGradient,e);break;case"pattern":r=t.makeParameters(t.defaultPattern,e)}else r=t.normalizeColor(e);return this.fillStyle=r,this},setStroke:function(r){if(!r)return this.strokeStyle=null,this;("string"==typeof r||e.isArray(r)||r instanceof l)&&(r={color:r});var n=this.strokeStyle=t.makeParameters(t.defaultStroke,r);return n.color=t.normalizeColor(n.color),this},setTransform:function(t){return this.matrix=u.clone(t?u.normalize(t):u.identity),this._applyTransform()},_applyTransform:function(){return this},moveToFront:function(){var t=this.getParent();return t&&(t._moveChildToFront(this),this._moveToFront()),this},moveToBack:function(){var t=this.getParent();return t&&(t._moveChildToBack(this),this._moveToBack()),this},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(t){return t?this.setTransform([this.matrix,t]):this},applyLeftTransform:function(t){return t?this.setTransform([t,this.matrix]):this},applyTransform:function(t){return t?this.setTransform([this.matrix,t]):this},removeShape:function(t){return this.parent&&this.parent.remove(this,t),this},_setParent:function(t,e){return this.parent=t,this._updateParentMatrix(e)},_updateParentMatrix:function(t){return this.parentMatrix=t?u.clone(t):null,this._applyTransform()},_getRealMatrix:function(){for(var t=this.matrix,e=this.parent;e;)e.matrix&&(t=u.multiply(e.matrix,t)),e=e.parent;return t}}),c._eventsProcessing={connect:function(e,r,n){return o.connect(this.getEventSource(),e,c.fixCallback(this,t.fixTarget,r,n))},disconnect:function(t){o.disconnect(t)}},c.fixCallback=function(t,r,i,o){if(o||(o=i,i=null),e.isString(o)){if(i=i||n.global,!i[o])throw['dojox.gfx.shape.fixCallback: scope["',o,'"] is null (scope="',i,'")'].join("");return function(e){return r(e,t)?i[o].apply(i,arguments||[]):void 0}}return i?function(e){return r(e,t)?o.apply(i,arguments||[]):void 0}:function(e){return r(e,t)?o.apply(i,arguments):void 0}},e.extend(c.Shape,c._eventsProcessing),c.Container={_init:function(){this.children=[]},openBatch:function(){},closeBatch:function(){},add:function(t){var e=t.getParent();return e&&e.remove(t,!0),this.children.push(t),t._setParent(this,this._getRealMatrix())},remove:function(t,e){for(var r=0;r<this.children.length;++r)if(this.children[r]==t){e||(t.parent=null,t.parentMatrix=null),this.children.splice(r,1);break}return this},clear:function(t){for(var e,r=0;r<this.children.length;++r)e=this.children[r],e.parent=null,e.parentMatrix=null,t&&e.destroy();return this.children=[],this},getBoundingBox:function(){if(this.children){var t=null;return a.forEach(this.children,function(e){var r=e.getBoundingBox();if(r){var n=e.getTransform();n&&(r=u.multiplyRectangle(n,r)),t?(t.x=Math.min(t.x,r.x),t.y=Math.min(t.y,r.y),t.endX=Math.max(t.endX,r.x+r.width),t.endY=Math.max(t.endY,r.y+r.height)):t={x:r.x,y:r.y,endX:r.x+r.width,endY:r.y+r.height}}}),t&&(t.width=t.endX-t.x,t.height=t.endY-t.y),t}return null},_moveChildToFront:function(t){for(var e=0;e<this.children.length;++e)if(this.children[e]==t){this.children.splice(e,1),this.children.push(t);break}return this},_moveChildToBack:function(t){for(var e=0;e<this.children.length;++e)if(this.children[e]==t){this.children.splice(e,1),this.children.unshift(t);break}return this}},c.Surface=r("dojox.gfx.shape.Surface",null,{constructor:function(){this.rawNode=null,this._parent=null,this._nodes=[],this._events=[]},destroy:function(){if(a.forEach(this._nodes,s.destroy),this._nodes=[],a.forEach(this._events,o.disconnect),this._events=[],this.rawNode=null,i("ie"))for(;this._parent.lastChild;)s.destroy(this._parent.lastChild);else this._parent.innerHTML="";this._parent=null},getEventSource:function(){return this.rawNode},_getRealMatrix:function(){return null},isLoaded:!0,onLoad:function(t){},whenLoaded:function(t,r){var n=e.hitch(t,r);if(this.isLoaded)n(this);else var i=o.connect(this,"onLoad",function(t){o.disconnect(i),n(t)})}}),e.extend(c.Surface,c._eventsProcessing),c.Rect=r("dojox.gfx.shape.Rect",c.Shape,{constructor:function(e){this.shape=t.getDefault("Rect"),this.rawNode=e},getBoundingBox:function(){return this.shape}}),c.Ellipse=r("dojox.gfx.shape.Ellipse",c.Shape,{constructor:function(e){this.shape=t.getDefault("Ellipse"),this.rawNode=e},getBoundingBox:function(){if(!this.bbox){var t=this.shape;this.bbox={x:t.cx-t.rx,y:t.cy-t.ry,width:2*t.rx,height:2*t.ry}}return this.bbox}}),c.Circle=r("dojox.gfx.shape.Circle",c.Shape,{constructor:function(e){this.shape=t.getDefault("Circle"),this.rawNode=e},getBoundingBox:function(){if(!this.bbox){var t=this.shape;this.bbox={x:t.cx-t.r,y:t.cy-t.r,width:2*t.r,height:2*t.r}}return this.bbox}}),c.Line=r("dojox.gfx.shape.Line",c.Shape,{constructor:function(e){this.shape=t.getDefault("Line"),this.rawNode=e},getBoundingBox:function(){if(!this.bbox){var t=this.shape;this.bbox={x:Math.min(t.x1,t.x2),y:Math.min(t.y1,t.y2),width:Math.abs(t.x2-t.x1),height:Math.abs(t.y2-t.y1)}}return this.bbox}}),c.Polyline=r("dojox.gfx.shape.Polyline",c.Shape,{constructor:function(e){this.shape=t.getDefault("Polyline"),this.rawNode=e},setShape:function(t,e){return t&&t instanceof Array?(this.inherited(arguments,[{points:t}]),e&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.inherited(arguments,[t]),this},_normalizePoints:function(){var t=this.shape.points,e=t&&t.length;if(e&&"number"==typeof t[0]){for(var r=[],n=0;e>n;n+=2)r.push({x:t[n],y:t[n+1]});this.shape.points=r}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){for(var t=this.shape.points,e=t.length,r=t[0],n={l:r.x,t:r.y,r:r.x,b:r.y},i=1;e>i;++i)r=t[i],n.l>r.x&&(n.l=r.x),n.r<r.x&&(n.r=r.x),n.t>r.y&&(n.t=r.y),n.b<r.y&&(n.b=r.y);this.bbox={x:n.l,y:n.t,width:n.r-n.l,height:n.b-n.t}}return this.bbox}}),c.Image=r("dojox.gfx.shape.Image",c.Shape,{constructor:function(e){this.shape=t.getDefault("Image"),this.rawNode=e},getBoundingBox:function(){return this.shape},setStroke:function(){return this},setFill:function(){return this}}),c.Text=r(c.Shape,{constructor:function(e){this.fontStyle=null,this.shape=t.getDefault("Text"),this.rawNode=e},getFont:function(){return this.fontStyle},setFont:function(e){return this.fontStyle="string"==typeof e?t.splitFontString(e):t.makeParameters(t.defaultFont,e),this._setFont(),this}}),c.Creator={createShape:function(e){switch(e.type){case t.defaultPath.type:return this.createPath(e);case t.defaultRect.type:return this.createRect(e);case t.defaultCircle.type:return this.createCircle(e);case t.defaultEllipse.type:return this.createEllipse(e);case t.defaultLine.type:return this.createLine(e);case t.defaultPolyline.type:return this.createPolyline(e);case t.defaultImage.type:return this.createImage(e);case t.defaultText.type:return this.createText(e);case t.defaultTextPath.type:return this.createTextPath(e)}return null},createGroup:function(){return this.createObject(t.Group)},createRect:function(e){return this.createObject(t.Rect,e)},createEllipse:function(e){return this.createObject(t.Ellipse,e)},createCircle:function(e){return this.createObject(t.Circle,e)},createLine:function(e){return this.createObject(t.Line,e)},createPolyline:function(e){return this.createObject(t.Polyline,e)},createImage:function(e){return this.createObject(t.Image,e)},createText:function(e){return this.createObject(t.Text,e)},createPath:function(e){return this.createObject(t.Path,e)},createTextPath:function(e){return this.createObject(t.TextPath,{}).setText(e)},createObject:function(t,e){return null}},c}),define("3pps/dojo/dom-prop",["./_base/kernel","./sniff","./_base/lang","./dom","./dom-style","./dom-construct","./_base/connect"],function(t,e,r,n,i,o,a){var s={},l={},u=0,c=t._scopeName+"attrid";return s.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"},s.get=function(t,e){t=n.byId(t);var r=e.toLowerCase(),i=s.names[r]||e;return t[i]},s.set=function(t,d,h){t=n.byId(t);var f=arguments.length;if(2==f&&"string"!=typeof d){for(var p in d)s.set(t,p,d[p]);return t}var m=d.toLowerCase(),g=s.names[m]||d;if("style"==g&&"string"!=typeof h)return i.set(t,h),t;if("innerHTML"==g)return e("ie")&&t.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(o.empty(t),t.appendChild(o.toDom(h,t.ownerDocument))):t[g]=h,t;if(r.isFunction(h)){var y=t[c];y||(y=u++,t[c]=y),l[y]||(l[y]={});var x=l[y][g];if(x)a.disconnect(x);else try{delete t[g]}catch(v){}return h?l[y][g]=a.connect(t,g,h):t[g]=null,t}return t[g]=h,t},s}),define("3pps/dojo/dom-attr",["./sniff","./_base/lang","./dom","./dom-style","./dom-prop"],function(t,e,r,n,i){function o(t,e){var r=t.getAttributeNode&&t.getAttributeNode(e);return r&&r.specified}var a={},s={innerHTML:1,className:1,htmlFor:t("ie"),value:1},l={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};return a.has=function(t,e){var n=e.toLowerCase();return s[i.names[n]||e]||o(r.byId(t),l[n]||e)},a.get=function(t,n){t=r.byId(t);var a=n.toLowerCase(),u=i.names[a]||n,c=s[u],d=t[u];if(c&&"undefined"!=typeof d)return d;if("href"!=u&&("boolean"==typeof d||e.isFunction(d)))return d;var h=l[a]||n;return o(t,h)?t.getAttribute(h):null},a.set=function(t,o,u){if(t=r.byId(t),2==arguments.length){for(var c in o)a.set(t,c,o[c]);return t}var d=o.toLowerCase(),h=i.names[d]||o,f=s[h];return"style"==h&&"string"!=typeof u?(n.set(t,u),t):f||"boolean"==typeof u||e.isFunction(u)?i.set(t,o,u):(t.setAttribute(l[d]||o,u),t)},a.remove=function(t,e){r.byId(t).removeAttribute(l[e.toLowerCase()]||e)},a.getNodeProp=function(t,e){t=r.byId(t);var n=e.toLowerCase(),a=i.names[n]||e;if(a in t&&"href"!=a)return t[a];var s=l[n]||e;return o(t,s)?t.getAttribute(s):null},a}),define("3pps/dojo/_base/declare",["./kernel","../has","./lang"],function(t,e,r){function n(t,e){throw new Error("declare"+(e?" "+e:"")+": "+t)}function i(t,e){for(var r,i,o,a,s,l,u,c,d=[],h=[{cls:0,refs:[]}],f={},p=1,m=t.length,g=0;m>g;++g){for(o=t[g],o?"[object Function]"!=k.call(o)&&n("mixin #"+g+" is not a callable constructor.",e):n("mixin #"+g+" is unknown. Did you use dojo.require to pull it in?",e),i=o._meta?o._meta.bases:[o],a=0,r=i.length-1;r>=0;--r)s=i[r].prototype,s.hasOwnProperty("declaredClass")||(s.declaredClass="uniqName_"+S++),u=s.declaredClass,f.hasOwnProperty(u)||(f[u]={count:0,refs:[],cls:i[r]},++p),l=f[u],a&&a!==l&&(l.refs.push(a),++a.count),a=l;++a.count,h[0].refs.push(a)}for(;h.length;){for(a=h.pop(),d.push(a.cls),--p;c=a.refs,1==c.length;){if(a=c[0],!a||--a.count){a=0;break}d.push(a.cls),--p}if(a)for(g=0,m=c.length;m>g;++g)a=c[g],--a.count||h.push(a)}return p&&n("can't build consistent linearization",e),o=t[0],d[0]=o?o._meta&&o===d[d.length-o._meta.bases.length]?o._meta.bases.length:1:0,d}function o(t,e,r){var i,o,a,s,l,u,c,d,h,f=this._inherited=this._inherited||{};if("string"==typeof t&&(i=t,t=e,e=r),r=0,s=t.callee,i=i||s.nom,i||n("can't deduce a name to call inherited()",this.declaredClass),l=this.constructor._meta,a=l.bases,h=f.p,i!=C){if(f.c!==s&&(h=0,u=a[0],l=u._meta,l.hidden[i]!==s)){o=l.chains,o&&"string"==typeof o[i]&&n("calling chained method with inherited: "+i,this.declaredClass);do if(l=u._meta,c=u.prototype,l&&(c[i]===s&&c.hasOwnProperty(i)||l.hidden[i]===s))break;while(u=a[++h]);h=u?h:-1}if(u=a[++h])if(c=u.prototype,u._meta&&c.hasOwnProperty(i))r=c[i];else{d=w[i];do if(c=u.prototype,r=c[i],r&&(u._meta?c.hasOwnProperty(i):r!==d))break;while(u=a[++h])}r=u&&r||w[i]}else{if(f.c!==s&&(h=0,l=a[0]._meta,l&&l.ctor!==s)){for(o=l.chains,o&&"manual"===o.constructor||n("calling chained constructor with inherited",this.declaredClass);(u=a[++h])&&(l=u._meta,!l||l.ctor!==s););h=u?h:-1}for(;(u=a[++h])&&(l=u._meta,!(r=l?l.ctor:u)););r=u&&r}return f.c=r,f.p=h,r?e===!0?r:r.apply(this,e||t):void 0}function a(t,e){return"string"==typeof t?this.__inherited(t,e,!0):this.__inherited(t,!0)}function s(t,e,r){var n=this.getInherited(t,e);return n?n.apply(this,r||e||t):void 0}function l(t){for(var e=this.constructor._meta.bases,r=0,n=e.length;n>r;++r)if(e[r]===t)return!0;return this instanceof t}function u(t,n){for(var i in n)i!=C&&n.hasOwnProperty(i)&&(t[i]=n[i]);if(e("bug-for-in-skips-shadowed"))for(var o=r._extraNames,a=o.length;a;)i=o[--a],i!=C&&n.hasOwnProperty(i)&&(t[i]=n[i])}function c(t,n){var i,o;for(i in n)o=n[i],o===w[i]&&i in w||i==C||("[object Function]"==k.call(o)&&(o.nom=i),t[i]=o);if(e("bug-for-in-skips-shadowed"))for(var a=r._extraNames,s=a.length;s;)i=a[--s],o=n[i],o===w[i]&&i in w||i==C||("[object Function]"==k.call(o)&&(o.nom=i),t[i]=o);return t}function d(t){return v.safeMixin(this.prototype,t),this}function h(t){return v([this].concat(t))}function f(t,e){return function(){var r,n,i,o,a=arguments,s=a,l=a[0],u=t.length;if(!(this instanceof a.callee))return x(a);if(e&&(l&&l.preamble||this.preamble))for(o=new Array(t.length),o[0]=a,n=0;l=a[0],l&&(r=l.preamble,r&&(a=r.apply(this,a)||a)),r=t[n].prototype,r=r.hasOwnProperty("preamble")&&r.preamble,r&&(a=r.apply(this,a)||a),++n!=u;)o[n]=a;for(n=u-1;n>=0;--n)r=t[n],i=r._meta,r=i?i.ctor:r,r&&r.apply(this,o?o[n]:a);r=this.postscript,r&&r.apply(this,s)}}function p(t,e){return function(){var r,n=arguments,i=n,o=n[0];return this instanceof n.callee?(e&&(o&&(r=o.preamble,r&&(i=r.apply(this,i)||i)),r=this.preamble,r&&r.apply(this,i)),t&&t.apply(this,n),r=this.postscript,void(r&&r.apply(this,n))):x(n)}}function m(t){return function(){var e,r,n=arguments,i=0;if(!(this instanceof n.callee))return x(n);for(;e=t[i];++i)if(r=e._meta,e=r?r.ctor:e){e.apply(this,n);break}e=this.postscript,e&&e.apply(this,n)}}function g(t,e,r){return function(){var n,i,o,a=0,s=1;for(r&&(a=e.length-1,s=-1);n=e[a];a+=s)i=n._meta,o=(i?i.hidden:n.prototype)[t],o&&o.apply(this,arguments)}}function y(t){_.prototype=t.prototype;var e=new _;return _.prototype=null,e}function x(t){var e=t.callee,r=y(e);return e.apply(r,t),r}function v(t,e,s){"string"!=typeof t&&(s=e,e=t,t=""),s=s||{};var c,x,_,S,T,A,P,N=1,j=e;if("[object Array]"==k.call(e)?(A=i(e,t),_=A[0],N=A.length-_,e=A[N]):(A=[0],e?"[object Function]"==k.call(e)?(_=e._meta,A=A.concat(_?_.bases:e)):n("base class is not a callable constructor.",t):null!==e&&n("unknown base class. Did you use dojo.require to pull it in?",t)),e)for(x=N-1;c=y(e),x;--x)_=A[x],(_._meta?u:b)(c,_.prototype),S=new Function,S.superclass=e,S.prototype=c,e=c.constructor=S;else c={};for(v.safeMixin(c,s),_=s.constructor,_!==w.constructor&&(_.nom=C,c.constructor=_),x=N-1;x;--x)_=A[x]._meta,_&&_.chains&&(P=b(P||{},_.chains));if(c["-chains-"]&&(P=b(P||{},c["-chains-"])),_=!P||!P.hasOwnProperty(C),A[0]=S=P&&"manual"===P.constructor?m(A):1==A.length?p(s.constructor,_):f(A,_),S._meta={bases:A,hidden:s,chains:P,parents:j,ctor:s.constructor},S.superclass=e&&e.prototype,S.extend=d,S.createSubclass=h,S.prototype=c,c.constructor=S,c.getInherited=a,c.isInstanceOf=l,c.inherited=E,c.__inherited=o,t&&(c.declaredClass=t,r.setObject(t,S)),P)for(T in P)c[T]&&"string"==typeof P[T]&&T!=C&&(_=c[T]=g(T,A,"after"===P[T]),_.nom=T);return S}var b=r.mixin,w=Object.prototype,k=w.toString,_=new Function,S=0,C="constructor",E=t.config.isDebug?s:o;return t.safeMixin=v.safeMixin=c,t.declare=v,v}),define("3pps/dojox/gfx/svg",["../../dojo/_base/lang","../../dojo/_base/sniff","../../dojo/_base/window","../../dojo/dom","../../dojo/_base/declare","../../dojo/_base/array","../../dojo/dom-geometry","../../dojo/dom-attr","../../dojo/_base/Color","./_base","./shape","./path"],function(t,e,r,n,i,o,a,s,l,u,c,d){function h(t,e){return r.doc.createElementNS?r.doc.createElementNS(t,e):r.doc.createElement(e)}function f(t,e,r,n){return t.setAttributeNS?t.setAttributeNS(e,r,n):t.setAttribute(r,n)}function p(t){return g.useSvgWeb?r.doc.createTextNode(t,!0):r.doc.createTextNode(t)}function m(){return g.useSvgWeb?r.doc.createDocumentFragment(!0):r.doc.createDocumentFragment()}var g=u.svg={};g.useSvgWeb="undefined"!=typeof window.svgweb;var y=navigator.userAgent,x=e("ios"),v=e("android"),b=e("chrome")||v&&v>=4?"auto":"optimizeLegibility";g.xmlns={xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"},g.getRef=function(t){return t&&"none"!=t?t.match(/^url\(#.+\)$/)?n.byId(t.slice(5,-1)):t.match(/^#dojoUnique\d+$/)?n.byId(t.slice(1)):null:null},g.dasharray={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]};var w=0;g.Shape=i("dojox.gfx.svg.Shape",c.Shape,{destroy:function(){if(this.fillStyle&&"type"in this.fillStyle){var t=this.rawNode.getAttribute("fill"),e=g.getRef(t);e&&e.parentNode.removeChild(e)}if(this.clip){var r=this.rawNode.getAttribute("clip-path");if(r){var i=n.byId(r.match(/gfx_clip[\d]+/)[0]);i&&i.parentNode.removeChild(i)}}this.rawNode=null,c.Shape.prototype.destroy.apply(this,arguments)},setFill:function(t){if(!t)return this.fillStyle=null,this.rawNode.setAttribute("fill","none"),this.rawNode.setAttribute("fill-opacity",0),this;var e,r=function(t){this.setAttribute(t,e[t].toFixed(8))};if("object"==typeof t&&"type"in t){switch(t.type){case"linear":e=u.makeParameters(u.defaultLinearGradient,t);var n=this._setFillObject(e,"linearGradient");o.forEach(["x1","y1","x2","y2"],r,n);break;case"radial":e=u.makeParameters(u.defaultRadialGradient,t);var i=this._setFillObject(e,"radialGradient");o.forEach(["cx","cy","r"],r,i);break;case"pattern":e=u.makeParameters(u.defaultPattern,t);var a=this._setFillObject(e,"pattern");o.forEach(["x","y","width","height"],r,a)}return this.fillStyle=e,this}return e=u.normalizeColor(t),this.fillStyle=e,this.rawNode.setAttribute("fill",e.toCss()),this.rawNode.setAttribute("fill-opacity",e.a),this.rawNode.setAttribute("fill-rule","evenodd"),this},setStroke:function(e){var r=this.rawNode;if(!e)return this.strokeStyle=null,r.setAttribute("stroke","none"),r.setAttribute("stroke-opacity",0),this;("string"==typeof e||t.isArray(e)||e instanceof l)&&(e={color:e});var n=this.strokeStyle=u.makeParameters(u.defaultStroke,e);if(n.color=u.normalizeColor(n.color),n){r.setAttribute("stroke",n.color.toCss()),r.setAttribute("stroke-opacity",n.color.a),r.setAttribute("stroke-width",n.width),r.setAttribute("stroke-linecap",n.cap),"number"==typeof n.join?(r.setAttribute("stroke-linejoin","miter"),r.setAttribute("stroke-miterlimit",n.join)):r.setAttribute("stroke-linejoin",n.join);var i=n.style.toLowerCase();if(i in g.dasharray&&(i=g.dasharray[i]),i instanceof Array){i=t._toArray(i);for(var o=0;o<i.length;++o)i[o]*=n.width;if("butt"!=n.cap){for(var o=0;o<i.length;o+=2)i[o]-=n.width,i[o]<1&&(i[o]=1);for(var o=1;o<i.length;o+=2)i[o]+=n.width}i=i.join(",")}r.setAttribute("stroke-dasharray",i),r.setAttribute("dojoGfxStrokeStyle",n.style)}return this},_getParentSurface:function(){for(var t=this.parent;t&&!(t instanceof u.Surface);t=t.parent);return t},_setFillObject:function(t,e){var r=g.xmlns.svg;this.fillStyle=t;var n=this._getParentSurface(),i=n.defNode,o=this.rawNode.getAttribute("fill"),a=g.getRef(o);if(a)if(o=a,o.tagName.toLowerCase()!=e.toLowerCase()){var s=o.id;o.parentNode.removeChild(o),o=h(r,e),o.setAttribute("id",s),i.appendChild(o)}else for(;o.childNodes.length;)o.removeChild(o.lastChild);else o=h(r,e),o.setAttribute("id",u._base._getUniqueId()),i.appendChild(o);if("pattern"==e){o.setAttribute("patternUnits","userSpaceOnUse");var l=h(r,"image");l.setAttribute("x",0),l.setAttribute("y",0),l.setAttribute("width",t.width.toFixed(8)),l.setAttribute("height",t.height.toFixed(8)),f(l,g.xmlns.xlink,"xlink:href",t.src),o.appendChild(l)}else{o.setAttribute("gradientUnits","userSpaceOnUse");for(var c=0;c<t.colors.length;++c){
var d=t.colors[c],p=h(r,"stop"),m=d.color=u.normalizeColor(d.color);p.setAttribute("offset",d.offset.toFixed(8)),p.setAttribute("stop-color",m.toCss()),p.setAttribute("stop-opacity",m.a),o.appendChild(p)}}return this.rawNode.setAttribute("fill","url(#"+o.getAttribute("id")+")"),this.rawNode.removeAttribute("fill-opacity"),this.rawNode.setAttribute("fill-rule","evenodd"),o},_applyTransform:function(){var t=this.matrix;if(t){var e=this.matrix;this.rawNode.setAttribute("transform","matrix("+e.xx.toFixed(8)+","+e.yx.toFixed(8)+","+e.xy.toFixed(8)+","+e.yy.toFixed(8)+","+e.dx.toFixed(8)+","+e.dy.toFixed(8)+")")}else this.rawNode.removeAttribute("transform");return this},setRawNode:function(t){var e=this.rawNode=t;"image"!=this.shape.type&&e.setAttribute("fill","none"),e.setAttribute("fill-opacity",0),e.setAttribute("stroke","none"),e.setAttribute("stroke-opacity",0),e.setAttribute("stroke-width",1),e.setAttribute("stroke-linecap","butt"),e.setAttribute("stroke-linejoin","miter"),e.setAttribute("stroke-miterlimit",4),e.__gfxObject__=this.getUID()},setShape:function(t){this.shape=u.makeParameters(this.shape,t);for(var e in this.shape)"type"!=e&&this.rawNode.setAttribute(e,this.shape[e]);return this.bbox=null,this},_moveToFront:function(){return this.rawNode.parentNode.appendChild(this.rawNode),this},_moveToBack:function(){return this.rawNode.parentNode.insertBefore(this.rawNode,this.rawNode.parentNode.firstChild),this},setClip:function(e){this.inherited(arguments);var r=e?"width"in e?"rect":"cx"in e?"ellipse":"points"in e?"polyline":"d"in e?"path":null:null;if(e&&!r)return this;"polyline"===r&&(e=t.clone(e),e.points=e.points.join(","));var i,o,a=s.get(this.rawNode,"clip-path");if(a&&(i=n.byId(a.match(/gfx_clip[\d]+/)[0]),i&&i.removeChild(i.childNodes[0])),e){if(i)o=h(g.xmlns.svg,r),i.appendChild(o);else{var l=++w,u="gfx_clip"+l,c="url(#"+u+")";this.rawNode.setAttribute("clip-path",c),i=h(g.xmlns.svg,"clipPath"),o=h(g.xmlns.svg,r),i.appendChild(o),this.rawNode.parentNode.appendChild(i),s.set(i,"id",u)}s.set(o,e)}else this.rawNode.removeAttribute("clip-path"),i&&i.parentNode.removeChild(i);return this},_removeClipNode:function(){var t,e=s.get(this.rawNode,"clip-path");return e&&(t=n.byId(e.match(/gfx_clip[\d]+/)[0]),t&&t.parentNode.removeChild(t)),t}}),g.Group=i("dojox.gfx.svg.Group",g.Shape,{constructor:function(){c.Container._init.call(this)},setRawNode:function(t){this.rawNode=t,this.rawNode.__gfxObject__=this.getUID()},destroy:function(){this.clear(!0),g.Shape.prototype.destroy.apply(this,arguments)}}),g.Group.nodeType="g",g.Rect=i("dojox.gfx.svg.Rect",[g.Shape,c.Rect],{setShape:function(t){this.shape=u.makeParameters(this.shape,t),this.bbox=null;for(var e in this.shape)"type"!=e&&"r"!=e&&this.rawNode.setAttribute(e,this.shape[e]);return null!=this.shape.r&&(this.rawNode.setAttribute("ry",this.shape.r),this.rawNode.setAttribute("rx",this.shape.r)),this}}),g.Rect.nodeType="rect",g.Ellipse=i("dojox.gfx.svg.Ellipse",[g.Shape,c.Ellipse],{}),g.Ellipse.nodeType="ellipse",g.Circle=i("dojox.gfx.svg.Circle",[g.Shape,c.Circle],{}),g.Circle.nodeType="circle",g.Line=i("dojox.gfx.svg.Line",[g.Shape,c.Line],{}),g.Line.nodeType="line",g.Polyline=i("dojox.gfx.svg.Polyline",[g.Shape,c.Polyline],{setShape:function(t,e){t&&t instanceof Array?(this.shape=u.makeParameters(this.shape,{points:t}),e&&this.shape.points.length&&this.shape.points.push(this.shape.points[0])):this.shape=u.makeParameters(this.shape,t),this.bbox=null,this._normalizePoints();for(var r=[],n=this.shape.points,i=0;i<n.length;++i)r.push(n[i].x.toFixed(8),n[i].y.toFixed(8));return this.rawNode.setAttribute("points",r.join(" ")),this}}),g.Polyline.nodeType="polyline",g.Image=i("dojox.gfx.svg.Image",[g.Shape,c.Image],{setShape:function(t){this.shape=u.makeParameters(this.shape,t),this.bbox=null;var e=this.rawNode;for(var r in this.shape)"type"!=r&&"src"!=r&&e.setAttribute(r,this.shape[r]);return e.setAttribute("preserveAspectRatio","none"),f(e,g.xmlns.xlink,"xlink:href",this.shape.src),e.__gfxObject__=this.getUID(),this}}),g.Image.nodeType="image",g.Text=i("dojox.gfx.svg.Text",[g.Shape,c.Text],{setShape:function(t){this.shape=u.makeParameters(this.shape,t),this.bbox=null;var e=this.rawNode,r=this.shape;return e.setAttribute("x",r.x),e.setAttribute("y",r.y),e.setAttribute("text-anchor",r.align),e.setAttribute("text-decoration",r.decoration),e.setAttribute("rotate",r.rotated?90:0),e.setAttribute("kerning",r.kerning?"auto":0),e.setAttribute("text-rendering",b),e.firstChild?e.firstChild.nodeValue=r.text:e.appendChild(p(r.text)),this},getTextWidth:function(){var t=this.rawNode,e=t.parentNode,r=t.cloneNode(!0);r.style.visibility="hidden";var n=0,i=r.firstChild.nodeValue;if(e.appendChild(r),""!=i)for(;!n;)n=r.getBBox?parseInt(r.getBBox().width):68;return e.removeChild(r),n}}),g.Text.nodeType="text",g.Path=i("dojox.gfx.svg.Path",[g.Shape,d.Path],{_updateWithSegment:function(t){this.inherited(arguments),"string"==typeof this.shape.path&&this.rawNode.setAttribute("d",this.shape.path)},setShape:function(t){return this.inherited(arguments),this.shape.path?this.rawNode.setAttribute("d",this.shape.path):this.rawNode.removeAttribute("d"),this}}),g.Path.nodeType="path",g.TextPath=i("dojox.gfx.svg.TextPath",[g.Shape,d.TextPath],{_updateWithSegment:function(t){this.inherited(arguments),this._setTextPath()},setShape:function(t){return this.inherited(arguments),this._setTextPath(),this},_setTextPath:function(){if("string"==typeof this.shape.path){var t=this.rawNode;if(!t.firstChild){var e=h(g.xmlns.svg,"textPath"),r=p("");e.appendChild(r),t.appendChild(e)}var n=t.firstChild.getAttributeNS(g.xmlns.xlink,"href"),i=n&&g.getRef(n);if(!i){var o=this._getParentSurface();if(o){var a=o.defNode;i=h(g.xmlns.svg,"path");var s=u._base._getUniqueId();i.setAttribute("id",s),a.appendChild(i),f(t.firstChild,g.xmlns.xlink,"xlink:href","#"+s)}}i&&i.setAttribute("d",this.shape.path)}},_setText:function(){var t=this.rawNode;if(!t.firstChild){var e=h(g.xmlns.svg,"textPath"),r=p("");e.appendChild(r),t.appendChild(e)}t=t.firstChild;var n=this.text;switch(t.setAttribute("alignment-baseline","middle"),n.align){case"middle":t.setAttribute("text-anchor","middle"),t.setAttribute("startOffset","50%");break;case"end":t.setAttribute("text-anchor","end"),t.setAttribute("startOffset","100%");break;default:t.setAttribute("text-anchor","start"),t.setAttribute("startOffset","0%")}t.setAttribute("baseline-shift","0.5ex"),t.setAttribute("text-decoration",n.decoration),t.setAttribute("rotate",n.rotated?90:0),t.setAttribute("kerning",n.kerning?"auto":0),t.firstChild.data=n.text}}),g.TextPath.nodeType="text";var k=function(){var t=/WebKit\/(\d*)/.exec(y);return t?t[1]:0}()>534;g.Surface=i("dojox.gfx.svg.Surface",c.Surface,{constructor:function(){c.Container._init.call(this)},destroy:function(){c.Container.clear.call(this,!0),this.defNode=null,this.inherited(arguments)},setDimensions:function(t,e){return this.rawNode?(this.rawNode.setAttribute("width",t),this.rawNode.setAttribute("height",e),k&&(this.rawNode.style.width=t,this.rawNode.style.height=e),this):this},getDimensions:function(){var t=this.rawNode?{width:u.normalizedLength(this.rawNode.getAttribute("width")),height:u.normalizedLength(this.rawNode.getAttribute("height"))}:null;return t}}),g.createSurface=function(t,e,r){var i=new g.Surface;i.rawNode=h(g.xmlns.svg,"svg"),i.rawNode.setAttribute("overflow","hidden"),e&&i.rawNode.setAttribute("width",e),r&&i.rawNode.setAttribute("height",r);var o=h(g.xmlns.svg,"defs");return i.rawNode.appendChild(o),i.defNode=o,i._parent=n.byId(t),i._parent.appendChild(i.rawNode),i};var _={_setFont:function(){var t=this.fontStyle;this.rawNode.setAttribute("font-style",t.style),this.rawNode.setAttribute("font-variant",t.variant),this.rawNode.setAttribute("font-weight",t.weight),this.rawNode.setAttribute("font-size",t.size),this.rawNode.setAttribute("font-family",t.family)}},S=c.Container,C={openBatch:function(){this.fragment=m()},closeBatch:function(){this.fragment&&(this.rawNode.appendChild(this.fragment),delete this.fragment)},add:function(t){return this!=t.getParent()&&(this.fragment?this.fragment.appendChild(t.rawNode):this.rawNode.appendChild(t.rawNode),S.add.apply(this,arguments),t.setClip(t.clip)),this},remove:function(t,e){return this==t.getParent()&&(this.rawNode==t.rawNode.parentNode&&this.rawNode.removeChild(t.rawNode),this.fragment&&this.fragment==t.rawNode.parentNode&&this.fragment.removeChild(t.rawNode),t._removeClipNode(),S.remove.apply(this,arguments)),this},clear:function(){for(var t=this.rawNode;t.lastChild;)t.removeChild(t.lastChild);var e=this.defNode;if(e){for(;e.lastChild;)e.removeChild(e.lastChild);t.appendChild(e)}return S.clear.apply(this,arguments)},getBoundingBox:S.getBoundingBox,_moveChildToFront:S._moveChildToFront,_moveChildToBack:S._moveChildToBack},E={createObject:function(t,e){if(!this.rawNode)return null;var r=new t,n=h(g.xmlns.svg,t.nodeType);return r.setRawNode(n),r.setShape(e),this.add(r),r}};if(t.extend(g.Text,_),t.extend(g.TextPath,_),t.extend(g.Group,C),t.extend(g.Group,c.Creator),t.extend(g.Group,E),t.extend(g.Surface,C),t.extend(g.Surface,c.Creator),t.extend(g.Surface,E),g.fixTarget=function(t,e){return t.gfxTarget||(x&&t.target.wholeText?t.gfxTarget=c.byId(t.target.parentElement.__gfxObject__):t.gfxTarget=c.byId(t.target.__gfxObject__)),!0},g.useSvgWeb){g.createSurface=function(t,e,r){var i=new g.Surface;if(!e||!r){var o=a.position(t);e=e||o.w,r=r||o.h}t=n.byId(t);var s=t.id?t.id+"_svgweb":u._base._getUniqueId(),l=h(g.xmlns.svg,"svg");return l.id=s,l.setAttribute("width",e),l.setAttribute("height",r),svgweb.appendChild(l,t),l.addEventListener("SVGLoad",function(){i.rawNode=this,i.isLoaded=!0;var t=h(g.xmlns.svg,"defs");i.rawNode.appendChild(t),i.defNode=t,i.onLoad&&i.onLoad(i)},!1),i.isLoaded=!1,i},g.Surface.extend({destroy:function(){var t=this.rawNode;svgweb.removeChild(t,t.parentNode)}});var T={connect:function(e,r,n){return"on"===e.substring(0,2)&&(e=e.substring(2)),n=2==arguments.length?r:t.hitch(r,n),this.getEventSource().addEventListener(e,n,!1),[this,e,n]},disconnect:function(t){this.getEventSource().removeEventListener(t[1],t[2],!1),delete t[0]}};t.extend(g.Shape,T),t.extend(g.Surface,T)}return g}),define("3pps/dojox/gfx/renderer",["./_base","3pps/dojox/gfx/svg"],function(t,e){return t.renderer="svg",e}),define("3pps/dojo/keys",["./_base/kernel","./sniff"],function(t,e){return t.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:e("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:e("mac")&&!e("air")?e("safari")?91:224:17}}),define("3pps/dojo/mouse",["./_base/kernel","./on","./has","./dom","./_base/window"],function(t,e,r,n,i){function o(t,r){var i=function(i,o){return e(i,t,function(t){return r?r(t,o):n.isDescendant(t.relatedTarget,i)?void 0:o.call(this,t)})};return i.bubble=function(e){return o(t,function(t,r){var n=e(t.target),i=t.relatedTarget;return n&&n!=(i&&1==i.nodeType&&e(i))?r.call(n,t):void 0})},i}r.add("dom-quirks",i.doc&&"BackCompat"==i.doc.compatMode),r.add("events-mouseenter",i.doc&&"onmouseenter"in i.doc.createElement("div")),r.add("events-mousewheel",i.doc&&"onmousewheel"in i.doc);var a;a=r("dom-quirks")&&r("ie")||!r("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(t,e){return t.button&e},isLeft:function(t){return 1&t.button},isMiddle:function(t){return 4&t.button},isRight:function(t){return 2&t.button}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(t,e){return t.button==e},isLeft:function(t){return 0==t.button},isMiddle:function(t){return 1==t.button},isRight:function(t){return 2==t.button}},t.mouseButtons=a;var s;return s=r("events-mousewheel")?"mousewheel":function(t,r){return e(t,"DOMMouseScroll",function(t){t.wheelDelta=-t.detail,r.call(this,t)})},{_eventHandler:o,enter:o("mouseover"),leave:o("mouseout"),wheel:s,isLeft:a.isLeft,isMiddle:a.isMiddle,isRight:a.isRight}}),define("3pps/dojo/dom-geometry",["./sniff","./_base/window","./dom","./dom-style"],function(t,e,r,n){function i(t,e,r,n,i,o){o=o||"px";var a=t.style;isNaN(e)||(a.left=e+o),isNaN(r)||(a.top=r+o),n>=0&&(a.width=n+o),i>=0&&(a.height=i+o)}function o(t){return"button"==t.tagName.toLowerCase()||"input"==t.tagName.toLowerCase()&&"button"==(t.getAttribute("type")||"").toLowerCase()}function a(t){return"border-box"==s.boxModel||"table"==t.tagName.toLowerCase()||o(t)}var s={};s.boxModel="content-box",t("ie")&&(s.boxModel="BackCompat"==document.compatMode?"border-box":"content-box"),s.getPadExtents=function(t,e){t=r.byId(t);var i=e||n.getComputedStyle(t),o=n.toPixelValue,a=o(t,i.paddingLeft),s=o(t,i.paddingTop),l=o(t,i.paddingRight),u=o(t,i.paddingBottom);return{l:a,t:s,r:l,b:u,w:a+l,h:s+u}};var l="none";s.getBorderExtents=function(t,e){t=r.byId(t);var i=n.toPixelValue,o=e||n.getComputedStyle(t),a=o.borderLeftStyle!=l?i(t,o.borderLeftWidth):0,s=o.borderTopStyle!=l?i(t,o.borderTopWidth):0,u=o.borderRightStyle!=l?i(t,o.borderRightWidth):0,c=o.borderBottomStyle!=l?i(t,o.borderBottomWidth):0;return{l:a,t:s,r:u,b:c,w:a+u,h:s+c}},s.getPadBorderExtents=function(t,e){t=r.byId(t);var i=e||n.getComputedStyle(t),o=s.getPadExtents(t,i),a=s.getBorderExtents(t,i);return{l:o.l+a.l,t:o.t+a.t,r:o.r+a.r,b:o.b+a.b,w:o.w+a.w,h:o.h+a.h}},s.getMarginExtents=function(t,e){t=r.byId(t);var i=e||n.getComputedStyle(t),o=n.toPixelValue,a=o(t,i.marginLeft),s=o(t,i.marginTop),l=o(t,i.marginRight),u=o(t,i.marginBottom);return{l:a,t:s,r:l,b:u,w:a+l,h:s+u}},s.getMarginBox=function(e,i){e=r.byId(e);var o,a=i||n.getComputedStyle(e),u=s.getMarginExtents(e,a),c=e.offsetLeft-u.l,d=e.offsetTop-u.t,h=e.parentNode,f=n.toPixelValue;if(t("mozilla")){var p=parseFloat(a.left),m=parseFloat(a.top);isNaN(p)||isNaN(m)?h&&h.style&&(o=n.getComputedStyle(h),"visible"!=o.overflow&&(c+=o.borderLeftStyle!=l?f(e,o.borderLeftWidth):0,d+=o.borderTopStyle!=l?f(e,o.borderTopWidth):0)):(c=p,d=m)}else(t("opera")||8==t("ie")&&!t("quirks"))&&h&&(o=n.getComputedStyle(h),c-=o.borderLeftStyle!=l?f(e,o.borderLeftWidth):0,d-=o.borderTopStyle!=l?f(e,o.borderTopWidth):0);return{l:c,t:d,w:e.offsetWidth+u.w,h:e.offsetHeight+u.h}},s.getContentBox=function(e,i){e=r.byId(e);var o,a=i||n.getComputedStyle(e),l=e.clientWidth,u=s.getPadExtents(e,a),c=s.getBorderExtents(e,a);return l?(o=e.clientHeight,c.w=c.h=0):(l=e.offsetWidth,o=e.offsetHeight),t("opera")&&(u.l+=c.l,u.t+=c.t),{l:u.l,t:u.t,w:l-u.w-c.w,h:o-u.h-c.h}},s.setContentSize=function(t,e,n){t=r.byId(t);var o=e.w,l=e.h;if(a(t)){var u=s.getPadBorderExtents(t,n);o>=0&&(o+=u.w),l>=0&&(l+=u.h)}i(t,NaN,NaN,o,l)};var u={l:0,t:0,w:0,h:0};return s.setMarginBox=function(e,l,c){e=r.byId(e);var d=c||n.getComputedStyle(e),h=l.w,f=l.h,p=a(e)?u:s.getPadBorderExtents(e,d),m=s.getMarginExtents(e,d);if(t("webkit")&&o(e)){var g=e.style;h>=0&&!g.width&&(g.width="4px"),f>=0&&!g.height&&(g.height="4px")}h>=0&&(h=Math.max(h-p.w-m.w,0)),f>=0&&(f=Math.max(f-p.h-m.h,0)),i(e,l.l,l.t,h,f)},s.isBodyLtr=function(t){return t=t||e.doc,"ltr"==(e.body(t).dir||t.documentElement.dir||"ltr").toLowerCase()},s.docScroll=function(r){r=r||e.doc;var n=e.doc.parentWindow||e.doc.defaultView;return"pageXOffset"in n?{x:n.pageXOffset,y:n.pageYOffset}:(n=t("quirks")?e.body(r):r.documentElement)&&{x:s.fixIeBiDiScrollLeft(n.scrollLeft||0,r),y:n.scrollTop||0}},t("ie")&&(s.getIeDocumentElementOffset=function(r){r=r||e.doc;var n=r.documentElement;if(t("ie")<8){var i=n.getBoundingClientRect(),o=i.left,a=i.top;return t("ie")<7&&(o+=n.clientLeft,a+=n.clientTop),{x:0>o?0:o,y:0>a?0:a}}return{x:0,y:0}}),s.fixIeBiDiScrollLeft=function(r,n){n=n||e.doc;var i=t("ie");if(i&&!s.isBodyLtr(n)){var o=t("quirks"),a=o?e.body(n):n.documentElement,l=e.global;return 6==i&&!o&&l.frameElement&&a.scrollHeight>a.clientHeight&&(r+=a.clientLeft),8>i||o?r+a.clientWidth-a.scrollWidth:-r}return r},s.position=function(n,i){n=r.byId(n);var o=e.body(n.ownerDocument),a=n.getBoundingClientRect();if(a={x:a.left,y:a.top,w:a.right-a.left,h:a.bottom-a.top},t("ie")<9){var l=s.getIeDocumentElementOffset(n.ownerDocument);a.x-=l.x+(t("quirks")?o.clientLeft+o.offsetLeft:0),a.y-=l.y+(t("quirks")?o.clientTop+o.offsetTop:0)}if(i){var u=s.docScroll(n.ownerDocument);a.x+=u.x,a.y+=u.y}return a},s.getMarginSize=function(t,e){t=r.byId(t);var i=s.getMarginExtents(t,e||n.getComputedStyle(t)),o=t.getBoundingClientRect();return{w:o.right-o.left+i.w,h:o.bottom-o.top+i.h}},s.normalizeEvent=function(e){if("layerX"in e||(e.layerX=e.offsetX,e.layerY=e.offsetY),!t("dom-addeventlistener")){var r=e.target,n=r&&r.ownerDocument||document,i=t("quirks")?n.body:n.documentElement,o=s.getIeDocumentElementOffset(n);e.pageX=e.clientX+s.fixIeBiDiScrollLeft(i.scrollLeft||0,n)-o.x,e.pageY=e.clientY+(i.scrollTop||0)-o.y}},s}),define("3pps/dojo/_base/event",["./kernel","../on","../has","../dom-geometry"],function(t,e,r,n){if(e._fixEvent){var i=e._fixEvent;e._fixEvent=function(t,e){return t=i(t,e),t&&n.normalizeEvent(t),t}}var o={fix:function(t,r){return e._fixEvent?e._fixEvent(t,r):t},stop:function(t){r("dom-addeventlistener")||t&&t.preventDefault?(t.preventDefault(),t.stopPropagation()):(t=t||window.event,t.cancelBubble=!0,e._preventDefault.call(t))}};return r("extend-dojo")&&(t.fixEvent=o.fix,t.stopEvent=o.stop),o}),define("3pps/dojo/aspect",[],function(){"use strict";function t(t,e,r,i){var o,a=t[e],s="around"==e;if(s){var l=r(function(){return a.advice(this,arguments)});o={remove:function(){o.cancelled=!0},advice:function(t,e){return o.cancelled?a.advice(t,e):l.apply(t,e)}}}else o={remove:function(){var r=o.previous,n=o.next;n||r?(r?r.next=n:t[e]=n,n&&(n.previous=r)):delete t[e]},id:n++,advice:r,receiveArguments:i};if(a&&!s)if("after"==e){for(;a.next&&(a=a.next););a.next=o,o.previous=a}else"before"==e&&(t[e]=o,o.next=a,a.previous=o);else t[e]=o;return o}function e(e){return function(i,o,a,s){var l,u=i[o];u&&u.target==i||(i[o]=l=function(){for(var t=n,e=arguments,i=l.before;i;)e=i.advice.apply(this,e)||e,i=i.next;if(l.around)var o=l.around.advice(this,e);for(var a=l.after;a&&a.id<t;){if(a.receiveArguments){var s=a.advice.apply(this,e);o=s===r?o:s}else o=a.advice.call(this,o,e);a=a.next}return o},u&&(l.around={advice:function(t,e){return u.apply(t,e)}}),l.target=i);var c=t(l||u,e,a,s);return a=null,c}}var r,n=0,i=e("after"),o=e("before"),a=e("around");return{before:o,around:a,after:i}}),define("3pps/dojo/Evented",["./aspect","./on"],function(t,e){"use strict";function r(){}var n=t.after;return r.prototype={on:function(t,r){return e.parse(this,t,r,function(t,e){return n(t,"on"+e,r,!0)})},emit:function(t,r){var n=[this];return n.push.apply(n,arguments),e.emit.apply(e,n)}},r}),define("3pps/dojo/topic",["./Evented"],function(t){var e=new t;return{publish:function(t,r){return e.emit.apply(e,arguments)},subscribe:function(t,r){return e.on.apply(e,arguments)}}}),define("3pps/dojo/_base/connect",["./kernel","../on","../topic","../aspect","./event","../mouse","./sniff","./lang","../keys"],function(t,e,r,n,i,o,a,s){function l(r,i,a,l,u){if(l=s.hitch(a,l),!r||!r.addEventListener&&!r.attachEvent)return n.after(r||t.global,i,l,!0);if("string"==typeof i&&"on"==i.substring(0,2)&&(i=i.substring(2)),r||(r=t.global),!u)switch(i){case"keypress":i=c;break;case"mouseenter":i=o.enter;break;case"mouseleave":i=o.leave}return e(r,i,l,u)}function u(t){t.keyChar=t.charCode?String.fromCharCode(t.charCode):"",t.charOrCode=t.keyChar||t.keyCode}a.add("events-keypress-typed",function(){var t={charCode:0};try{t=document.createEvent("KeyboardEvent"),(t.initKeyboardEvent||t.initKeyEvent).call(t,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(e){}return 0==t.charCode&&!a("opera")});var c,d={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},h=a("mac")?"metaKey":"ctrlKey",f=function(t,e){var r=s.mixin({},t,e);return u(r),r.preventDefault=function(){t.preventDefault()},r.stopPropagation=function(){t.stopPropagation()},r};if(a("events-keypress-typed")){var p=function(t,e){try{return t.keyCode=e}catch(t){return 0}};c=function(t,r){var n=e(t,"keydown",function(t){var e=t.keyCode,n=13!=e&&32!=e&&(27!=e||!a("ie"))&&(48>e||e>90)&&(96>e||e>111)&&(186>e||e>192)&&(219>e||e>222)&&229!=e;if(n||t.ctrlKey){var i=n?0:e;if(t.ctrlKey){if(3==e||13==e)return r.call(t.currentTarget,t);i>95&&106>i?i-=48:!t.shiftKey&&i>=65&&90>=i?i+=32:i=d[i]||i}var o=f(t,{type:"keypress",faux:!0,charCode:i});r.call(t.currentTarget,o),a("ie")&&p(t,o.keyCode)}}),i=e(t,"keypress",function(t){var e=t.charCode;return e=e>=32?e:0,t=f(t,{charCode:e,faux:!0}),r.call(this,t)});return{remove:function(){n.remove(),i.remove()}}}}else c=a("opera")?function(t,r){return e(t,"keypress",function(t){var e=t.which;return 3==e&&(e=99),e=32>e&&!t.shiftKey?0:e,t.ctrlKey&&!t.shiftKey&&e>=65&&90>=e&&(e+=32),r.call(this,f(t,{charCode:e}))})}:function(t,r){return e(t,"keypress",function(t){return u(t),r.call(this,t)})};var m={_keypress:c,connect:function(t,e,r,n,i){var o=arguments,a=[],s=0;a.push("string"==typeof o[0]?null:o[s++],o[s++]);var u=o[s+1];a.push("string"==typeof u||"function"==typeof u?o[s++]:null,o[s++]);for(var c=o.length;c>s;s++)a.push(o[s]);return l.apply(this,a)},disconnect:function(t){t&&t.remove()},subscribe:function(t,e,n){return r.subscribe(t,s.hitch(e,n))},publish:function(t,e){return r.publish.apply(r,[t].concat(e))},connectPublisher:function(t,e,r){var n=function(){m.publish(t,arguments)};return r?m.connect(e,r,n):m.connect(e,n)},isCopyKey:function(t){return t[h]}};return m.unsubscribe=m.disconnect,a("extend-dojo")&&s.mixin(t,m),m}),define("3pps/dojo/dom-style",["./sniff","./dom"],function(t,e){function r(e,r,n){if(r=r.toLowerCase(),t("ie")){if("auto"==n){if("height"==r)return e.offsetHeight;if("width"==r)return e.offsetWidth}if("fontweight"==r)switch(n){case 700:return"bold";case 400:default:return"normal"}}return r in c||(c[r]=d.test(r)),c[r]?o(e,n):n}var n,i={};n=t("webkit")?function(t){var e;if(1==t.nodeType){var r=t.ownerDocument.defaultView;e=r.getComputedStyle(t,null),!e&&t.style&&(t.style.display="",e=r.getComputedStyle(t,null))}return e||{}}:t("ie")&&(t("ie")<9||t("quirks"))?function(t){return 1==t.nodeType&&t.currentStyle?t.currentStyle:{}}:function(t){return 1==t.nodeType?t.ownerDocument.defaultView.getComputedStyle(t,null):{}},i.getComputedStyle=n;var o;o=t("ie")?function(t,e){if(!e)return 0;if("medium"==e)return 4;if(e.slice&&"px"==e.slice(-2))return parseFloat(e);var r=t.style,n=t.runtimeStyle,i=t.currentStyle,o=r.left,a=n.left;n.left=i.left;try{r.left=e,e=r.pixelLeft}catch(s){e=0}return r.left=o,n.left=a,e}:function(t,e){return parseFloat(e)||0},i.toPixelValue=o;var a="DXImageTransform.Microsoft.Alpha",s=function(t,e){try{return t.filters.item(a)}catch(r){return e?{}:null}},l=t("ie")<9||t("ie")<10&&t("quirks")?function(t){try{return s(t).Opacity/100}catch(e){return 1}}:function(t){return n(t).opacity},u=t("ie")<9||t("ie")<10&&t("quirks")?function(t,e){var r=100*e,n=1==e;if(t.style.zoom=n?"":1,s(t))s(t,1).Opacity=r;else{if(n)return e;t.style.filter+=" progid:"+a+"(Opacity="+r+")"}if(s(t,1).Enabled=!n,"tr"==t.tagName.toLowerCase())for(var i=t.firstChild;i;i=i.nextSibling)"td"==i.tagName.toLowerCase()&&u(i,e);return e}:function(t,e){return t.style.opacity=e},c={left:!0,top:!0},d=/margin|padding|width|height|max|min|offset/,h=t("ie")?"styleFloat":"cssFloat",f={cssFloat:h,styleFloat:h,"float":h};return i.get=function(t,n){var o=e.byId(t),a=arguments.length,s="opacity"==n;if(2==a&&s)return l(o);n=f[n]||n;var u=i.getComputedStyle(o);return 1==a?u:r(o,n,u[n]||o.style[n])},i.set=function(t,r,n){var o=e.byId(t),a=arguments.length,s="opacity"==r;if(r=f[r]||r,3==a)return s?u(o,n):o.style[r]=n;for(var l in r)i.set(t,l,r[l]);return i.getComputedStyle(o)},i}),define("3pps/dojo/on",["./has!dom-addeventlistener?:./aspect","./_base/kernel","./has"],function(t,e,r){"use strict";function n(t,e,n,i,o){var a=e.match(/(.*):(.*)/);if(a)return e=a[2],a=a[1],s.selector(a,e).call(o,t,n);if(r("touch")&&(l.test(e)&&(n=_(n)),r("event-orientationchange")||"orientationchange"!=e||(e="resize",t=window,n=_(n))),f&&(n=f(n)),t.addEventListener){var u=e in d,c=u?d[e]:e;return t.addEventListener(c,n,u),{remove:function(){t.removeEventListener(c,n,u)}}}if(e="on"+e,y&&t.attachEvent)return y(t,e,n);throw new Error("Target must be an event emitter")}function i(){this.cancelable=!1}function o(){this.bubbles=!1}if(r("dom")){var a=window.ScriptEngineMajorVersion;r.add("jscript",a&&a()+ScriptEngineMinorVersion()/10),r.add("event-orientationchange",r("touch")&&!r("android")),r.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation)}var s=function(t,e,r,i){return"function"==typeof t.on&&"function"!=typeof e?t.on(e,r):s.parse(t,e,r,n,i,this)};s.pausable=function(t,e,r,n){var i,o=s(t,e,function(){return i?void 0:r.apply(this,arguments)},n);return o.pause=function(){i=!0},o.resume=function(){i=!1},o},s.once=function(t,e,r,n){var i=s(t,e,function(){return i.remove(),r.apply(this,arguments)});return i},s.parse=function(t,e,r,n,i,o){if(e.call)return e.call(o,t,r);if(e.indexOf(",")>-1){for(var a,s=e.split(/\s*,\s*/),l=[],u=0;a=s[u++];)l.push(n(t,a,r,i,o));return l.remove=function(){for(var t=0;t<l.length;t++)l[t].remove()},l}return n(t,e,r,i,o)};var l=/^touch/;s.selector=function(t,r,n){return function(i,o){function a(r){for(l=l&&l.matches?l:e.query;!l.matches(r,t,i);)if(r==i||n===!1||!(r=r.parentNode)||1!=r.nodeType)return;return r}var l="function"==typeof t?{matches:t}:this,u=r.bubble;return u?s(i,u(a),o):s(i,r,function(t){var e=a(t.target);return e&&o.call(e,t)})}};var u=[].slice,c=s.emit=function(t,e,r){var n=u.call(arguments,2),a="on"+e;if("parentNode"in t){var s=n[0]={};for(var l in r)s[l]=r[l];s.preventDefault=i,s.stopPropagation=o,s.target=t,s.type=e,r=s}do t[a]&&t[a].apply(t,n);while(r&&r.bubbles&&(t=t.parentNode));return r&&r.cancelable&&r},d={};if(!r("event-stopimmediatepropagation"))var h=function(){this.immediatelyStopped=!0,this.modified=!0},f=function(t){return function(e){return e.immediatelyStopped?void 0:(e.stopImmediatePropagation=h,t.apply(this,arguments))}};if(r("dom-addeventlistener"))d={focusin:"focus",focusout:"blur"},s.emit=function(t,e,r){if(t.dispatchEvent&&document.createEvent){var n=t.ownerDocument.createEvent("HTMLEvents");n.initEvent(e,!!r.bubbles,!!r.cancelable);for(var i in r){r[i];i in n||(n[i]=r[i])}return t.dispatchEvent(n)&&n}return c.apply(s,arguments)};else{s._fixEvent=function(t,e){if(!t){var r=e&&(e.ownerDocument||e.document||e).parentWindow||window;t=r.event}if(!t)return t;if(p&&t.type==p.type&&(t=p),!t.target)switch(t.target=t.srcElement,t.currentTarget=e||t.srcElement,"mouseover"==t.type&&(t.relatedTarget=t.fromElement),"mouseout"==t.type&&(t.relatedTarget=t.toElement),t.stopPropagation||(t.stopPropagation=v,t.preventDefault=b),t.type){case"keypress":var n="charCode"in t?t.charCode:t.keyCode;10==n?(n=0,t.keyCode=13):13==n||27==n?n=0:3==n&&(n=99),t.charCode=n,x(t)}return t};var p,m=function(t){this.handle=t};m.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var g=function(t){return function(e){e=s._fixEvent(e,this);var r=t.call(this,e);return e.modified&&(p||setTimeout(function(){p=null}),p=e),r}},y=function(e,n,i){if(i=g(i),((e.ownerDocument?e.ownerDocument.parentWindow:e.parentWindow||e.window||window)!=top||r("jscript")<5.8)&&!r("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var o=e[n];if(!o||!o.listeners){var a=o;o=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}"),o.listeners=[],e[n]=o,o.global=this,a&&o.listeners.push(_dojoIEListeners_.push(a)-1)}var s;return o.listeners.push(s=o.global._dojoIEListeners_.push(i)-1),new m(s)}return t.after(e,n,i,!0)},x=function(t){t.keyChar=t.charCode?String.fromCharCode(t.charCode):"",t.charOrCode=t.keyChar||t.keyCode},v=function(){this.cancelBubble=!0},b=s._preventDefault=function(){if(this.bubbledKeyCode=this.keyCode,this.ctrlKey)try{this.keyCode=0}catch(t){}this.defaultPrevented=!0,this.returnValue=!1}}if(r("touch"))var w=function(){},k=window.orientation,_=function(t){return function(e){var r=e.corrected;if(!r){var n=e.type;try{delete e.type}catch(i){}if(e.type){w.prototype=e;var r=new w;r.preventDefault=function(){e.preventDefault()},r.stopPropagation=function(){e.stopPropagation()}}else r=e,r.type=n;if(e.corrected=r,"resize"==n)return k==window.orientation?null:(k=window.orientation,r.type="orientationchange",t.call(this,r));"rotation"in r||(r.rotation=0,r.scale=1);var o=r.changedTouches[0];for(var a in o)delete r[a],r[a]=o[a]}return t.call(this,r)}};return s}),define("3pps/dojo/dom-construct",["./_base/kernel","./sniff","./_base/window","./dom","./on","./dom-style","./_base/lang","./_base/connect"],function(t,e,r,n,i,o,a,s){function l(t,e){var r=e.parentNode;r&&r.insertBefore(t,e)}function u(t,e){var r=e.parentNode;r&&(r.lastChild==e?r.appendChild(t):r.insertBefore(t,e.nextSibling))}function c(t,e){t.firstChild&&C(t),e&&e.removeChild(t)}var d={},h={};h.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"};var f={innerHTML:1,className:1,htmlFor:e("ie"),value:1},p={},m=0,g=t._scopeName+"attrid";h.set=function(t,r,i){t=n.byId(t);var l=arguments.length;if(2==l&&"string"!=typeof r){for(var u in r)h.set(t,u,r[u]);return t}var c=r.toLowerCase(),d=h.names[c]||r;if("style"==d&&"string"!=typeof i)return o.set(t,i),t;if("innerHTML"==d)return e("ie")&&t.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(y.empty(t),t.appendChild(y.toDom(i,t.ownerDocument))):t[d]=i,t;if(a.isFunction(i)){var f=t[g];f||(f=m++,t[g]=f),p[f]||(p[f]={});var x=p[f][d];if(x)s.disconnect(x);else try{delete t[d]}catch(v){}return i?p[f][d]=s.connect(t,d,i):t[d]=null,t}return t[d]=i,t},d.set=set=function(t,e,r){if(t=n.byId(t),2==arguments.length){for(var i in e)d.set(t,i,e[i]);return t}var s=e.toLowerCase(),l=h.names[s]||e,u=f[l];return"style"==l&&"string"!=typeof r?(o.set(t,r),t):u||"boolean"==typeof r||a.isFunction(r)?h.set(t,e,r):(t.setAttribute(attrNames[s]||e,r),t)};var y={},x={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},v=/<\s*([\w\:]+)/,b={},w=0,k="__"+t._scopeName+"ToDomId";for(var _ in x)if(x.hasOwnProperty(_)){var S=x[_];S.pre="option"==_?'<select multiple="multiple">':"<"+S.join("><")+">",S.post="</"+S.reverse().join("></")+">"}y.toDom=function(t,e){e=e||r.doc;var n=e[k];n||(e[k]=n=++w+"",b[n]=e.createElement("div")),t+="";var i,o,a,s,l=t.match(v),u=l?l[1].toLowerCase():"",c=b[n];if(l&&x[u])for(i=x[u],c.innerHTML=i.pre+t+i.post,o=i.length;o;--o)c=c.firstChild;else c.innerHTML=t;if(1==c.childNodes.length)return c.removeChild(c.firstChild);for(s=e.createDocumentFragment();a=c.firstChild;)s.appendChild(a);return s},y.place=function(t,e,r){if(e=n.byId(e),"string"==typeof t&&(t=/^\s*</.test(t)?y.toDom(t,e.ownerDocument):n.byId(t)),"number"==typeof r){var i=e.childNodes;!i.length||i.length<=r?e.appendChild(t):l(t,i[0>r?0:r])}else switch(r){case"before":l(t,e);break;case"after":u(t,e);break;case"replace":e.parentNode.replaceChild(t,e);break;case"only":y.empty(e),e.appendChild(t);break;case"first":if(e.firstChild){l(t,e.firstChild);
break}default:e.appendChild(t)}return t},y.create=function(t,e,i,o){var a=r.doc;return i&&(i=n.byId(i),a=i.ownerDocument),"string"==typeof t&&(t=a.createElement(t)),e&&d.set(t,e),i&&y.place(t,i,o),t};var C=e("ie")?function(t){try{t.innerHTML=""}catch(e){for(var r;r=t.lastChild;)c(r,t)}}:function(t){t.innerHTML=""};return y.empty=function(t){C(n.byId(t))},y.destroy=function(t){t=n.byId(t),t&&c(t,t.parentNode)},y}),define("3pps/dojo/dom",["./sniff","./_base/window"],function(t,e){if(t("ie")<=7)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(r){}var n={};t("ie")?n.byId=function(t,r){if("string"!=typeof t)return t;var n=r||e.doc,i=t&&n.getElementById(t);if(i&&(i.attributes.id.value==t||i.id==t))return i;var o=n.all[t];(!o||o.nodeName)&&(o=[o]);for(var a=0;i=o[a++];)if(i.attributes&&i.attributes.id&&i.attributes.id.value==t||i.id==t)return i}:n.byId=function(t,r){return("string"==typeof t?(r||e.doc).getElementById(t):t)||null},n.isDescendant=function(t,e){try{for(t=n.byId(t),e=n.byId(e);t;){if(t==e)return!0;t=t.parentNode}}catch(r){}return!1},t.add("css-user-select",function(t,e,r){if(!r)return!1;var n=r.style,i=["Khtml","O","ms","Moz","Webkit"],o=i.length,a="userSelect";do if("undefined"!=typeof n[a])return a;while(o--&&(a=i[o]+"UserSelect"));return!1});var i=t("css-user-select");return n.setSelectable=i?function(t,e){n.byId(t).style[i]=e?"":"none"}:function(t,e){t=n.byId(t);var r=t.getElementsByTagName("*"),i=r.length;if(e)for(t.removeAttribute("unselectable");i--;)r[i].removeAttribute("unselectable");else for(t.setAttribute("unselectable","on");i--;)r[i].setAttribute("unselectable","on")},n}),define("3pps/dojo/_base/window",["./kernel","./lang","../sniff"],function(t,e,r){var n={global:t.global,doc:this.document||null,body:function(e){return e=e||t.doc,e.body||e.getElementsByTagName("body")[0]},setContext:function(e,r){t.global=n.global=e,t.doc=n.doc=r},withGlobal:function(e,r,i,o){var a=t.global;try{return t.global=n.global=e,n.withDoc.call(null,e.document,r,i,o)}finally{t.global=n.global=a}},withDoc:function(e,i,o,a){var s,l,u,c=n.doc,d=r("quirks"),h=r("ie");try{return t.doc=n.doc=e,t.isQuirks=r.add("quirks","BackCompat"==t.doc.compatMode,!0,!0),r("ie")&&(u=e.parentWindow)&&u.navigator&&(s=parseFloat(u.navigator.appVersion.split("MSIE ")[1])||void 0,l=e.documentMode,l&&5!=l&&Math.floor(s)!=l&&(s=l),t.isIE=r.add("ie",s,!0,!0)),o&&"string"==typeof i&&(i=o[i]),i.apply(o,a||[])}finally{t.doc=n.doc=c,t.isQuirks=r.add("quirks",d,!0,!0),t.isIE=r.add("ie",h,!0,!0)}}};return r("extend-dojo")&&e.mixin(t,n),n}),define("3pps/dojo/_base/sniff",["./kernel","./lang","../sniff"],function(t,e,r){return r("host-browser")?(t._name="browser",e.mixin(t,{isBrowser:!0,isFF:r("ff"),isIE:r("ie"),isKhtml:r("khtml"),isWebKit:r("webkit"),isMozilla:r("mozilla"),isMoz:r("mozilla"),isOpera:r("opera"),isSafari:r("safari"),isChrome:r("chrome"),isMac:r("mac"),isIos:r("ios"),isAndroid:r("android"),isWii:r("wii"),isQuirks:r("quirks"),isAir:r("air")}),t.locale=t.locale||(r("ie")?navigator.userLanguage:navigator.language).toLowerCase(),r):r}),define("3pps/dojo/_base/array",["./kernel","../has","./lang"],function(t,e,r){function n(t){return s[t]=new Function("item","index","array",t)}function i(t){var e=!t;return function(r,i,o){var a,l=0,u=r&&r.length||0;if(u&&"string"==typeof r&&(r=r.split("")),"string"==typeof i&&(i=s[i]||n(i)),o){for(;u>l;++l)if(a=!i.call(o,r[l],l,r),t^a)return!a}else for(;u>l;++l)if(a=!i(r[l],l,r),t^a)return!a;return e}}function o(t){var e=1,r=0,n=0;return t||(e=r=n=-1),function(i,o,s,u){if(u&&e>0)return l.lastIndexOf(i,o,s);var c,d=i&&i.length||0,h=t?d+n:r;for(s===a?c=t?r:d+n:0>s?(c=d+s,0>c&&(c=r)):c=s>=d?d+n:s,d&&"string"==typeof i&&(i=i.split(""));c!=h;c+=e)if(i[c]==o)return c;return-1}}var a,s={},l={every:i(!1),some:i(!0),indexOf:o(!0),lastIndexOf:o(!1),forEach:function(t,e,r){var i=0,o=t&&t.length||0;if(o&&"string"==typeof t&&(t=t.split("")),"string"==typeof e&&(e=s[e]||n(e)),r)for(;o>i;++i)e.call(r,t[i],i,t);else for(;o>i;++i)e(t[i],i,t)},map:function(t,e,r,i){var o=0,a=t&&t.length||0,l=new(i||Array)(a);if(a&&"string"==typeof t&&(t=t.split("")),"string"==typeof e&&(e=s[e]||n(e)),r)for(;a>o;++o)l[o]=e.call(r,t[o],o,t);else for(;a>o;++o)l[o]=e(t[o],o,t);return l},filter:function(t,e,r){var i,o=0,a=t&&t.length||0,l=[];if(a&&"string"==typeof t&&(t=t.split("")),"string"==typeof e&&(e=s[e]||n(e)),r)for(;a>o;++o)i=t[o],e.call(r,i,o,t)&&l.push(i);else for(;a>o;++o)i=t[o],e(i,o,t)&&l.push(i);return l},clearCache:function(){s={}}};return e("extend-dojo")&&r.mixin(t,l),l}),define("3pps/dojo/_base/Color",["./kernel","./lang","./array","./config"],function(t,e,r,n){var i=t.Color=function(t){t&&this.setColor(t)};return i.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:n.transparentColor||[0,0,0,0]},e.extend(i,{r:255,g:255,b:255,a:1,_set:function(t,e,r,n){var i=this;i.r=t,i.g=e,i.b=r,i.a=n},setColor:function(t){return e.isString(t)?i.fromString(t,this):e.isArray(t)?i.fromArray(t,this):(this._set(t.r,t.g,t.b,t.a),t instanceof i||this.sanitize()),this},sanitize:function(){return this},toRgb:function(){var t=this;return[t.r,t.g,t.b]},toRgba:function(){var t=this;return[t.r,t.g,t.b,t.a]},toHex:function(){var t=r.map(["r","g","b"],function(t){var e=this[t].toString(16);return e.length<2?"0"+e:e},this);return"#"+t.join("")},toCss:function(t){var e=this,r=e.r+", "+e.g+", "+e.b;return(t?"rgba("+r+", "+e.a:"rgb("+r)+")"},toString:function(){return this.toCss(!0)}}),i.blendColors=t.blendColors=function(t,e,n,o){var a=o||new i;return r.forEach(["r","g","b","a"],function(r){a[r]=t[r]+(e[r]-t[r])*n,"a"!=r&&(a[r]=Math.round(a[r]))}),a.sanitize()},i.fromRgb=t.colorFromRgb=function(t,e){var r=t.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return r&&i.fromArray(r[1].split(/\s*,\s*/),e)},i.fromHex=t.colorFromHex=function(t,e){var n=e||new i,o=4==t.length?4:8,a=(1<<o)-1;return t=Number("0x"+t.substr(1)),isNaN(t)?null:(r.forEach(["b","g","r"],function(e){var r=t&a;t>>=o,n[e]=4==o?17*r:r}),n.a=1,n)},i.fromArray=t.colorFromArray=function(t,e){var r=e||new i;return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r.sanitize()},i.fromString=t.colorFromString=function(t,e){var r=i.named[t];return r&&i.fromArray(r,e)||i.fromRgb(t,e)||i.fromHex(t,e)},i}),define("3pps/dojox/gfx/_base",["../../dojo/_base/kernel","../../dojo/_base/lang","../../dojo/_base/Color","../../dojo/_base/sniff","../../dojo/_base/window","../../dojo/_base/array","../../dojo/dom","../../dojo/dom-construct","../../dojo/dom-geometry"],function(t,e,r,n,i,o,a,s,l){var u=e.getObject("dojox.gfx",!0),c=u._base={};u._hasClass=function(t,e){var r=t.getAttribute("className");return r&&(" "+r+" ").indexOf(" "+e+" ")>=0},u._addClass=function(t,e){var r=t.getAttribute("className")||"";(!r||(" "+r+" ").indexOf(" "+e+" ")<0)&&t.setAttribute("className",r+(r?" ":"")+e)},u._removeClass=function(t,e){var r=t.getAttribute("className");r&&t.setAttribute("className",r.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)"),"$1$2"))},c._getFontMeasurements=function(){var t,e={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};n("ie")&&(i.doc.documentElement.style.fontSize="100%");var r=s.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},i.body());for(t in e)r.style.fontSize=t,e[t]=16*Math.round(12*r.offsetHeight/16)/12/1e3;return i.body().removeChild(r),e};var d=null;c._getCachedFontMeasurements=function(t){return(t||!d)&&(d=c._getFontMeasurements()),d};var h=null,f={};c._getTextBox=function(t,e,r){var n,o,a,u=arguments.length;if(h||(h=s.create("div",{style:{position:"absolute",top:"-10000px",left:"0"}},i.body())),n=h,n.className="",o=n.style,o.borderWidth="0",o.margin="0",o.padding="0",o.outline="0",u>1&&e)for(a in e)a in f||(o[a]=e[a]);if(u>2&&r&&(n.className=r),n.innerHTML=t,n.getBoundingClientRect){var c=n.getBoundingClientRect();return{l:c.left,t:c.top,w:c.width||c.right-c.left,h:c.height||c.bottom-c.top}}return l.getMarginBox(n)};var p=0;return c._getUniqueId=function(){var e;do e=t._scopeName+"xUnique"+ ++p;while(a.byId(e));return e},e.mixin(u,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var t={};return function(e){var r=t[e];return r?new r:(r=t[e]=new Function,r.prototype=u["default"+e],new r)}}(),normalizeColor:function(t){return t instanceof r?t:new r(t)},normalizeParameters:function(t,e){var r;if(e){var n={};for(r in t)r in e&&!(r in n)&&(t[r]=e[r])}return t},makeParameters:function(t,r){var n=null;if(!r)return e.delegate(t);var i={};for(n in t)n in i||(i[n]=e.clone(n in r?r[n]:t[n]));return i},formatNumber:function(t,e){var r=t.toString();if(r.indexOf("e")>=0)r=t.toFixed(4);else{var n=r.indexOf(".");n>=0&&r.length-n>5&&(r=t.toFixed(4))}return 0>t?r:e?" "+r:r},makeFontString:function(t){return t.style+" "+t.variant+" "+t.weight+" "+t.size+" "+t.family},splitFontString:function(t){var e=u.getDefault("Font"),r=t.split(/\s+/);do{if(r.length<5)break;e.style=r[0],e.variant=r[1],e.weight=r[2];var n=r[3].indexOf("/");e.size=0>n?r[3]:r[3].substring(0,n);var i=4;0>n&&("/"==r[4]?i=6:"/"==r[4].charAt(0)&&(i=5)),i<r.length&&(e.family=r.slice(i).join(" "))}while(!1);return e},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return u._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(t){return t*u.px_in_pt()},px2pt:function(t){return t/u.px_in_pt()},normalizedLength:function(t){if(0===t.length)return 0;if(t.length>2){var e=u.px_in_pt(),r=parseFloat(t);switch(t.slice(-2)){case"px":return r;case"pt":return r*e;case"in":return 72*r*e;case"pc":return 12*r*e;case"mm":return r*u.mm_in_pt*e;case"cm":return r*u.cm_in_pt*e}}return parseFloat(t)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(t,e){return t&&e&&t===e},switchTo:function(t){var e="string"==typeof t?u[t]:t;e&&o.forEach(["Group","Rect","Ellipse","Circle","Line","Polyline","Image","Text","Path","TextPath","Surface","createSurface","fixTarget"],function(t){u[t]=e[t]})}}),u}),define("3pps/dojo/sniff",["./has"],function(t){if(t("host-browser")){var e=navigator,r=e.userAgent,n=e.appVersion,i=parseFloat(n);if(t.add("air",r.indexOf("AdobeAIR")>=0),t.add("khtml",n.indexOf("Konqueror")>=0?i:void 0),t.add("webkit",parseFloat(r.split("WebKit/")[1])||void 0),t.add("chrome",parseFloat(r.split("Chrome/")[1])||void 0),t.add("safari",n.indexOf("Safari")>=0&&!t("chrome")?parseFloat(n.split("Version/")[1]):void 0),t.add("mac",n.indexOf("Macintosh")>=0),t.add("quirks","BackCompat"==document.compatMode),t.add("ios",/iPhone|iPod|iPad/.test(r)),t.add("android",parseFloat(r.split("Android ")[1])||void 0),!t("webkit")){if(r.indexOf("Opera")>=0&&t.add("opera",i>=9.8?parseFloat(r.split("Version/")[1])||i:i),r.indexOf("Gecko")>=0&&!t("khtml")&&!t("webkit")&&t.add("mozilla",i),t("mozilla")&&t.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0),document.all&&!t("opera")){var o=parseFloat(n.split("MSIE ")[1])||void 0,a=document.documentMode;a&&5!=a&&Math.floor(o)!=a&&(o=a),t.add("ie",o)}t.add("wii","undefined"!=typeof opera&&opera.wiiremote)}}return t}),define("3pps/dojo/_base/config",["../has","require"],function(t,e){var r={};if(t("dojo-config-api")){var n,i=e.rawConfig;for(n in i)r[n]=i[n]}else{var o=function(e,r,i){for(n in e)"has"!=n&&t.add(r+n,e[n],0,i)};r=t("dojo-loader")?e.rawConfig:this.dojoConfig||this.djConfig||{},o(r,"config",1),o(r.has,"",1)}return r}),define("3pps/dojo/has",["require","module"],function(t,e){var r=t.has||function(){};if(!r("dojo-has-api")){var n="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location==location&&window.document==document,i=this,o=n&&document,a=o&&o.createElement("DiV"),s=e.config&&e.config()||{};r=function(t){return"function"==typeof s[t]?s[t]=s[t](i,o,a):s[t]},r.cache=s,r.add=function(t,e,n,i){return("undefined"==typeof s[t]||i)&&(s[t]=e),n&&r(t)},r.add("host-browser",n),r.add("dom",n),r.add("dojo-dom-ready-api",1),r.add("dojo-sniff",1)}if(r("host-browser")){r.add("dom-addeventlistener",!!document.addEventListener),r.add("touch","ontouchstart"in document),r.add("device-width",screen.availWidth||innerWidth);var l=document.createElement("form");r.add("dom-attributes-explicit",0==l.attributes.length),r.add("dom-attributes-specified-flag",l.attributes.length>0&&l.attributes.length<40)}return r.clearElement=function(t){return t.innerHTML="",t},r.normalize=function(t,e){var n=t.match(/[\?:]|[^:\?]*/g),i=0,o=function(t){var e=n[i++];return":"==e?0:"?"==n[i++]?!t&&r(e)?o():(o(!0),o(t)):e||0};return t=o(),t&&e(t)},r.load=function(t,e,r){t?e([t],r):r()},r}),define("3pps/dojo/_base/kernel",["../has","./config","require","module"],function(t,e,r,n){var i,o,a,s={},l={},u={config:e,global:window,dijit:s,dojox:l},c={dojo:["dojo",u],dijit:["dijit",s],dojox:["dojox",l]},d=r.map&&r.map[n.id.match(/[^\/]+/)[0]];for(o in d)c[o]?c[o][0]=d[o]:c[o]=[d[o],{}];for(o in c)a=c[o],a[1]._scopeName=a[0],e.noGlobals||(this[a[0]]=a[1]);u.scopeMap=c,u.baseUrl=u.config.baseUrl=r.baseUrl,u.isAsync=!t("dojo-loader")||r.async,u.locale=e.locale;var h="$Rev: 30226 $".match(/\d+/);if(u.version={major:1,minor:8,patch:3,flag:"",revision:h?+h[0]:NaN,toString:function(){var t=u.version;return t.major+"."+t.minor+"."+t.patch+t.flag+" ("+t.revision+")"}},t.add("extend-dojo",1),Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(u),t("host-rhino")?u.exit=function(t){quit(t)}:u.exit=function(){},t.add("dojo-guarantee-console",1),t("dojo-guarantee-console")){"undefined"!=typeof console||(console={});var f,p=["assert","count","debug","dir","dirxml","error","group","groupEnd","info","profile","profileEnd","time","timeEnd","trace","warn","log"];for(i=0;f=p[i++];)console[f]||!function(){var t=f+"";console[t]="log"in console?function(){var e=Array.apply({},arguments);e.unshift(t+":"),console.log(e.join(" "))}:function(){},console[t]._fake=!0}()}if(t.add("dojo-debug-messages",!!e.isDebug),u.deprecated=u.experimental=function(){},t("dojo-debug-messages")&&(u.deprecated=function(t,e,r){var n="DEPRECATED: "+t;e&&(n+=" "+e),r&&(n+=" -- will be removed in version: "+r),console.warn(n)},u.experimental=function(t,e){var r="EXPERIMENTAL: "+t+" -- APIs subject to change without notice.";e&&(r+=" "+e),console.warn(r)}),t.add("dojo-modulePaths",1),t("dojo-modulePaths")&&e.modulePaths){u.deprecated("dojo.modulePaths","use paths configuration");var m={};for(o in e.modulePaths)m[o.replace(/\./g,"/")]=e.modulePaths[o];r({paths:m})}return t.add("dojo-moduleUrl",1),t("dojo-moduleUrl")&&(u.moduleUrl=function(t,e){u.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var n=null;return t&&(n=r.toUrl(t.replace(/\./g,"/")+(e?"/"+e:"")+"/*.*").replace(/\/\*\.\*/,"")+(e?"":"/")),n}),u._hasResource={},u}),define("3pps/dojo/_base/lang",["./kernel","../has","../sniff"],function(t,e){e.add("bug-for-in-skips-shadowed",function(){for(var t in{toString:1})return 0;return 1});var r=e("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):[],n=r.length,i=function(e,r,n){var i,o=0,a=t.global;if(!n){if(!e.length)return a;i=e[o++];try{n=t.scopeMap[i]&&t.scopeMap[i][1]}catch(s){}n=n||(i in a?a[i]:r?a[i]={}:void 0)}for(;n&&(i=e[o++]);)n=i in n?n[i]:r?n[i]={}:void 0;return n},o=Object.prototype.toString,a=function(t,e,r){return(r||[]).concat(Array.prototype.slice.call(t,e||0))},s=/\{([^\}]+)\}/g,l={_extraNames:r,_mixin:function(t,i,o){var a,s,l,u={};for(a in i)s=i[a],a in t&&(t[a]===s||a in u&&u[a]===s)||(t[a]=o?o(s):s);if(e("bug-for-in-skips-shadowed")&&i)for(l=0;n>l;++l)a=r[l],s=i[a],a in t&&(t[a]===s||a in u&&u[a]===s)||(t[a]=o?o(s):s);return t},mixin:function(t,e){t||(t={});for(var r=1,n=arguments.length;n>r;r++)l._mixin(t,arguments[r]);return t},setObject:function(t,e,r){var n=t.split("."),o=n.pop(),a=i(n,!0,r);return a&&o?a[o]=e:void 0},getObject:function(t,e,r){return i(t.split("."),e,r)},exists:function(t,e){return void 0!==l.getObject(t,!1,e)},isString:function(t){return"string"==typeof t||t instanceof String},isArray:function(t){return t&&(t instanceof Array||"array"==typeof t)},isFunction:function(t){return"[object Function]"===o.call(t)},isObject:function(t){return void 0!==t&&(null===t||"object"==typeof t||l.isArray(t)||l.isFunction(t))},isArrayLike:function(t){return!(!t||void 0===t||l.isString(t)||l.isFunction(t)||t.tagName&&"form"==t.tagName.toLowerCase()||!l.isArray(t)&&!isFinite(t.length))},isAlien:function(t){return t&&!l.isFunction(t)&&/\{\s*\[native code\]\s*\}/.test(String(t))},extend:function(t,e){for(var r=1,n=arguments.length;n>r;r++)l._mixin(t.prototype,arguments[r]);return t},_hitchArgs:function(e,r){var n=l._toArray(arguments,2),i=l.isString(r);return function(){var o=l._toArray(arguments),a=i?(e||t.global)[r]:r;return a&&a.apply(e||this,n.concat(o))}},hitch:function(e,r){if(arguments.length>2)return l._hitchArgs.apply(t,arguments);if(r||(r=e,e=null),l.isString(r)){if(e=e||t.global,!e[r])throw['lang.hitch: scope["',r,'"] is null (scope="',e,'")'].join("");return function(){return e[r].apply(e,arguments||[])}}return e?function(){return r.apply(e,arguments||[])}:r},delegate:function(){function t(){}return function(e,r){t.prototype=e;var n=new t;return t.prototype=null,r&&l._mixin(n,r),n}}(),_toArray:e("ie")?function(){function t(t,e,r){for(var n=r||[],i=e||0;i<t.length;i++)n.push(t[i]);return n}return function(e){return(e.item?t:a).apply(this,arguments)}}():a,partial:function(e){var r=[null];return l.hitch.apply(t,r.concat(l._toArray(arguments)))},clone:function(t){if(!t||"object"!=typeof t||l.isFunction(t))return t;if(t.nodeType&&"cloneNode"in t)return t.cloneNode(!0);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);var e,r,n;if(l.isArray(t))for(e=[],r=0,n=t.length;n>r;++r)r in t&&e.push(l.clone(t[r]));else e=t.constructor?new t.constructor:{};return l._mixin(e,t,l.clone)},trim:String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(t,e,r){return t.replace(r||s,l.isFunction(e)?e:function(t,r){return l.getObject(r,!1,e)})}};return e("extend-dojo")&&l.mixin(t,l),l}),define("3pps/dojox/gfx",["../dojo/_base/lang","./gfx/_base","./gfx/renderer"],function(t,e,r){return e.switchTo(r),e}),define("3pps/bpmn/Renderer",["3pps/dojox/gfx","jscore/base/jquery","3pps/dojo/_base/kernel"],function(t,e,r){function n(t){if(!t)throw new ut("Base element cannot be null");this.baseElement=t}function i(t,r){r.moveToFront();var n=e("#"+t.id);n.appendTo(n.parent())}function o(t,e){for(var r=[],n=0,i=t.length;i>n;n+=e)r.push(t.substring(n,n+e));return r}function a(t,e,r){for(var n=[],i=1,a=!1;0==a;i++){var s=t.length/i,l=e(t.substring(0,s));l.getTextWidth()<=r&&(n=o(t,s),a=!0),l.getParent().remove(l)}return n}function s(t,e,r,n,i,o){return function(a,s,l){var u=r(a),c=i?e-(l>1?l*n*.25:0)+s*n:e+s*n;o?o(u,c,s,l):u.setTransform({dx:t,dy:c})}}function l(t,e,r,n){for(var i=0,o=0;o<t.length;o++,i++){var s=t[o];/^[\n\r]+$/.test(s)&&(s="");var l=e(s);if(l.getTextWidth()>n){for(var u=a(s,e,n),c=0;c<u.length;c++)r(u[c],c+i,u.length);i+=u.length-1}else r(s,i,t.length);l.getParent().remove(l)}return i}function u(t,e){for(var r=[],i="",o="",a=0;a<t.length;a++)if(0!=t[a].length){i=o+" "+t[a];var s=a==t.length-1,l=e(i);l.getTextWidth()>n.wordWrapMaxWidth?(0!=o.length&&r.push(o.trim()),o=t[a],s&&(r=r.concat(t[a].split(" ")))):s?r.push(i.trim()):o=i,l.getParent().remove(l)}return r}function c(t,e,r,i,o,a,c){var d=r.size?r.size:10,h="right",f="<w>",p=q(e,r,a,h),m=s(i,o,p,d,c);if(t&&0!=t.length){var t=t.replace(/&#xD;/g,f).replace(/&#xA;/g,f).replace(/&#10;/g,f).replace(/\n/g,f).trim(),g=[],y=-1!=t.indexOf(f),x=t.split(" ");return g=1==x.length?x[0].split(f):y?t.split(f):u(x,p),l(g,p,m,n.wordWrapMaxWidth)}}function d(t,e,r,i,o){var a=t.renderElement;if(a.name){var s={family:U["font-family"],size:U["font-size"],weight:"normal"},l=t.getLabelBounds(),u=l?{x:+l.x+n.labelPadding,y:+l.y+n.labelPadding}:{x:+r.x,y:+r.y},d=u.x,h=u.y,f=c(a.name,e,s,+d,+h,l?null:i,o);return{group:e,lineCount:f}}}function h(t){var e=0,r=0,n=0;for(var i in t){var o=t[i],a=1;t.length>2&&1==i&&(a=12),e+=+o.x*a,r+=+o.y*a,n+=a}return{x:e/n,y:r/n}}function f(e){var r=e.from,n=e.to,i=e.group,o=e.open,a={x:n.x-r.x,y:n.y-r.y},s=8,l=4,u="M"+(n.x-s)+" "+(n.y+l)+" L "+n.x+" "+n.y+" L"+(n.x-s)+" "+(n.y-l);o||(u+=" Z");var c=i.createGroup(),d=c.createPath(u),h=Math.atan2(-a.y,a.x);return d.setTransform([t.matrix.rotateAt(-h,n)]),d}function p(t,e){var r=4,n=e.createGroup(),i=n.createCircle({cx:t.x,cy:t.y,r:r});return i}function m(t){for(var e in t){var r=t[e];if(/bounds/i.test(r.type))return r}return null}function g(){}var y=e.extend,x=r.dojox,v={messagecatch:"m 0.7,0.18618099 8,5.99999991 8,-5.99999991 z m 0,0.99999991 0,10.0000021 16,0 0,-10.0000021 -8,6 z",messagethrow:"m 0.7,0.18618099 8,5.99999991 8,-5.99999991 z m 0,0.99999991 0,10.0000021 16,0 0,-10.0000021 -8,6 z",timerEventDefinition:"m 5.7098215,0.07589285 c -5.99031189,0 -10.84375,4.85343775 -10.84375,10.84375015 0,5.990311 4.85343811,10.875 10.84375,10.875 5.9903115,0 10.8749995,-4.884689 10.8749995,-10.875 0,-5.9903125 -4.884688,-10.84375015 -10.8749995,-10.84375015 z m 0,1.00000005 c 5.4498715,0 9.8749995,4.3938778 9.8749995,9.8437501 0,5.449871 -4.425128,9.875 -9.8749995,9.875 -5.44987165,0 -9.84375,-4.425129 -9.84375,-9.875 0,-5.4498724 4.39387835,-9.8437501 9.84375,-9.8437501 z m -0.5,0 0,3 1,0 0,-3 -1,0 z m -4.0625001,0.78125 -0.87499995,0.4375 1.50000005,3 0.875,-0.4375 -1.5000001,-3 z m 9.1249996,0 -1.4999998,3 0.875,0.4375 1.4999998,-3 -0.875,-0.4375 z m -3.0312498,2.0625 -1.9999997,7.0000001 -0.1875,0.65625 0.65625,0 3.9999997,0 0,-1 -3.3124997,0 1.8124997,-6.3750001 -0.96875,-0.28125 z m -10.3124997,1.71875 -0.4375,0.875 2.99999989,1.5 0.43750002,-0.875 -2.99999991,-1.5 z m 17.5624995,0 -3,1.5 0.4375,0.875 3,-1.5 -0.4375,-0.875 z m -18.7812495,4.9375001 0,1 3,0 0,-1 -3,0 z m 16.9999995,0 0,1 3,0 0,-1 -3,0 z m -13.21874961,3.5625 -2.99999989,1.5 0.4375,0.875 2.99999991,-1.5 -0.43750002,-0.875 z m 12.43749961,0 -0.4375,0.875 3,1.5 0.4375,-0.875 -3,-1.5 z m -10.1562495,2.71875 -1.50000005,3 0.87499995,0.4375 1.5000001,-3 -0.875,-0.4375 z m 7.8749997,0 -0.875,0.4375 1.4999998,3 0.875,-0.4375 -1.4999998,-3 z m -4.4374997,1.21875 0,3 1,0 0,-3 -1,0 z",errorEventDefinition:"M 11.463696,4.1000734 8.0101971,17.518491 2.1842371,7.2103904 -2.0184917,13.000178 1.6918061,-0.23912289 7.6390051,9.0612304 11.463696,4.1000734 z",escalationEventDefinition:"m 3.629,-0.1288182 6,15.0000012 -6,-6.7500012 -6,6.7500012 z",signalEventDefinition:"m -3,10.747183 14.620837,0 L 4.3104179,-1.924209 -3,10.747183 z",cancelEventDefinition:"M -3.099,2.5764382 -0.6787673,0.1562061 4.1616964,4.9966705 9.0021612,0.15620559 11.422392,2.5764374 6.5819284,7.416902 11.422393,12.257368 9.0021612,14.677601 4.1616964,9.837136 -0.67876815,14.6776 -3.0989996,12.257367 1.7414641,7.4169029 -3.099,2.5764382 z",conditionalEventDefinition:"m -3.0037595,0.38909773 15.2932325,0 0,15.29323327 -15.2932325,0 0,-15.29323327 m 2.54887227,2.54887217 10.19548863,0 m -10.19548863,3.3984963 10.19548863,0 m -10.19548863,3.3984961 10.19548863,0 m -10.19548863,3.3984967 10.19548863,0 z",compensateEventDefinition:"m 3.1,-0.32181697 0,13.99999997 -7,-7 7,-6.99999997 m 7,0 0,13.99999997 -7,-7 7,-6.99999997 z",multipleParallel:"m -4.075,6.121179 0,6.000004 6.25,0 0,6.75 6,0 0,-6.75 6.75,0 0,-6.000004 -6.75,0 0,-6.24999992 -6,0 0,6.24999992 z",multiple:"M 9.770542,15.081371 -0.30230591,15.080531 -3.414188,5.5004192 4.735411,-0.41957216 12.884022,5.5017792 9.770542,15.081371 z",linkEventDefinition:"m -1.5357143,2.8073706 9,0 0,-2.99999997 5.0000003,4.99999997 -5.0000003,5 0,-3 -10,0 0,-4"},b={userTask:"M 13.958222,1.3965348 c 0.182747,0.8062061 0.403968,1.6764836 0.446907,2.5155819 0.01134,0.2240793 0.02473,0.518055 -0.06905,0.7092419 0.764998,0.5077757 0.390571,1.5630737 -0.05702,2.0999727 -0.161107,0.192558 -0.527289,0.431713 -0.609044,0.670525 -0.120916,0.351195 -0.270343,0.695879 -0.483663,1.006644 -0.178281,0.259027 -0.140152,0.06304 -0.317747,0.460493 -0.120228,0.539983 -0.302632,1.7628257 -0.04466,2.2647777 0.338701,0.65819 1.080683,1.074827 1.69488,1.424993 0.814119,0.464605 1.723734,0.805521 2.593159,1.151919 0.800379,0.318987 1.635108,0.557115 2.405258,0.947026 0.241488,0.121976 0.485037,0.241211 0.713815,0.386486 0.184465,0.117179 0.493968,0.297744 0.537937,0.534158 v 1.85842 H 0.15494912 l 0.014084,-1.85842 c 0.043969,-0.236071 0.353472,-0.416979 0.5379371,-0.534158 0.2287778,-0.145275 0.47232658,-0.264167 0.71381428,-0.386486 0.7701499,-0.389911 1.6052233,-0.628039 2.4052587,-0.947026 0.8694245,-0.346741 1.7786961,-0.687314 2.5931586,-1.151919 0.613853,-0.350166 1.355835,-0.766803 1.694536,-1.424993 0.25832,-0.502295 0.114046,-1.7302767 -0.0065,-2.2695747 l 0,0 c -0.20645,-0.133282 -0.349007,-0.54615 -0.466144,-0.752755 -0.12332,-0.218255 -0.222594,-0.453641 -0.373052,-0.655792 -0.205076,-0.275817 -0.546868,-0.404988 -0.77015,-0.66333 -0.149083,-0.172 -0.212633,-0.385115 -0.286487,-0.596174 -0.08828,-0.252175 -0.045,-0.457067 -0.0845,-0.740421 -0.01752,-0.121291 0.04466,-0.262112 0.116794,-0.364558 0.08863,-0.126087 0.250075,-0.1507564 0.290953,-0.3104215 0.0505,-0.1976969 -0.0608,-0.429314 -0.0821,-0.6246125 -0.02267,-0.2086611 -0.07695,-0.5413538 -0.07592,-0.7507001 0.0034,-0.7596083 -0.137404,-1.4448662 0.472327,-2.0451523 0.21435,-0.2103742 0.457899,-0.39231013 0.690455,-0.58212663 l 0,0 c 0.08931,-0.2836968 0.51767,-0.4584375 0.768089,-0.5536884 0.325304,-0.1233464 0.667441,-0.1925574 1.000989,-0.2915772 1.0064852,-0.2991151 2.1630842,-0.2672506 3.0455622,0.3525652 0.289579,0.2035216 0.688738,0.028781 0.993775,0.2035216 0.293701,0.1685734 0.644082,0.55814253 0.610418,0.91756033 Z",serviceTask:"m 20.347,4.895 -2.561,2.56 0.943,2.277 3.624,0 0,3.383 -3.622,0 -0.943,2.277 2.563,2.563 -2.393,2.392 -2.561,-2.561 -2.277,0.943 0,3.624 -3.383,0 0,-3.622 L 7.46,17.788 4.897,20.35 2.506,17.958 5.066,15.397 4.124,13.12 l -3.624,0 0,-3.383 3.621,0 0.944,-2.276 -2.562,-2.563 2.392,-2.392 2.56,2.56 2.277,-0.941 0,-3.625 3.384,0 0,3.621 2.276,0.943 2.562,-2.562 z",scriptTask:"M6.402,0.5H20.902C20.902,0.5,15.069,3.333,15.069,6.083S19.486,12.083,19.486,15.25S15.319,20.333,15.319,20.333H0.235C0.235,20.333,5.235,17.665999999999997,5.235,15.332999999999998S0.6520000000000001,8.582999999999998,0.6520000000000001,6.082999999999998S6.402,0.5,6.402,0.5ZM3.5,4.5L13.5,4.5M3.8,8.5L13.8,8.5M6.3,12.5L16.3,12.5M6.5,16.5L16.5,16.5",receiveTask:"m 0.9390847,0.90862706 0,12.57129694 20.0406103,0 0,-12.57129694 z m 0,0 L 10.959389,8.4514053 20.979695,0.90862706",sendTask:"M 0.93908473,0.91877964 8.9390847,6.9187796 16.939085,0.91877964 z m 0,0.99999996 0,10.0000004 16.00000027,0 0,-10.0000004 -8.0000003,6 z",manualTask:"M0.5,3.751L4.583,0.5009999999999999C4.583,0.5009999999999999,15.749,0.5839999999999999,16.666,0.5839999999999999S14.249,3.5009999999999994,15.166,3.5009999999999994S26.833,3.5009999999999994,27.75,3.5009999999999994C28.916,5.209,27.582,6.667999999999999,26.916,7.167999999999999S27.791,9.084999999999999,25.916,11.584999999999999C25.166,11.834999999999999,26.666,13.459999999999999,24.583000000000002,14.918C23.416,15.501,25.166,16.46,23.333000000000002,17.750999999999998C22.166,17.750999999999998,2.5000000000000036,17.833999999999996,2.5000000000000036,17.833999999999996L0.5000000000000036,16.500999999999998V3.751ZM13.5,7L27,7M13.5,11L26,11M14,14.5L25,14.5M8.2,3.1L15,3.1",businessRuleTask:"m 0.32589285,0.32077148 0,0.25000003 0,4.46874999 0,0.25 0.25,0 17.03125015,0 0.25,0 0,-0.25 0,-4.46874999 0,-0.25000003 -0.25,0 -17.03125015,0 -0.25,0 z m 0.5,0.50000003 16.53125015,0 0,3.96874999 -16.53125015,0 0,-3.96874999 z m 4.71875005,4.91635739 0,5.7500011 -4.75000005,0 0,0.5 4.75000005,0 0,3.75 0.5,0 0,-3.75 11.7500001,0 0,-0.5 -11.7500001,0 0,-5.7500011 -0.5,0 z m -5.21875005,-0.050286 0,0.3059125 0,9.7509627 0,0.305912 0.25,0 17.12500015,0 0.25,0 0,-0.305912 0,-9.7509627 0,-0.3059125 -0.25,0 -17.12500015,0 -0.25,0 z m 0.5,0.611825 16.62500015,0 0,9.1391372 -16.62500015,0 0,-9.1391372 z"},w={dataObject:{path:"m 0.49099769,0.73102628 39.21440331,0 9.803601,9.83633372 0,49.181671 -49.01800431,0 0,-59.01800472 m 39.21440331,0 0,9.83633372 9.803601,0",width:50,height:60},dataObjectReference:{path:"m 0.49099769,0.73102628 39.21440331,0 9.803601,9.83633372 0,49.181671 -49.01800431,0 0,-59.01800472 m 39.21440331,0 0,9.83633372 9.803601,0",width:50,height:60},dataInput:{path:"m 0.49099769,0.73102628 39.21440331,0 9.803601,9.83633372 0,49.181671 -49.01800431,0 0,-59.01800472 m 39.21440331,0 0,9.83633372 9.803601,0",width:50,height:60},dataOutput:{path:"m 0.49099769,0.73102628 39.21440331,0 9.803601,9.83633372 0,49.181671 -49.01800431,0 0,-59.01800472 m 39.21440331,0 0,9.83633372 9.803601,0",width:50,height:60},dataStoreReference:{path:"m 59.525317,15.298375 c 0,1.948956 -3.447739,6.428808 -29.779135,6.428808 -26.3304438,0 -29.2714988,-4.598594 -29.2714988,-6.333617 m 0,-4.563267 c 0,1.736004 2.941055,6.334599 29.2714988,6.334599 26.331396,0 29.779135,-4.479852 29.779135,-6.428808 M 0.4746832,6.2670314 c 0,2.306167 2.941055,6.3345996 29.2714988,6.3345996 26.331396,0 29.779135,-3.8390326 29.779135,-6.4297906 m 0,9.81e-4 V 10.926471 M 0.49754114,6.1728214 V 10.926471 M 59.525317,10.73609 v 4.753647 M 0.49754114,10.73609 v 4.753647 M 29.722371,0.55068142 c 19.060666,0 29.802946,2.99310998 29.802946,5.62213998 0,2.62805 0,44.2548566 0,47.3441386 0,3.089282 -15.638642,6.084356 -29.894377,6.084356 -14.255736,0 -29.1562568,-2.899883 -29.1562568,-6.180529 0,-3.279663 0,-44.8750666 0,-47.1537556 0,-2.278689 10.1879748,-5.71634998 29.2476878,-5.71634998 z",width:60,height:60}},k={loop:"m 0,2.4999366 0,3 -3,0 m 3,0 a 4.875,4.875 0 1 1 4,0",multiInstanceSequential:"m -2.499754,-2 h 10 m -10,4 h 10 m -10,4 h 10",multiInstanceParallel:"m -2.199754,-2 v 8 m 4,-8 v 8 m 4,-8 v 8",adHoc:"M -0.59975394,0 C -1.1428039,0.60192 -1.648284,1.0324 -2.116224,1.29142 c -0.46216,0.25908 -0.94744,0.38857 -1.4558,0.38857 -0.57194,0 -1.23628,-0.22473 -1.99307,-0.67428 -0.0577,-0.0306 -0.10111,-0.0534 -0.12999,-0.0687 -0.0346,-0.0228 -0.0896,-0.0533 -0.16464,-0.0915 -0.80878,-0.47234 -1.4558,-0.70857 -1.94107,-0.70857 -0.46217,0 -0.91566,0.14858 -1.36047,0.44576 -0.44485,0.2895 -0.92434,0.75046 -1.43849,1.38285 l 0,-2.03429 c 0.54881,-0.60194 1.05431,-1.0324 1.51647,-1.29147 0.46793,-0.26666 0.9532,-0.39999 1.45581,-0.39999 0.57191,0 1.24205,0.22856 2.01039,0.68574 0.0461,0.0308 0.0838,0.0533 0.11266,0.0687 0.0404,0.0228 0.0982,0.0533 0.1733,0.0913 0.803,0.4724 1.45002,0.70861 1.94108,0.70857 0.44481,4e-5 0.88676,-0.14475 1.32581,-0.43429 0.43905,-0.2895 0.9272001,-0.75425 1.46448006,-1.39428 z",
compensation:"m 0.71428559,1.6639369 5.00000041,-5.0000001 0,9.9999998 z m -5.29999999,0 4.99999999,4.9999997 0,-9.9999998 z",reference:"m -2.8535142,-2.3696092 c 0,9.607029 0,9.7871607 0,9.7871607 l 9.3068093,0 0,-9.7871607 -9.6389273,-0.025715 5.1356324,0.025715 0,9.7871607 4.4432509,0 0,-4.8638044 -9.2553782,0.025715 z"};n.labelPadding=2,n.wordWrapMaxWidth=100+n.labelPadding;var _={},S="#222",C={"stroke-width":0},E={stroke:S,"stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-opacity":1},T={stroke:S,"stroke-width":1.3,"stroke-opacity":1},A={stroke:S,style:"LongDashDot"},P={stroke:S,"stroke-width":1,"stroke-opacity":1,fill:"white"},N={stroke:S,"stroke-width":1.5,fill:"white"},j={"stroke-width":2,fill:"green"},M={"stroke-width":3,fill:"#858585"},L={stroke:S,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-opacity":1,fill:"white"},F={stroke:S,"stroke-width":3,"stroke-linecap":"round","stroke-linejoin":"round","stroke-opacity":1,fill:"white"},D={stroke:S},B=y({},D,{"stroke-width":2}),I={stroke:"#ccc"},z={stroke:S,fill:S,"stroke-opacity":1,"stroke-width":4},R={fill:S,style:"Solid","stroke-width":2,"arrow-end":"block-medium-medium","stroke-linecap":"square","stroke-linejoin":"round"},O={stroke:S,style:"Dot","stroke-width":2,"arrow-end":"block-medium-medium","stroke-linecap":"square","stroke-linejoin":"round"},G=y({},O),W={"stroke-width":2,"arrow-end":"open-wide-long","stroke-dasharray":"-",style:"LongDash","stroke-linecap":"round","stroke-linejoin":"round"},U={"font-size":12,"font-family":"Arial"},H={startEvent:y({},N,j),endEvent:y({},N,M),boundaryEvent:N,intermediateCatchEvent:N,intermediateThrowEvent:N,exclusiveGateway:E,inclusiveGateway:E,complexGateway:E,parallelGateway:y({},N,{"stroke-width":3}),eventBasedGateway:E,userTask:L,serviceTask:L,callActivity:F,manualTask:L,receiveTask:L,scriptTask:L,sendTask:L,businessRuleTask:L,task:L,subProcess:L,transaction:L,adHocSubProcess:L,process:D,group:A,participant:B,lane:I,sequenceFlow:y({},E,R),messageFlow:y({},E,W),textAnnotation:E,association:O,dataInputAssociation:G,dataOutputAssociation:G,dataStoreReference:P,dataObject:P,dataObjectReference:P,dataInput:P,dataOutput:P},q=function(t,e,r,n){return function(i){return t.createText({text:i,align:r?r:n}).setFont(e).setFill("black")}},V={render:function(t,e){var r=t.renderElement,n=t.getStyle(r),i=t.renderBounds;if(!r.processRef&&i){var o=+i.x,a=+i.y,s=+i.width,l=+i.height,u=e.createGroup();u.setTransform({dx:o,dy:a});var c={color:n.stroke,width:n["stroke-width"]},h=u.createRect({x:0,y:0,width:s,height:l});h.setStroke(c);var f=r.name;f&&d(t,e,{x:o+s/2,y:a+l/2},"middle")}}},K={render:function(e,r){var i=e.renderElement,o=e.getStyle(i),a=e.renderBounds,u={family:"Arial",size:12,weight:"normal",align:"left"};if(a){var c=+a.x,d=+a.y,h=+a.width,f=+a.height,p=r.createGroup();p.setTransform({dx:c,dy:d});var m=p.createRect({x:0,y:0,width:h,height:f});m.setStroke(o.stroke);var g=i.name;if(g){var y=q(r,u,"left"),x=s(c,d,y,u.size,!0,function(e,r,i,o){var a=e.getTextWidth(),s=o>1?f:f/2+a/2;e.applyTransform(t.matrix.translate(n.labelPadding+c+(i+1)*u.size,r+s)).applyTransform(t.matrix.rotateg(-90))});l([g],y,x,f)}var v=p.createLine({x1:30,y1:0,x2:30,y2:f});v.setStroke(o.stroke)}}},X={render:function(t,e){var r=t.renderElement,i=t.getStyle(r),o=t.renderBounds;if(o){var a=+o.x,s=+o.y,l=+o.width,u=+o.height,c=e.createGroup();c.setTransform({dx:a,dy:s});var h=c.createRect({x:0,y:0,width:l,height:u});h.setStroke({color:i.stroke,style:i.style}),r.name=_[r.categoryValueRef]?_[r.categoryValueRef]:"",d(t,e,{x:a+2*n.labelPadding,y:s+4*n.labelPadding+U["font-size"]},"left",!0)}}},Y={render:function(e,r){var n=(e.baseElement,e.getStyle()),i=e.getBounds(),o=+i.x,a=+i.y,s=+i.width,l=+i.height,u=r.createGroup();u.setTransform({dx:o,dy:a});var c=u.createRect({x:0,y:0,width:s,height:l});c.setStroke(n.stroke);var d=e.baseElement.name;if(d){var h=u.createText({x:0,y:0,text:d});h.setFont({family:"Arial",size:"9pt",weight:"normal",align:"middle"}),h.setFill("black"),h.setTransform([t.matrix.translate(15,l/2+30),t.matrix.rotateg(-90)])}}},$={render:function(t,e){var r=t.renderElement,n=t.getStyle(),i=t.getWaypoints(),o=e.createGroup(),a=o.createPolyline(i);a.setStroke({color:n.stroke,style:n.style});var s=lt[r.type];return s&&s.decorate(t,i,o),d(t,e,h(i),"middle"),o}},Z={render:function(t,e){var r=t.baseElement,n=t.getStyle(),i=t.getBounds(),o=+i.x,a=+i.y,s=+i.width,l=+i.height,u=e.createGroup();u.setTransform({dx:o,dy:a});var c=u.createPolyline([{x:s/2,y:0},{x:s,y:l/2},{x:s/2,y:l},{x:0,y:l/2},{x:s/2,y:0}]);c.setStroke(n.stroke),c.setFill(n.fill);var h=u.createGroup(),f=l/2*.8,p={color:n.stroke,width:n["stroke-width"]};switch(r.type){case"eventBasedGateway":h.createCircle({cx:s/2,cy:l/2,r:.8*f}).setStroke(n.stroke),h.createCircle({cx:s/2,cy:l/2,r:.65*f}).setStroke(n.stroke),h.createPath(v.multiple).setStroke(n.stroke).setTransform({dx:s/2-4.5,dy:l/2-8});break;case"exclusiveGateway":var m=h.createText({x:s/2,y:l/2,text:"X",align:"middle"}).setFont({family:"Arial",size:f+"pt"}).setStroke(p).setFill(z.fill);m.setTransform({dy:f/2,dx:0});break;case"complexGateway":var m=h.createText({x:s/2,y:l/2,text:"X",align:"middle"}).setFont({family:"Arial",size:f+"pt"}).setStroke(p).setFill(z.fill);p.width=4,h.createLine({x1:s/2,y1:.2*l,x2:s/2,y2:l-.2*l}).setStroke(p),h.createLine({x1:.2*s,y1:l/2,x2:s-.2*s,y2:l/2}).setStroke(p),m.setTransform({dy:f/2,dx:0});break;case"parallelGateway":h.createLine({x1:s/2,y1:.2*l,x2:s/2,y2:l-.2*l}).setStroke(p),h.createLine({x1:.2*s,y1:l/2,x2:s-.2*s,y2:l/2}).setStroke(p);break;case"inclusiveGateway":var m=h.createCircle({cx:s/2,cy:l/2,r:.5*f}).setStroke(p)}d(t,e,{x:o+s/2,y:a+l+10},"middle")}},Q={render:function(t,e){function r(t){var e=m.createPath(k[t]);e.setStroke({color:T.stroke,width:T["stroke-width"]}),"adHoc"==t&&e.setFill("black");var r=w%2==0?1:-1;e.setTransform({dx:f/2+15*w*r,dy:p-10})}function n(t,e){var r="m 20.347,4.895 -2.561,2.56 0.943,2.277 3.624,0 0,3.383 -3.622,0 -0.943,2.277 2.563,2.563 -2.393,2.392 -2.561,-2.561 -2.277,0.943 0,3.624 -3.383,0 0,-3.622 L 7.46,17.788 4.897,20.35 2.506,17.958 5.066,15.397 4.124,13.12 l -3.624,0 0,-3.383 3.621,0 0.944,-2.276 -2.562,-2.563 2.392,-2.392 2.56,2.56 2.277,-0.941 0,-3.625 3.384,0 0,3.621 2.276,0.943 2.562,-2.562 z",n=t.createPath(r);n.setStroke({color:e.stroke,width:1.5}),n.setTransform({dx:5,dy:5,xx:.7,yy:.7});var i="m 15.141,11.426 c 0,2.051185 -1.662814,3.714 -3.714,3.714 -2.0511855,0 -3.7139999,-1.662815 -3.7139999,-3.714 0,-2.0511859 1.6628144,-3.7140003 3.7139999,-3.7140003 2.051186,0 3.714,1.6628144 3.714,3.7140003 z",o=t.createPath(i);o.setStroke({color:e.stroke,width:1.5}),o.setTransform({dx:5,dy:5,xx:.7,yy:.7});var a="m 26.347,10.895 -2.561,2.56 0.943,2.277 3.624,0 0,3.383 -3.622,0 -0.943,2.277 2.563,2.563 -2.393,2.392 -2.561,-2.561 -2.277,0.943 0,3.624 -3.383,0 0,-3.622 -2.277,-0.943 -2.563,2.562 -2.391,-2.392 2.56,-2.561 -0.942,-2.277 -3.624,0 0,-3.383 3.621,0 0.944,-2.276 -2.562,-2.563 2.392,-2.392 2.56,2.56 2.277,-0.941 0,-3.625 3.384,0 0,3.621 2.276,0.943 2.562,-2.562 z",s=t.createPath(a);s.setStroke({fill:"#ffffff",color:e.stroke,width:1.5}),s.setTransform({dx:5,dy:5,xx:.7,yy:.7}),s.setFill("#ffffff");var l="m 21.141,17.426001 c 0,2.051185 -1.662814,3.714 -3.714,3.714 -2.051186,0 -3.714,-1.662815 -3.714,-3.714 0,-2.051186 1.662814,-3.714 3.714,-3.714 2.051186,0 3.714,1.662814 3.714,3.714 z",u=t.createPath(l);u.setStroke({color:e.stroke,width:1.5}),u.setTransform({dx:5,dy:5,xx:.7,yy:.7})}function i(t,e){var r="m 6.0095,22.5169 h 16.8581 v -5.4831 c 0,0 -1.6331,-2.7419 -4.9581,-3.6169 h -6.475 c -3.0919,0.9331 -5.4831,4.025 -5.4831,4.025 l 0.0581,5.075 z",n=t.createPath(r);n.setStroke({color:e.stroke,width:.69999999}),n.setFill("#f4f6f7");var i="m 9.8,19.6 0,2.8",o=t.createPath(i);n.setFill("none"),o.setStroke({color:e.stroke,width:.69999999});var a="m 19.6,19.6 0,2.8",s=t.createPath(a);s.setStroke({color:e.stroke,width:.69999999});var l="m 18.419,5.9159999 c 0,2.9917264 -2.425274,5.4170001 -5.417,5.4170001 -2.991727,0 -5.417,-2.4252737 -5.417,-5.4170001 0,-2.9917264 2.425273,-5.41699983 5.417,-5.41699983 2.991726,0 5.417,2.42527343 5.417,5.41699983 z",u=t.createPath(l);u.setStroke({color:e.stroke,width:1.5}),u.setTransform({dx:5,dy:5,xx:.75,yy:.75}),u.setFill(e.stroke);var c="m 11.2301,10.5581 c 0,0 1.9698,-1.6982 3.7632,-1.2649 1.7934,0.4333 3.2368,-0.4851 3.2368,-0.4851 0.175,1.1816 0.0294,2.625 -1.0206,3.9088 0,0 0.7581,0.525 0.7581,1.05 0,0.525 0.0875,1.3125 -0.7,2.1 -0.7875,0.7875 -3.85,0.875 -4.725,0 -0.875,-0.875 -0.875,-1.2831 -0.875,-1.8669 0,-0.5838 0.4081,-0.875 0.875,-1.3419 -0.7581,-0.4081 -1.7493,-1.6625 -1.3125,-2.1 z",d=t.createPath(c);d.setStroke({color:e.stroke,width:.69999999}),d.setFill("#f0eff0")}function o(t,e){var r="M8,11 L8,21 L24,21 L24,11 L16,17z",n=t.createPath(r);n.setFill("#000000"),n.setTransform({xx:1.2});var i="M7,10 L16,17 L25 10z",o=t.createPath(i);o.setFill("#000000"),o.setTransform({dx:0,dy:-1.5,xx:1.2})}function a(t,e,r){var r=m.createPath(r);r.setStroke({color:e.stroke,width:1.5}),r.setTransform({dx:5,dy:5})}var s=t.baseElement,l=t.getStyle(),u=t.getBounds(),c=+u.x,h=+u.y,f=+u.width,p=+u.height,m=e.createGroup();m.setTransform({dx:c,dy:h});var g={color:l.stroke,width:l["stroke-width"]};"true"==s.triggeredByEvent&&(g.style="Dot");var y=m.createRect({x:0,y:0,width:f,height:p,r:5});if(y.setStroke(g),y.setFill(l.fill),"transaction"==s.type){var x=3,v=m.createRect({x:0+x,y:0+x,width:f-2*x,height:p-2*x,r:5});v.setStroke(g),v.setFill(l.fill)}if(s.marker){var w=0;("callActivity"==s.type&&s.calledElement||"subProcess"==s.type&&"false"===s.bpmndi[0].isExpanded||"transaction"==s.type&&"false"===s.bpmndi[0].isExpanded)&&(r("reference"),w++),-1!=s.type.indexOf("adHoc")&&(s.marker.adHoc=!0);for(var _ in s.marker)r(_),w++}b[s.type]&&("serviceTask"==s.type?n(m,l):"userTask"==s.type?i(m,l):"sendTask"==s.type?o(m,l):a(m,l,b[s.type])),d(t,e,{x:c+f/2,y:h+p/2},"middle",!0)}},J={render:function(t,e){var r=t.getStyle(),n=t.getBounds(),o=t.baseElement,a=t.getEventType(),s="Solid";"false"==o.cancelActivity&&(s="ShortDash"),"false"==o.isInterrupting&&(s="ShortDash");var s={color:r.stroke,style:s,width:r["stroke-width"]},l=r.fill,u=+n.x+s.width/2,c=+n.y+s.width/2,h=+n.width/2-s.width,f=e.createGroup();f.setTransform({dx:u,dy:c});var p=f.createCircle({cx:h,cy:h,r:h});if(p.setStroke(s),p.setFill(l),t.isIntermediateEvent()){var m=f.createCircle({cx:h,cy:h,r:.8*h});m.setStroke(s),m.setFill(l)}if(o.eventDefinitions&&o.eventDefinitions.length>0){var g=o.eventDefinitions[0].type,y=g;if(/^message/i.test(g)&&(y="message"+a),o.eventDefinitions.length>1)y="multiple","true"==o.parallelMultiple&&(y="multipleParallel");else if("terminateEventDefinition"==g){var m=f.createCircle({cx:h,cy:h,r:.75*h});m.setFill("black")}var x=f.createPath(v[y]),b=x.getBoundingBox();x.setStroke(r.stroke),x.setTransform({dx:h-(b?b.width/4:0)-s.width/4,dy:h-(b?b.height/2:0)}),"throw"==a&&x.setFill("black")}return"boundaryEvent"==o.type&&!function(e,r){t.postRenderParent(function(){i(e,r)})}(o,f),d(t,e,{x:u+ +n.width/2,y:c+ +n.width+h},"middle"),p}},tt={render:function(t,e){var r=t.getStyle(),n={family:U["font-family"],size:U["font-size"],weight:"normal"},i=4,o=t.getBounds(),a=+o.x,s=+o.y,l=e.createGroup(),u=c(t.baseElement.text,l,n,i,n.size+i,"left"),d=(u+1)*n.size;l.setTransform({dx:a,dy:s}),l.createPolyline([{x:10,y:0},{x:0,y:0},{x:0,y:d},{x:10,y:d}]).setStroke(r.stroke)}},et={render:function(){}},rt={render:function(t,e){var r=t.getStyle(),n=t.getBounds();if(n){var i=+n.x,o=+n.y,a=+n.width,s=+n.height,l=w[t.baseElement.type],u=e.createGroup();if(u.setTransform({dx:i,dy:o,xx:a/l.width,yy:s/l.height}),"true"===t.baseElement.isCollection){var c=u.createPath(k.multiInstanceParallel);c.setStroke("#000"),c.setFill("#000"),c.setTransform({dx:a/2-5,dy:s-15})}var h={x:i+a/2,y:o+s/2},f=7,p=12;switch(t.baseElement.type){case"dataInput":var m=u.createPath(v.linkEventDefinition);m.setStroke("#000"),m.setTransform({dx:f,dy:f});break;case"dataOutput":var m=u.createPath(v.linkEventDefinition);m.setStroke("#000"),m.setFill("#000"),m.setTransform({dx:f,dy:f});break;case"dataStoreReference":h.y=o+s+p}var g=({family:U["font-family"],size:U["font-size"],weight:"normal"},u.createPath(l.path).setStroke(r.stroke));return d(t,e,h,"middle"),g}}},nt={decorate:function(t,e,r){var n=t.getStyle(),i=f({from:e[e.length-2],to:e[e.length-1],group:r});i.setStroke({color:n.stroke}),i.setFill("black")}},it={decorate:function(t,e,r){function n(t,e){for(var r,n=0;r=t[n];n++)if(r.id==e)return r;return null}var i=t.getStyle(),o=f({from:e[e.length-2],to:e[e.length-1],group:r});o.setStroke({color:i.stroke}),o.setFill("white");var a=p(e[0],r);a.setStroke({color:i.stroke}),a.setFill("white");var s=t.renderElement,l=s.bpmndi&&s.bpmndi[0].messageVisibleKind?s.bpmndi[0].messageVisibleKind:null;if(s.messageRef&&l){var u=n(t.baseElement,s.messageRef);if(!u)return;var c=r.createGroup(),m=c.createPath(v.messagecatch),g=h(e);m.setStroke(i.stroke);var y="non-initiating"==l.toLowerCase();m.setFill(y?"#ccc":"#fff"),m.setTransform({dx:g.x,dy:g.y,xx:1.5,yy:1.5}),d({renderElement:u,getLabelBounds:function(){return{x:g.x+30,y:g.y+10}}},c,null,"left")}}},ot={decorate:function(t,e,r){var n=t.getStyle(),i=f({from:e[e.length-2],to:e[e.length-1],group:r,open:!0});i.setStroke({color:n.stroke})}},at={decorate:function(t,e,r){var n=t.renderElement,i=n.associationDirection,o=t.getStyle();if("One"==i||"Both"==i){var a=f({from:e[e.length-2],to:e[e.length-1],group:r,open:!0});a.setStroke({color:o.stroke})}if("Both"==i){var s=f({from:e[1],to:e[0],group:r,open:!0});s.setStroke({color:o.stroke})}}},st={};st.process=K,st.participant=V,st.startEvent=J,st.endEvent=J,st.boundaryEvent=J,st.intermediateCatchEvent=J,st.intermediateThrowEvent=J,st.userTask=Q,st.task=Q,st.subProcess=Q,st.transaction=Q,st.group=X,st.adHocSubProcess=Q,st.serviceTask=Q,st.callActivity=Q,st.manualTask=Q,st.receiveTask=Q,st.scriptTask=Q,st.sendTask=Q,st.businessRuleTask=Q,st.exclusiveGateway=Z,st.inclusiveGateway=Z,st.parallelGateway=Z,st.eventBasedGateway=Z,st.complexGateway=Z,st.sequenceFlow=$,st.dataInputAssociation=$,st.dataOutputAssociation=$,st.messageFlow=$,st.association=$,st.lane=Y,st.textAnnotation=tt,st.dataStoreReference=rt,st.dataObjectReference=rt,st.dataObject=rt,st.dataInput=rt,st.dataOutput=rt,st.message=et;var lt={};lt.sequenceFlow=nt,lt.messageFlow=it,lt.dataInputAssociation=ot,lt.dataOutputAssociation=ot,lt.association=at;var ut=function(){function t(t,e){throw this.message=t,this.bpmnElementRenderer=e,t}return t}();return n.prototype.postRenderParent=function(t){this.options.postRenderCallbacks.push(t)},n.prototype.render=function(r,i){this.gfxGroup=i,this.options=r;var o=r.xid&&null!=r.xid?r.xid:"";if(!i){var a=r.width?r.width:800,s=r.height?r.height:600;i=this.gfxGroup=t.createSurface(r.diagramElement,a,s).createGroup()}var l=[].concat(this.baseElement);for(var u in l){var c=this.renderElement=l[u],d=this.renderBounds=this.getElementBounds(c);if("categoryValue"!=c.type){if(d&&!r.skipOverlays){var h=document.getElementById(r.diagramElement);h.style.position="relative";var f=e('<div class="'+o+c.id+" "+o+'bpmnElement"></div>');f.css({position:"absolute",left:+d.x+"px",top:+d.y+"px",width:+d.width+"px",height:+d.height+"px"}).appendTo(h),r.overlayHtml&&f.html(r.overlayHtml)}var p=st[c.type];if(p?this.svgElement=p.render(this,i):g("Unable to render element of type ",c.type),c.baseElements){for(var m=[],x=y({},r,{postRenderCallbacks:m}),v=0;v<c.baseElements.length;v++)new n(c.baseElements[v],this).render(x,i);for(var b,w=0;b=m[w];w++)b()}}else _[c.id]=c.value}},n.prototype.getLabelBounds=function(){var t=this.renderElement;switch(t.type){case"transaction":case"adHocSubProcess":case"subProcess":if("true"===t.bpmndi[0].isExpanded)return{x:t.bounds.x+U["font-size"]+n.labelPadding,y:+t.bounds.y+U["font-size"]+n.labelPadding}}var e=t.bpmndi[0].children;for(var r in e){var i=e[r];if(/BPMNLabel/i.test(i.type))return m(i.children)}return null},n.prototype.getBounds=function(){if(this.baseElement instanceof Array){var t={x:1e4,y:1e4,width:1,height:1};for(var e in this.baseElement){var r=this.baseElement[e],n=this.getElementBounds(r);n&&(t.x=Math.min(+n.x,+t.x),t.y=Math.min(+n.y,+t.y),t.width=Math.max(+n.x+ +n.width,+t.width),t.height=Math.max(+n.y+ +n.height,+t.height))}return t}if(this.baseElement.bounds)return this.baseElement.bounds;var n=this.getElementBounds(this.baseElement);return this.baseElement.bounds=n,n},n.prototype.getElementBounds=function(t){if(!t.bpmndi)return null;var e=t.bpmndi[0].children,r=m(e);if(r){var n=this.getSurface().getDimensions(),i=+r.x+ +r.width,o=+r.y+ +r.height,a=50;return(i>n.width||o>n.height)&&this.getSurface().setDimensions(Math.max(i+a,n.width),Math.max(o+a,n.height)),r}},n.prototype.getWaypoints=function(){var t=this.renderElement,e=[],r=t.bpmndi[0].children;for(var n in r){var i=r[n];/waypoint/i.test(i.type)&&e.push({x:+i.x,y:+i.y})}return e},n.prototype.getStyle=function(t){var e=t||this.renderElement;return H[e.type]||C},n.prototype.getEventType=function(){var t="catch",e="throw";switch(this.baseElement.type){case"startEvent":return t;case"endEvent":return e;case"intermediateCatchEvent":return t;case"boundaryEvent":return t;case"intermediateThrowEvent":return e}return void 0},n.prototype.isIntermediateEvent=function(){switch(this.baseElement.type){case"intermediateCatchEvent":case"boundaryEvent":case"intermediateThrowEvent":return!0;default:return!1}},n.prototype.getSurface=function(){var t=this.gfxGroup.getParent();do if(t instanceof x.gfx.Surface)return t;while(t=t.getParent());return null},n.prototype.RENDERER_DELEGATES=st,n});