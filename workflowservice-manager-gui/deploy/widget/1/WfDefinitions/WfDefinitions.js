/* Copyright (c) Ericsson 2015 */

define("styles!widget/WfDefinitions/WfDefinitions.less",function(){return".eaNFE_automation_UI-WfDefinitions {\n  min-height: 288px;\n  width: 100%;\n  height: 100%;\n}\n.eaNFE_automation_UI-WfDefinitions-SectionHeading-Title {\n  float: left;\n}\n.eaNFE_automation_UI-WfDefinitions-closelink {\n  color: black;\n  cursor: pointer;\n  text-decoration: none;\n  /* no underline */\n\n}\n.eaNFE_automation_UI-WfDefinitions-closelink:hover {\n  color: black;\n  cursor: pointer;\n  text-decoration: none;\n  /* no underline */\n\n}\n.eaNFE_automation_UI-WfDefinitions-handleBarButton-closeDiagram {\n  cursor: pointer;\n}\n.eaNFE_automation_UI-WfDefinitions-contentTable {\n  min-height: auto;\n  max-height: auto;\n}\n.eaNFE_automation_UI-WfDefinitions-contentTable-buttonRefresh {\n  float: left;\n  vertical-align: bottom;\n  margin-left: 15px;\n  margin-top: 10px;\n  cursor: pointer;\n  cursor: hand;\n  padding-top: 5px;\n}\n.eaNFE_automation_UI-WfDefinitions-contentTable-BottomDivider {\n  border-bottom: 1px solid #666666;\n  width: 100%;\n  padding-bottom: 5px;\n}\n.eaNFE_automation_UI-WfDefinitions-contentForm {\n  vertical-align: top;\n}\n"}),define("text!widget/WfDefinitions/WfDefinitions.html",function(){return'<div class="eaNFE_automation_UI-WfDefinitions">\r\n    <div class="ebLayout-SectionHeading eaNFE_automation_UI-WfDefinitions-SectionHeading">\r\n        <div class="eaNFE_automation_UI-WfDefinitions-SectionHeading-Title"><h2>Workflow Definitions</h2>\r\n        	<div class="eaNFE_automation_UI-WfDefinitions-contentTable-buttonRefresh"><i class="ebIcon ebIcon_refresh"></i></div>\r\n        </div>\r\n    </div>\r\n  <!--  <div class="eaNFE_automation_UI-WfDefinitions-handleBarButton">\r\n		<div class="eaNFE_automation_UI-WfDefinitions-handleBarButton-handleBar"></div>\r\n		<div class="eaNFE_automation_UI-WfDefinitions-handleBarButton-closeDiagram"><i class="ebIcon ebIcon_large ebIcon_close_red"></i>close diagram</div>\r\n    </div>-->  \r\n    \r\n    <div class="eaNFE_automation_UI-WfDefinitions-handleBarButton ebLayout-SectionSubheading">\r\n  		<h3 class="eaNFE_automation_UI-WfDefinitions-handleBarButton-handleBar"></h3>\r\n  		<div class="ebLayout-HeadingCommands">\r\n	    	<div class="ebLayout-HeadingCommands-block">\r\n	    		<a class="eaNFE_automation_UI-WfDefinitions-closelink" href="#" title="Close Diagram">Close Diagram</a>\r\n	      		<div class="eaNFE_automation_UI-WfDefinitions-handleBarButton-closeDiagram ebLayout-HeadingCommands-iconHolder">\r\n	        		<i class="ebIcon ebIcon_large ebIcon_close_red" title="Close Diagram"></i>\r\n	      		</div>\r\n    		</div>\r\n  		</div>\r\n  		<div class="ebLayout-clearFix"></div>\r\n	</div>    \r\n    <div class="eaNFE_automation_UI-WfDefinitions-contentTable"></div>\r\n    <div class="eaNFE_automation_UI-WfDefinitions-contentForm"></div>\r\n    <div class="eaNFE_automation_UI-WfDefinitions-contentTable-BottomDivider"></div>\r\n</div>\r\n'}),define("widget/WfDefinitions/WfDefinitionsView",["jscore/core","text!./WfDefinitions.html","styles!./WfDefinitions.less"],function(n,t,i){return n.View.extend({getTemplate:function(){return t},getStyle:function(){return i},getTableContent:function(){return this.getElement().find(".eaNFE_automation_UI-WfDefinitions-contentTable")},getFormContent:function(){return this.getElement().find(".eaNFE_automation_UI-WfDefinitions-contentForm")},getHandleButton:function(){return this.getElement().find(".eaNFE_automation_UI-WfDefinitions-handleBarButton")},getHandleBar:function(){return this.getElement().find(".eaNFE_automation_UI-WfDefinitions-handleBarButton-handleBar")},getCloseDiagram:function(){return this.getElement().find(".eaNFE_automation_UI-WfDefinitions-handleBarButton-closeDiagram")},getCloseLink:function(){return this.getElement().find(".eaNFE_automation_UI-WfDefinitions-closelink")},getHeadingContent:function(){return this.getElement().find(".eaNFE_automation_UI-WfDefinitions-SectionHeading")},getBottomDivider:function(){return this.getElement().find(".eaNFE_automation_UI-WfDefinitions-contentTable-BottomDivider")}})}),define("widget/WfDefinitions/WfDefinitions",["jscore/core","./WfDefinitionsView","./WfDefinitionsTable/WfDefinitionsTable","./CreateWfInstanceForm/CreateWfInstanceForm","../WfDiagram/WfDiagram"],function(n,t,i,e,o){return n.Widget.extend({View:t,Update:function(){this.bpmnDiagram&&(this.bpmnDiagram.detach(),this.WfDefinitionsTable.attach())},onViewReady:function(){this.regionEventBus=this.options.regionContext.eventBus,this.view.getHeadingContent().setStyle("display","none"),this.regionEventBus.subscribe("something-changed",function(n){}.bind(this)),this.view.getCloseDiagram().addEventHandler("click",function(){this.bpmnDiagram&&(this.bpmnDiagram.detach(),this.bpmnDiagram.destroy(),this.bpmnDiagram=void 0),this.WfDefinitionsTable||this.showTable(),this.toggleHandleBarView(),this.view.getHeadingContent().setStyle("display","none")}.bind(this)),this.view.getCloseLink().addEventHandler("click",function(){this.bpmnDiagram&&(this.bpmnDiagram.detach(),this.bpmnDiagram.destroy(),this.bpmnDiagram=void 0),this.WfDefinitionsTable||this.showTable(),this.toggleHandleBarView(),this.view.getHeadingContent().setStyle("display","none")}.bind(this)),this.CreateWfInstanceForm=null,this.showTable(),this.toggleHandleBarView(),this.regionEventBus.subscribe("toggleHeadingOff",function(n){this.view.getHeadingContent().setStyle("display","none")}.bind(this)),this.regionEventBus.subscribe("toggleHeadingOn",function(n){this.view.getHeadingContent().setStyle("display","inline-block")}.bind(this)),this.regionEventBus.subscribe("hideBottomDivider",function(n){this.view.getBottomDivider().setStyle("display","none")}.bind(this))},refreshButtonClicked:function(){this.showTable()},showTable:function(){this.WfDefinitionsTable&&(this.WfDefinitionsTable.detach(),this.trigger("removeWfDefinitionsTable","removeTable"),this.view.getHeadingContent().setStyle("display","none")),this.WfDefinitionsTable||(this.WfDefinitionsTable=new i({showAllVersions:this.currentFilterShowAll,showActionButtons:this.options.showActionButtons,regionEventBus:this.regionEventBus}),this.WfDefinitionsTable.attachTo(this.view.getTableContent())),this.tableContentHeight&&this.view.getTableContent().setStyle("height",this.tableContentHeight),this.WfDefinitionsTable.options.regionEventBus.subscribe("createinstance",function(n){this.createInstance(n)}.bind(this)),this.WfDefinitionsTable.options.regionEventBus.subscribe("showdiagram",function(n){if(!this.bpmnDiagram){this.bpmnDiagram=new o({xid:"def-",wfDefinitionId:n.id,wfName:n.name}),this.view.getHandleButton().setStyle("display","block");var t=n.name;this.view.getHandleBar().setText(t)}this.WfDefinitionsTable&&(this.WfDefinitionsTable.detach(),this.WfDefinitionsTable.destroy(),this.WfDefinitionsTable=void 0),this.bpmnDiagram.attachTo(this.view.getTableContent())}.bind(this))},toggleHandleBarView:function(){this.view.getHandleButton().setStyle("display","none")},hideTable:function(){null!=this.WfDefinitionsTable&&(this.tableContentHeight=this.view.getTableContent().getStyle("height"),this.WfDefinitionsTable.detach(),this.WfDefinitionsTable=null,this.view.getTableContent().setStyle("height","0px"))},showCreateInstanceForm:function(n){this.hideCreateInstanceForm(),this.CreateWfInstanceForm||(this.CreateWfInstanceForm=new e({wfDefinitionModel:n,createHandledCallback:this.createHandledCallback.bind(this),regionEventBus:this.options.regionContext.eventBus}),this.CreateWfInstanceForm.attachTo(this.view.getFormContent()))},hideCreateInstanceForm:function(){null!=this.CreateWfInstanceForm&&this.CreateWfInstanceForm.destroy(),this.CreateWfInstanceForm=null},createInstance:function(n){this.hideTable(),this.showCreateInstanceForm&&this.showCreateInstanceForm.detach(),this.showCreateInstanceForm(n)},createHandledCallback:function(n){this.hideCreateInstanceForm(),this.bpmnDiagram&&this.bpmnDiagram.destroy(),this.showTable(),1==n&&setTimeout(function(){this.regionEventBus.publish("something-changed","wfinstances")}.bind(this),2e3)}})});