/* Copyright (c) Ericsson 2015 */

define("styles!widget/WfCounter/WfCounter.less",function(){return".eaWorkflowManager-WfCounter-count {\n  width: 90px;\n  float: left;\n  padding: 2px;\n  text-align: center;\n  font-size: 8rem;\n}\n.eaWorkflowManager-WfCounter-countLabel {\n  padding-left: 100px;\n}\n"}),define("text!widget/WfCounter/WfCounter.html",function(){return'<div class="eaWorkflowManager-WfCounter">\r\n	<div class="eaWorkflowManager-WfCounter-count"></div>\r\n	<div class="eaWorkflowManager-WfCounter-countLabel"></div>\r\n</div>'}),define("widget/WfCounter/WfCounterView",["jscore/core","text!./WfCounter.html","styles!./WfCounter.less"],function(e,t,n){return e.View.extend({getTemplate:function(){return t},getStyle:function(){return n},setCount:function(e){this.getElement().find(".eaWorkflowManager-WfCounter-count").setText(e)},setCountLabel:function(e){this.getElement().find(".eaWorkflowManager-WfCounter-countLabel").element.innerHTML=e},getSpan:function(){return this.getElement().find(".eaWorkflowManager-WfCounter-count")},getFont:function(){var e=this.getElement().find(".eaWorkflowManager-WfCounter-count"),t=window.getComputedStyle(e.element,null).getPropertyValue("font-size"),n=parseFloat(t);return n},setFont:function(e){var t=this.getElement().find(".eaWorkflowManager-WfCounter-count");t.element.style.setProperty("font-size",e+"rem",null)},getCount:function(){return this.getElement().find(".eaWorkflowManager-WfCounter-count").getText()},getCountLabel:function(){return this.getElement().find(".eaWorkflowManager-WfCounter-countLabel")}})}),define("widget/WfCounter/WfCounter",["jscore/core","./WfCounterView","3pps/wfs/WfCountsClient"],function(e,t,n){return e.Widget.extend({View:t,setCount:function(e){"WfDefinition"===e?(n.getDefinitionCount({latest:!0,success:function(e){this.view.setCount(e),this.resize()}.bind(this)}),this.view.setCountLabel("Workflow</br>Definitions")):"WfInstances"===e?(n.getWfWorkflowInstancesCount({active:!0,sortBy:"instanceId",sortOrder:"asc",success:function(e){this.view.setCount(e),this.resize()}.bind(this)}),this.view.setCountLabel("Workflow</br>Instances")):"WfActiveTasks"===e?(n.getWfActiveTasksCount({active:!0,sortBy:"instanceId",sortOrder:"asc",success:function(e){this.view.setCount(e),this.resize()}.bind(this)}),this.view.setCountLabel("Active</br>Tasks")):"WfInstance"===e?(n.getWorkflowInstanceTotal({sortBy:"instanceId",sortOrder:"asc",success:function(e){this.view.setCount(e),this.resize()}.bind(this)}),this.view.setCountLabel("Workflow</br>Instances")):"WfInstanceActive"===e?(n.getWorkflowInstanceActive({active:!0,suspended:!1,success:function(e){this.view.setCount(e),this.resize()}.bind(this)}),this.view.setCountLabel("Active</br>Instances")):"WfInstanceCancelled"===e?(n.getWorkflowInstanceCancelled({active:!1,suspended:!0,success:function(e){this.view.setCount(e),this.resize()}.bind(this)}),this.view.setCountLabel("Suspended</br>Instances")):"WfTasksTotal"===e?(n.getTasksTotal({success:function(e){this.view.setCount(e),this.resize()}.bind(this)}),this.view.setCountLabel("Total</br>Tasks")):"WfTasksActive"===e?(n.getTasksActive({active:!0,suspended:!1,success:function(e){this.view.setCount(e),this.resize()}.bind(this)}),this.view.setCountLabel("Active</br>Tasks")):"WfTasksCancelled"===e&&(n.getTasksCancelled({active:!1,suspended:!0,success:function(e){this.view.setCount(e),this.resize()}.bind(this)}),this.view.setCountLabel("Suspended</br>Tasks"))},setCountWithPid:function(e,t){"WfInstance"===e?(n.getWorkflowInstanceTotal({processDefinitionId:t,success:function(e){this.view.setCount(e),this.resize()}.bind(this)}),this.view.setCountLabel("Workflow</br>Instances")):"WfInstanceActive"===e?(n.getWorkflowInstanceActive({active:!0,suspended:!1,processDefinitionId:t,success:function(e){this.view.setCount(e),this.resize()}.bind(this)}),this.view.setCountLabel("Active</br>Instances")):"WfInstanceCancelled"===e&&(n.getWorkflowInstanceCancelled({active:!1,suspended:!0,processDefinitionId:t,success:function(e){this.view.setCount(e),this.resize()}.bind(this)}),this.view.setCountLabel("Suspended</br>Instances"))},resize:function(){parseInt(this.view.getCount())>999?this.view.setFont(3.5):parseInt(this.view.getCount())>99&&this.view.setFont(5)}})});