/* Copyright (c) Ericsson 2015 */

define("styles!widget/WfAllDefinitions/WfAllDefinitions.less",function(){return".eaNFE_automation_UI-WfAllDefinitions {\n  padding-top: 8px;\n}\n.eaNFE_automation_UI-WfAllDefinitions-SectionHeading-Title {\n  float: left;\n}\n.eaNFE_automation_UI-WfAllDefinitions-SectionHeading-Filter {\n  padding-top: 18px;\n  float: right;\n}\n.eaNFE_automation_UI-WfAllDefinitions-contentTable {\n  max-height: 770px;\n  overflow: auto;\n  min-height: auto;\n}\n.eaNFE_automation_UI-WfAllDefinitions-contentTable-buttonRefresh {\n  float: left;\n  vertical-align: bottom;\n  margin-left: 15px;\n  margin-top: 10px;\n  padding-top: 5px;\n  cursor: pointer;\n  cursor: hand;\n}\n.eaNFE_automation_UI-WfAllDefinitions-contentTable-BottomDivider {\n  border-bottom: 1px solid #666666;\n  width: 1371px;\n  padding-bottom: 5px;\n}\n.eaNFE_automation_UI-WfAllDefinitions-contentForm {\n  vertical-align: top;\n}\n"}),define("text!widget/WfAllDefinitions/WfAllDefinitions.html",function(){return'<div class="eaNFE_automation_UI-WfAllDefinitions">\r\n    <div class="ebLayout-SectionHeading eaNFE_automation_UI-WfAllDefinitions-SectionHeading">\r\n        <div class="eaNFE_automation_UI-WfAllDefinitions-SectionHeading-Title"><h2>Workflow Definitions</h2>\r\n        	<div class="eaNFE_automation_UI-WfAllDefinitions-contentTable-buttonRefresh"><i class="ebIcon ebIcon_refresh"></i></div>\r\n        </div>\r\n    </div>\r\n    <div class="eaNFE_automation_UI-WfAllDefinitions-contentTable eb_scrollbar"></div>\r\n    <div class="eaNFE_automation_UI-WfAllDefinitions-contentForm"></div>\r\n    <div class="eaNFE_automation_UI-WfAllDefinitions-contentTable-BottomDivider"></div>\r\n</div>\r\n'}),define("widget/WfAllDefinitions/WfAllDefinitionsView",["jscore/core","text!./WfAllDefinitions.html","styles!./WfAllDefinitions.less"],function(t,n,e){return t.View.extend({getTemplate:function(){return n},getStyle:function(){return e},getFilterLink:function(){return this.getElement().find(".eaNFE_automation_UI-WfAllDefinitions-SectionHeading-Filter-link")},getTableContent:function(){return this.getElement().find(".eaNFE_automation_UI-WfAllDefinitions-contentTable")},getFormContent:function(){return this.getElement().find(".eaNFE_automation_UI-WfAllDefinitions-contentForm")},getRefreshButton:function(){return this.getElement().find(".eaNFE_automation_UI-WfAllDefinitions-contentTable-buttonRefresh")}})}),define("widget/WfAllDefinitions/WfAllDefinitions",["jscore/core","./WfAllDefinitionsTable/WfAllDefinitionsTable","./CreateWfInstanceForm/CreateWfInstanceForm","../WfDiagram/WfDiagram","./WfAllDefinitionsView"],function(t,n,e,i,o){return t.Widget.extend({View:o,onViewReady:function(){this.regionEventBus=this.options.regionContext.eventBus,this.currentFilterShowAll=!1,this.CreateWfInstanceForm=null,this.showTable()},showTable:function(){this.hideTable(),this.WfAllDefinitionsTable=new n({showAllVersions:this.currentFilterShowAll,showActionButtons:this.options.showActionButtons,regionEventBus:this.options.regionContext.eventBus}),this.WfAllDefinitionsTable.attachTo(this.view.getTableContent()),this.tableContentHeight&&this.view.getTableContent().setStyle("height",this.tableContentHeight),this.WfAllDefinitionsTable.options.regionEventBus.subscribe("createinstance",function(t){this.createInstance(t)}.bind(this))},hideTable:function(){null!=this.WfAllDefinitionsTable&&(this.tableContentHeight=this.view.getTableContent().getStyle("height"),this.WfAllDefinitionsTable.destroy(),this.WfAllDefinitionsTable=null,this.view.getTableContent().setStyle("height","0px"))},showCreateInstanceForm:function(t){this.hideCreateInstanceForm(),this.CreateWfInstanceForm=new e({minHeight:this.tableContentHeight,wfDefinitionModel:t,createHandledCallback:this.createHandledCallback.bind(this),regionEventBus:this.options.regionContext.eventBus}),this.CreateWfInstanceForm.attachTo(this.view.getFormContent())},hideCreateInstanceForm:function(){null!=this.CreateWfInstanceForm&&this.CreateWfInstanceForm.destroy(),this.CreateWfInstanceForm=null},createInstance:function(t){this.hideTable(),this.showCreateInstanceForm(t)},createHandledCallback:function(t){this.hideCreateInstanceForm(),this.bpmnDiagram&&this.bpmnDiagram.destroy(),this.options.regionContext.eventBus.publish("removeDefinitionTable","removeTable"),1==t&&setTimeout(function(){this.options.regionContext.eventBus.publish("something-changed","wfinstances")}.bind(this),2e3)}})});