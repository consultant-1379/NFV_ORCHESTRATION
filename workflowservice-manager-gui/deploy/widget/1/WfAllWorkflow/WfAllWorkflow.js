/* Copyright (c) Ericsson 2015 */

define("styles!widget/WfAllWorkflow/WfAllWorkflow.less",function(){return".eaNFE_automation_UI-WfAllWorkflow {\n  padding-top: 8px;\n}\n.eaNFE_automation_UI-WfAllWorkflow-SectionHeading-Title {\n  float: left;\n}\n.eaNFE_automation_UI-WfAllWorkflow-SectionHeading-Extra {\n  padding-top: 10px;\n  padding-bottom: 10px;\n}\n.eaNFE_automation_UI-WfAllWorkflow-SectionHeading-Filter {\n  padding-top: 10px;\n  float: right;\n}\n.eaNFE_automation_UI-WfAllWorkflow-contentTable {\n  max-height: 770px;\n  overflow: auto;\n  min-height: auto;\n}\n.eaNFE_automation_UI-WfAllWorkflow-contentTable-buttonRefresh {\n  float: left;\n  vertical-align: bottom;\n  margin-left: 15px;\n  margin-top: 10px;\n  padding-top: 5px;\n  cursor: pointer;\n  cursor: hand;\n}\n.eaNFE_automation_UI-WfAllWorkflow-contentTable-BottomDivider {\n  border-bottom: 1px solid #666666;\n  width: 100%;\n  padding-bottom: 5px;\n}\n"}),define("text!widget/WfAllWorkflow/WfAllWorkflow.html",function(){return'<div class="eaNFE_automation_UI-WfAllWorkflow">\r\n    <div class="ebLayout-SectionHeading eaNFE_automation_UI-WfAllWorkflow-SectionHeading">\r\n        <div class="eaNFE_automation_UI-WfAllWorkflow-SectionHeading-Title"><h2>Workflow Instances</h2>\r\n            <div class="eaNFE_automation_UI-WfAllWorkflow-contentTable-buttonRefresh"><i class="ebIcon ebIcon_refresh"></i></div>\r\n        </div>\r\n        <div class="eaNFE_automation_UI-WfAllWorkflow-SectionHeading-Filter"></div>\r\n    </div>\r\n    <div class="eaNFE_automation_UI-WfAllWorkflow-contentTable eb_scrollbar"></div>\r\n    <div class="eaNFE_automation_UI-WfAllWorkflow-contentTable-BottomDivider"></div>\r\n    <div class="eaNFE_automation_UI-WfAllWorkflow-contentTablePagination"></div>\r\n    <div class="eaNFE_automation_UI-WfAllWorkflow-contentTaskForm"></div>\r\n</div>\r\n'}),define("widget/WfAllWorkflow/WfAllWorkflowView",["jscore/core","text!./WfAllWorkflow.html","styles!./WfAllWorkflow.less"],function(t,e,i){return t.View.extend({getTemplate:function(){return e},getStyle:function(){return i},getTableContent:function(){return this.getElement().find(".eaNFE_automation_UI-WfAllWorkflow-contentTable")},getPagination:function(){return this.getElement().find(".eaNFE_automation_UI-WfAllWorkflow-contentTable")},getTaskFormContent:function(){return this.getElement().find(".eaNFE_automation_UI-WfAllWorkflow-contentTaskForm")},getRefreshButton:function(){return this.getElement().find(".eaNFE_automation_UI-WfAllWorkflow-contentTable-buttonRefresh")}})}),define("widget/WfAllWorkflow/WfAllWorkflow",["jscore/core","widgets/SelectBox","widgets/Pagination","../WfProgress/WfProgress","./WfAllWorkflowTable/WfAllWorkflowTable","./WfAllWorkflowView","3pps/wfs/WfInstanceClient","../WfUsertasks/TaskForm/TaskForm"],function(t,e,i,o,n,s,l,r){return t.Widget.extend({View:s,onViewReady:function(){this.filter=this.options.filter?this.options.filter:"all",this.regionEventBus=this.options.regionContext.eventBus,this.refreshButtonVisible=null!=this.options.refreshButtonVisible?this.options.refreshButtonVisible:!0,this.filterValueActive=null!=this.options.filterValueActive?this.options.filterValueActive:!0,this.showingProgress=null!=this.options.showingProgress?this.options.showingProgress:!0,this.showingDiagram=null!=this.options.showingDiagram?this.options.showingDiagram:!0,this.view.getRefreshButton().addEventHandler("click",function(){this.trigger("updateServiceCallAllDefinitions","updateAllDefinitions"),this.refreshButtonClicked(),this.regionEventBus.publish("refreshCounters","refreshCounters"),this.regionEventBus.publish("instanceTable-refreshed","refresh")}.bind(this)),this.view.getRefreshButton().setStyle("visibility",1==this.refreshButtonVisible?"visible":"hidden"),this.showTable(this.filter)},update:function(){this.trigger("updateServiceCallAllDefinitions","updateAllDefinitions"),this.refreshButtonClicked(),this.regionEventBus.publish("refreshCounters","refreshCounters"),this.regionEventBus.publish("instanceTable-refreshed","refresh")},showTable:function(t){this.hideTable(),this.filter=t,this.WfAllWorkflowTable=new n({offset:0,limit:19,sortBy:"startTime",sortOrder:"desc",showActive:!0,showCompleted:!1,filter:this.filter,regionEventBus:this.options.regionContext.eventBus}),this.WfAllWorkflowTable.attachTo(this.view.getTableContent()),this.tableContentHeight&&this.view.getTableContent().setStyle("height","auto")},refreshButtonClicked:function(){this.showTable(this.filter),null!=this.WfProgress&&this.WfProgress.hideDiagram(),this.hideProgress()},hideTable:function(){null!=this.WfAllWorkflowTable&&(this.tableContentHeight=this.view.getTableContent().getStyle("height"),this.WfAllWorkflowTable.destroy(),this.WfAllWorkflowTable=null,this.view.getTableContent().setStyle("height","0px"))},hidePagination:function(){null!=this.pagination&&(this.pagination.destroy(),this.pagination=null)},showProgress:function(t,e){this.hideProgress(),this.WfProgress=new o({regionEventBus:this.options.regionContext.eventBus,ids:t,showingDiagram:e,doneCallback:this.progressClosed.bind(this)}),this.regionEventBus.publish("display-progress",["progress",this.WfProgress]),t.hasOwnProperty("childExecutionId")&&this.showExtra("Showing progress for child Id: "+t.childExecutionId.substring(0,8))},progressClosed:function(){this.progressIds.hasOwnProperty("childExecutionId")||this.progressIds.hasOwnProperty("subProcessId")?(delete this.progressIds.childExecutionId,delete this.progressIds.childDefinitionId,delete this.progressIds.subProcessId,this.hideProgress(),this.showProgress(this.progressIds,!1)):(this.hideProgress(),this.selectBox.enable(),this.showTable(this.filter),!this.getFilterValue().liveView&&this.allowPagination&&this.showPagination())},hideProgress:function(){null!=this.WfProgress&&(this.WfProgress.destroy(),this.WfProgress=null)}})});