/* Copyright (c) Ericsson 2014 */
define('text',{load:function(e){throw new Error('Dynamic load not allowed: '+e)}});define('styles',{load:function(e){throw new Error('Dynamic load not allowed: '+e)}});define('template',{load:function(e){throw new Error('Dynamic load not allowed: '+e)}});define('json',{load:function(e){throw new Error('Dynamic load not allowed: '+e)}});
define("widgets/utils/keyboardUtils",[],function(){"use strict";var t={},e={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46},i=function(e,i){var n,s=e.originalEvent.keyCode;return Object.keys(i).some(function(e){return t[e.toUpperCase()]===s?(n=i[e],!0):void 0}),n?n(e):void 0},n=function(t,e){if(!t||!e)throw new Error("Missing event argument");return t.addEventHandler("keydown",function(t){return i(t,e)})},s=function(t,e){e&&t.removeEventHandler(e)};return Object.keys(e).forEach(function(i){Object.defineProperty(t,i,{value:e[i],writable:!1})}),t.addKeyHandler=n,t.removeKeyHandler=s,t}),define("widgets/ItemsControl/ItemsControl",["widgets/WidgetCore","widgets/ComponentList","../utils/keyboardUtils"],function(t,e,i){"use strict";function n(){this.keyBoardControl={arrow_up:l.bind(this),arrow_down:a.bind(this),enter:h.bind(this),tab:d.bind(this),escape:r.bind(this)}}function s(){var t=this.getFocusableElement().getValue(),e=o(t);t!==e&&this.getFocusableElement().setValue(e),this.options.autoComplete&&this.options.autoComplete.caseInsensitive&&(e=e.toLowerCase()),this.onFocusableElementInput();var i=!1,n=this.options.items.filter(function(t){if("separator"===t.type&&i)return!0;var n;return n=this.options.autoComplete&&this.options.autoComplete.caseInsensitive?t._lowerCaseName&&-1!==t._lowerCaseName.indexOf(e)||t._lowerCaseTitle&&-1!==t._lowerCaseTitle.indexOf(e):t.name&&-1!==t.name.indexOf(e)||t.title&&-1!==t.title.indexOf(e),n&&(i=!0),n}.bind(this));if(0===n.length)this.showMessageInfo(this.autoComplete.message.notFound);else{var s=n[n.length-1];"separator"===s.type&&n.pop(),this.hideMessageInfo(),this.setDisplayedItems(n)}this.showList()}function o(t){return t.replace(/\r?\n/g,"")}function a(t){this._keyNavigationActive===!0&&(this.componentList.isVisible()?this.componentList.focusNextItem():this.showList(),t.preventDefault())}function l(t){this._keyNavigationActive===!0&&(this.componentList.isVisible()&&this.componentList.focusPreviousItem(),t.preventDefault())}function h(t){this._keyNavigationActive===!0&&(this.componentList.isVisible()?this.componentList.selectListItem():this.showList()),t.preventDefault()}function d(){this._keyNavigationActive===!0&&this.componentList.isVisible()&&this.componentList.selectListItem(),this.hideList()}function r(){this.hideList()}return t.extend({onViewReady:function(){var t=this.options;this.autoComplete={},this.autoComplete.message={};var e="Items not found.";if(void 0===t.autoComplete)this.autoComplete.enabled=void 0!==this.getFocusableElement().getValue,this.autoComplete.message.notFound=e;else{this.autoComplete.enabled=t.autoComplete.enabled!==!1;var i=void 0!==t.autoComplete.message&&void 0!==t.autoComplete.message.notFound;this.autoComplete.message.notFound=i?t.autoComplete.message.notFound:e}t.enabled===!1?this.disable():this.enable(),this.setItems(t.items||[]),this.setModifiers(t.modifiers||[]);var s=this.getElement();s.addEventHandler("change",function(){this.trigger("change")},this),s.addEventHandler("focus",function(){this.trigger("focus")},this),s.addEventHandler("click",function(){this.getFocusableElement().focus(),this.trigger("click"),this.toggle()},this),n.call(this),this.onControlReady(),this.enabled!==!1&&(this.enableKeyboardControl(),this._keyNavigationActive=!0)},getComponentListClass:function(){return e},getFocusableElement:function(){return this.getElement()},onFocusableElementInput:function(){},onControlReady:function(){},setWidth:function(t){this.options.width=t,this.componentList&&(this.componentList.options.width=t)},setHeight:function(t){this.options.height=t,this.componentList&&(this.componentList.options.height=t)},setItems:function(t){if(this.options.items=t,this.options.autoComplete&&this.options.autoComplete.caseInsensitive)for(var e=0;e<t.length;e++)t[e].name&&(t[e]._lowerCaseName=t[e].name.toLowerCase()),t[e].title&&(t[e]._lowerCaseTitle=t[e].title.toLowerCase());this.setDisplayedItems(t)},setDisplayedItems:function(t){if(this.componentList&&(this.componentList.destroy(),delete this.componentList),t.length>0){if(void 0===this.componentList){var e=this.getComponentListClass();this.componentList=new e({items:t,parent:this.getElement(),persistent:this.options.persistent,width:this.options.width,height:this.options.height,selectDeselectAll:this.options.selectDeselectAll===!0,animate:this.options.animate}),this.componentList.addEventHandler("itemSelected",this.onComponentListClick,this),this.enabled===!1?this.disable():this.enable()}}else this.getElement().setModifier("disabled"),this.onDisable();this.items=t,this.onItemsSet()},onItemsSet:function(){},onListShow:function(){},onListHide:function(){},showMessageInfo:function(t){this.componentList&&this.enabled&&(this.componentList.showMessageInfo(t),this._keyNavigationActive=!1)},hideMessageInfo:function(){this.componentList&&this.enabled&&(this.componentList.hideMessageInfo(),this._keyNavigationActive=!0)},reRenderListIfNeeded:function(){this.componentList&&this.enabled&&this.componentList.isVisible()&&this.componentList.show()},showList:function(){this.componentList&&this.enabled&&this.componentList.show()},hideList:function(){this.componentList&&this.enabled&&this.componentList.hide()},toggle:function(){this.componentList&&this.enabled&&(this.componentList.toggle(),this.componentList.isShowing?this.onListShow():this.onListHide())},enable:function(){this.enabled=!0,this.getElement().removeModifier("disabled"),this.getElement().addEventHandler("click",this.onParentClick,this),void 0===this._acInputEvtId&&this.autoComplete.enabled===!0&&(this._acInputEvtId=this.getFocusableElement().addEventHandler("input",s,this)),this.onEnable()},onEnable:function(){},disable:function(){this.enabled=!1,this.getElement().setModifier("disabled"),this._acInputEvtId&&(this.getFocusableElement().removeEventHandler(this._acInputEvtId),delete this._acInputEvtId),this.onDisable()},onDisable:function(){},enableKeyboardControl:function(){this.keyboardControlEnabled=!0,void 0===this._kbCtrlEvtId&&(this._kbCtrlEvtId=i.addKeyHandler(this.getFocusableElement(),this.keyBoardControl))},disableKeyboardControl:function(){this.keyboardControlEnabled=!1,i.removeKeyHandler(this.getFocusableElement(),this._kbCtrlEvtId),delete this._kbCtrlEvtId},isKeyboardControlled:function(){return this.keyboardControlEnabled},onParentClick:function(){this.getElement().trigger("focus")},onComponentListClick:function(){var t=this.componentList.getSelectedValue();t&&(this.onItemSelected(t),this.getFocusableElement().focus())},onItemSelected:function(){}})}),define("widgets/ItemsControl",["widgets/ItemsControl/ItemsControl"],function(t){return t});