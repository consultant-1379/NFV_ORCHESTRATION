/* Copyright (c) Ericsson 2014 */
define('text',{load:function(e){throw new Error('Dynamic load not allowed: '+e)}});define('styles',{load:function(e){throw new Error('Dynamic load not allowed: '+e)}});define('template',{load:function(e){throw new Error('Dynamic load not allowed: '+e)}});define('json',{load:function(e){throw new Error('Dynamic load not allowed: '+e)}});
define("text!widgets/Pagination/_pagination.html",[],function(){return'<ul class="ebPagination">\n	<li class="ebPagination-previous">\n		<a class="ebPagination-previousAnchor" href="#"></a>\n	</li>\n	<li class="ebPagination-pagesContainer">\n		<ul class="ebPagination ebPagination-pages">\n		</ul>\n	</li>\n	<li class="ebPagination-next">\n		<a class="ebPagination-nextAnchor" href="#"></a>\n	</li>\n</ul>\n'}),define("widgets/Pagination/PaginationView",["jscore/core","text!./_pagination.html"],function(e,t){var i=e.View.extend({afterRender:function(){var e=this.getElement();this.previous=e.find("."+i.EL_PREVIOUS_CLASS),this.previousAnchor=e.find("."+i.EL_PREVIOUS_ANCHOR_CLASS),this.nextAnchor=e.find("."+i.EL_NEXT_ANCHOR_CLASS),this.pages=e.find("."+i.EL_PAGES_CLASS)},getTemplate:function(){return t},getPreviousLi:function(){return this.previous},getPrevious:function(){return this.previousAnchor},getWrapper:function(){return this.getElement()},getPages:function(){return this.pages},getNext:function(){return this.nextAnchor}},{EL_PAGES_CLASS:"ebPagination-pages",EL_PREVIOUS_CLASS:"ebPagination-previous",EL_PREVIOUS_ANCHOR_CLASS:"ebPagination-previousAnchor",EL_NEXT_ANCHOR_CLASS:"ebPagination-nextAnchor"});return i}),define("widgets/Pagination/Pagination",["jscore/core","widgets/WidgetCore","./PaginationView","widgets/utils/domUtils"],function(e,t,i){"use strict";function n(e,t){t._getHTMLElement().parentNode.insertBefore(e._getHTMLElement(),t._getHTMLElement())}function a(e,t){t._getHTMLElement().parentNode.insertBefore(e._getHTMLElement(),t._getHTMLElement().nextSibling)}function s(e,t,i){var n=this.createPage(e,this.selectedPage===e);return t?t.call(this,n,i):this.view.getPages().append(n),this._freeSpace-=this.getPageWidth(e),this._currPage=this.selectedPage===e?n:this._currPage,n}return t.extend({View:i,onViewReady:function(){this.totalPages=this.options.pages||0,this.selectedPage=this.options.selectedPage||1,this.url=this.options.url,this.view.getPrevious().addEventHandler("click",this.previousPageClickHandler,this),this.view.getNext().addEventHandler("click",this.nextPageClickHandler,this),this._windowEvtId=e.Window.addEventHandler("resize",this.redraw.bind(this)),this.view.getElement().setStyle("max-width",this.options.maxWidth||"500px")},onDestroy:function(){this._windowEvtId&&e.Window.removeEventHandler(this._windowEvtId)},onDOMAttach:function(){this.setPage(this.selectedPage)},previousPageClickHandler:function(e){this.previousPage(),this.view.getPrevious().setAttribute("href","#"+this.getUrl(this.selectedPage)),this.url||e.preventDefault()},nextPageClickHandler:function(e){this.nextPage(),this.view.getNext().setAttribute("href","#"+this.getUrl(this.selectedPage)),this.url||e.preventDefault()},pageClickHandler:function(e,t){this.setPage(e),this.url||t.preventDefault()},calculateFreeSpace:function(){var e=this.view.getWrapper().getProperty("offsetWidth")-this._pageMargin;return Math.floor(e-2*this._minWidth)},getPageWidth:function(e){return Math.max((0===e?1:e.toString().length)*this._numberWidth+this._pageMargin+this._pagePadding,this._minWidth)},calculateMinPageWidth:function(){var e=window.getComputedStyle(this.view.getPreviousLi()._getHTMLElement(),null),t=parseInt(e.getPropertyValue("margin-left"),10),i=parseInt(e.getPropertyValue("margin-right"),10);this._pagePadding=8,this._pageMargin=t+i,this._minWidth=this.view.getPrevious().getProperty("offsetWidth")+this._pageMargin},calculateNumberWidth:function(t){var i=e.Element.parse('<li class="ebPagination-entry"><a style="width:auto" class="ebPagination-entryAnchor ebPagination-entryAnchor_current" href="#">'+t+"</a></li>");this.view.getPages().append(i),this._numberWidth=i.children()[0].getProperty("offsetWidth")-8,i.remove()},redraw:function(){this.removePages(),this.calculateNumberWidth(1),this.calculateMinPageWidth(),this._freeSpace=this.calculateFreeSpace();var e=this.selectedPage-1,t=this.selectedPage+1,i=s.call(this,1);1!==this.selectedPage&&this.selectedPage!==this.totalPages&&s.call(this,this.selectedPage);var r;1!==this.totalPages&&(r=s.call(this,this.totalPages));for(var h=this._currPage,g=this._currPage;this._freeSpace>0;)if(t<this.totalPages&&this._freeSpace-this.getPageWidth(t)>=0&&(g=s.call(this,t,a,g),t++),e>1&&this._freeSpace-this.getPageWidth(e)>=0&&(h=s.call(this,e,n,h),e--),1>=e&&t>=this.totalPages||this._freeSpace-this.getPageWidth(e)<0&&this._freeSpace-this.getPageWidth(t)<0){e>1&&(this.view.getPages().children()[1].remove(),a(this.createDots(),i)),t<this.totalPages&&(this.view.getPages().children()[this.view.getPages().children().length-2].remove(),n(this.createDots(),r));break}this.view.getPrevious().removeModifier("disabled"),this.view.getNext().removeModifier("disabled"),1===this.selectedPage&&this.view.getPrevious().setModifier("disabled"),this.selectedPage===this.totalPages&&this.view.getNext().setModifier("disabled")},createDots:function(){var t=e.Element.parse('<li class="ebPagination-entry"><a class="ebPagination-entryAnchor ebPagination-entryAnchor_dots" href="#">...</a></li>');return t.children()[0].addEventHandler("click",function(e){e.preventDefault()}.bind(this)),t},previousPage:function(){this.selectedPage>1&&(this.selectedPage--,this.setPage(this.selectedPage))},nextPage:function(){this.selectedPage<this.totalPages&&(this.selectedPage++,this.setPage(this.selectedPage))},createPage:function(t,i){var n=e.Element.parse('<li class="ebPagination-entry"><a class="ebPagination-entryAnchor" href="#'+this.getUrl(t)+'">'+t+"</a></li>");return n.children()[0].addEventHandler("click",function(e){this.pageClickHandler(t,e)}.bind(this)),i&&n.children()[0].setModifier("current"),n},getUrl:function(e){return this.url&&"string"==typeof this.url?this.url+"/"+e:this.url&&"function"==typeof this.url?this.url(e):""},triggerCallback:function(e){this.options.onPageChange&&this.options.onPageChange(e),this.trigger("pagechange",e)},removePages:function(){for(var e=this.view.getPages().children(),t=e.length;t--;)e[t].remove()},setPage:function(e){e>0&&e<=this.totalPages&&(this.selectedPage=e,this.redraw(),this.triggerCallback(e))},setPages:function(e){e>0&&(this.totalPages=e,this.selectedPage>e?this.setPage(e):this.redraw())}})}),define("widgets/Pagination",["widgets/Pagination/Pagination"],function(e){return e});