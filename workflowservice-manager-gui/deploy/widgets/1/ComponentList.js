/* Copyright (c) Ericsson 2014 */
define('text',{load:function(e){throw new Error('Dynamic load not allowed: '+e)}});define('styles',{load:function(e){throw new Error('Dynamic load not allowed: '+e)}});define('template',{load:function(e){throw new Error('Dynamic load not allowed: '+e)}});define('json',{load:function(e){throw new Error('Dynamic load not allowed: '+e)}});
define("styles!widgets/ComponentList/_componentList.less",[],function(){return".elWidgets-ComponentList_animated {\n  opacity: 0;\n  transition: opacity .3s;\n}\n.elWidgets-ComponentList_show {\n  opacity: 1;\n}\n"}),define("template!widgets/ComponentList/_groupedComponentList.html",["jscore/handlebars/handlebars"],function(t){return t.template(function(t,e,i,n,s){function o(t,e){var n,s,o="";return o+='\n    <li class="ebComponentList-group">\n        <div class="ebComponentList-group-header">',d=i.header,n=d||t.header,typeof n===I?n=n.call(t,{hash:{}}):n===L&&(n=b.call(t,"header",{hash:{}})),o+=C(n)+'</div>\n        <ul class="ebComponentList-inner">\n          ',d=i.items,n=d||t.items,s=i.each,u=v.program(2,r,e),u.hash={},u.fn=u,u.inverse=v.noop,n=s.call(t,n,u),(n||0===n)&&(o+=n),o+="\n        </ul>\n    </li>\n"}function r(t,e){var n,s,o="";return o+="\n              ",d=i._action,n=d||t._action,s=i["if"],u=v.program(3,a,e),u.hash={},u.fn=u,u.inverse=v.noop,n=s.call(t,n,u),(n||0===n)&&(o+=n),o+="\n              ",d=i.link,n=d||t.link,s=i["if"],u=v.program(6,h,e),u.hash={},u.fn=u,u.inverse=v.noop,n=s.call(t,n,u),(n||0===n)&&(o+=n),o+="\n              ",d=i._separator,n=d||t._separator,s=i["if"],u=v.program(9,m,e),u.hash={},u.fn=u,u.inverse=v.noop,n=s.call(t,n,u),(n||0===n)&&(o+=n),o+="\n          "}function a(t,e){var n,s,o="";return o+='<li class="ebComponentList-item" ',d=i.title,n=d||t.title,s=i["if"],u=v.program(4,l,e),u.hash={},u.fn=u,u.inverse=v.noop,n=s.call(t,n,u),(n||0===n)&&(o+=n),o+=">",d=i.name,n=d||t.name,typeof n===I?n=n.call(t,{hash:{}}):n===L&&(n=b.call(t,"name",{hash:{}})),o+=C(n)+"</li>"}function l(t){var e,n="";return n+=' title="',d=i.title,e=d||t.title,typeof e===I?e=e.call(t,{hash:{}}):e===L&&(e=b.call(t,"title",{hash:{}})),n+=C(e)+'"'}function h(t,e){var n,s,o="";return o+='<li class="ebComponentList-item" ',d=i.title,n=d||t.title,s=i["if"],u=v.program(7,c,e),u.hash={},u.fn=u,u.inverse=v.noop,n=s.call(t,n,u),(n||0===n)&&(o+=n),o+='><a class="ebComponentList-link" href="',d=i.link,n=d||t.link,typeof n===I?n=n.call(t,{hash:{}}):n===L&&(n=b.call(t,"link",{hash:{}})),o+=C(n)+'">',d=i.name,n=d||t.name,typeof n===I?n=n.call(t,{hash:{}}):n===L&&(n=b.call(t,"name",{hash:{}})),o+=C(n)+"</a></li>"}function c(t){var e,n="";return n+=' title="',d=i.title,e=d||t.title,typeof e===I?e=e.call(t,{hash:{}}):e===L&&(e=b.call(t,"title",{hash:{}})),n+=C(e)+'"'}function m(){return'<li class="ebComponentList-separator"></li>'}i=i||t.helpers;var p,f,d,u,g="",v=this,I="function",b=i.helperMissing,L=void 0,C=this.escapeExpression;return g+='<ul class="ebComponentList eb_scrollbar elWidgets-ComponentList">\n',d=i.items,p=d||e.items,f=i.each,u=v.program(1,o,s),u.hash={},u.fn=u,u.inverse=v.noop,p=f.call(e,p,u),(p||0===p)&&(g+=p),g+='\n<li class="ebComponentList-info">Items not found.</li>\n<li class="ebComponentList-loader"><div class="ebLoader"><div class="ebLoader-Holder"><span class="ebLoader-Dots"></span></div></div></li>\n</ul>\n'})}),define("template!widgets/ComponentList/_componentList.html",["jscore/handlebars/handlebars"],function(t){return t.template(function(t,e,i,n,s){function o(t,e){var n,s,o="";return o+="\n    ",f=i._action,n=f||t._action,s=i["if"],d=g.program(2,r,e),d.hash={},d.fn=d,d.inverse=g.noop,n=s.call(t,n,d),(n||0===n)&&(o+=n),o+="\n    ",f=i.link,n=f||t.link,s=i["if"],d=g.program(5,l,e),d.hash={},d.fn=d,d.inverse=g.noop,n=s.call(t,n,d),(n||0===n)&&(o+=n),o+="\n    ",f=i._separator,n=f||t._separator,s=i["if"],d=g.program(8,c,e),d.hash={},d.fn=d,d.inverse=g.noop,n=s.call(t,n,d),(n||0===n)&&(o+=n),o+="\n"}function r(t,e){var n,s,o="";return o+='<li class="ebComponentList-item" ',f=i.title,n=f||t.title,s=i["if"],d=g.program(3,a,e),d.hash={},d.fn=d,d.inverse=g.noop,n=s.call(t,n,d),(n||0===n)&&(o+=n),o+=">",f=i.name,n=f||t.name,typeof n===v?n=n.call(t,{hash:{}}):n===b&&(n=I.call(t,"name",{hash:{}})),o+=L(n)+"</li>"}function a(t){var e,n="";return n+=' title="',f=i.title,e=f||t.title,typeof e===v?e=e.call(t,{hash:{}}):e===b&&(e=I.call(t,"title",{hash:{}})),n+=L(e)+'"'}function l(t,e){var n,s,o="";return o+='<li class="ebComponentList-item" ',f=i.title,n=f||t.title,s=i["if"],d=g.program(6,h,e),d.hash={},d.fn=d,d.inverse=g.noop,n=s.call(t,n,d),(n||0===n)&&(o+=n),o+='><a class="ebComponentList-link" href="',f=i.link,n=f||t.link,typeof n===v?n=n.call(t,{hash:{}}):n===b&&(n=I.call(t,"link",{hash:{}})),o+=L(n)+'">',f=i.name,n=f||t.name,typeof n===v?n=n.call(t,{hash:{}}):n===b&&(n=I.call(t,"name",{hash:{}})),o+=L(n)+"</a></li>"}function h(t){var e,n="";return n+=' title="',f=i.title,e=f||t.title,typeof e===v?e=e.call(t,{hash:{}}):e===b&&(e=I.call(t,"title",{hash:{}})),n+=L(e)+'"'}function c(){return'<li class="ebComponentList-separator"></li>'}i=i||t.helpers;var m,p,f,d,u="",g=this,v="function",I=i.helperMissing,b=void 0,L=this.escapeExpression;return u+='<ul class="ebComponentList eb_scrollbar elWidgets-ComponentList ebComponentList_focus_forced">\n',f=i.items,m=f||e.items,p=i.each,d=g.program(1,o,s),d.hash={},d.fn=d,d.inverse=g.noop,m=p.call(e,m,d),(m||0===m)&&(u+=m),u+='\n<li class="ebComponentList-info">Items not found.</li>\n<li class="ebComponentList-loader"><div class="ebLoader"><div class="ebLoader-Holder"><span class="ebLoader-Dots"></span></div></div></li>\n</ul>\n'})}),define("widgets/ComponentList/ComponentListView",["jscore/core","template!./_componentList.html","template!./_groupedComponentList.html","styles!./_componentList.less","widgets/utils/domUtils"],function(t,e,i,n,s){"use strict";return t.View.extend({getTemplate:function(){var t=this.options.template;return t.items&&t.items[0]&&void 0!==t.items[0].items?(t.items.forEach(function(t){this.prepareItemsData(t.items)}.bind(this)),i(t)):(this.prepareItemsData(t.items),e(t))},getStyle:function(){return n},prepareItemsData:function(t){t.forEach(function(t){"separator"===t.type?t._separator=!0:t.link||(t._action=!0)})},getItems:function(){return s.findAll(".ebComponentList-item, .ebComponentList-separator",this.getElement())},getSelectableItems:function(){return s.findAll(".ebComponentList-item",this.getElement())},getMessageInfo:function(){return this.getElement().find(".ebComponentList-info")}})}),define("widgets/ComponentList/ComponentList",["jscore/core","widgets/WidgetCore","./ComponentListView","jscore/ext/utils/base/underscore","../utils/domUtils"],function(t,e,i,n,s){"use strict";function o(){var t=this.options.container||this.options.parent,e=t._getHTMLElement().getBoundingClientRect(),i=this._userOffsets||{};return i.top=i.top||0,i.left=i.left||0,{top:e.top+i.top,left:e.left+i.left}}return e.extend({view:function(){return new i({template:{items:this.items}})},init:function(t){this._userOffsets={top:0,left:0},this.fixedOffset=6,this.selectedItem=void 0,this.focusableItems=[],this.options=t||{},this.items=this.options.items||[],this.flatItems=n.flatten(this.items.map(function(t){return t.items||[t]}),!0)},onViewReady:function(){this.flatItems.forEach(function(t){t.type&&"separator"===t.type||this.focusableItems.push(t)}.bind(this)),this.view.getSelectableItems().forEach(function(t,e){t.addEventHandler("mousemove",function(t){(t.originalEvent.pageX!==this.mousePageX||t.originalEvent.pageY!==this.mousePageY)&&(this.mousePageX=t.originalEvent.pageX,this.mousePageY=t.originalEvent.pageY,this.resetCurrentItemFocus(),this.setFocusedItem(e))}.bind(this)),t.addEventHandler("click",function(t){t&&t.stopPropagation&&t.stopPropagation(),this.onListItemClicked.call(this,e)}.bind(this))}.bind(this)),this.options.animate&&this.getElement().setModifier("animated",void 0,"elWidgets-ComponentList"),this.focusableItems.length>0&&this.setFocusedItem(0)},onDestroy:function(){this.doHide()},getItems:function(){return this.items},getSelectedValue:function(){return this.selectedItem||{}},show:function(){if(this.deleteTransitionEvent(),this.render(),this.isShowing=!0,this.posInterval||(this.posInterval=setInterval(function(){var t=o.call(this);(this.position.top!==t.top||this.position.left!==t.left)&&this.hide()}.bind(this),1e3/24)),!this.options.persistent){var e=t.Element.wrap(document.documentElement);this.bodyEventId||(this.bodyEventId=e.addEventHandler("click",function(t){this.isClickTargetChildOfParent(t)||(e.removeEventHandler(this.bodyEventId),delete this.bodyEventId,this.hide())}.bind(this)))}this.options.animate&&this.getElement().setModifier("show",void 0,"elWidgets-ComponentList")},setPositionOffsets:function(t){this._userOffsets=t,this.render()},render:function(){this.getElement().detach();var e=this.options.width||this.options.parent.getProperty("offsetWidth")+"px",i=this.options.height||"250px",n=o.call(this);this.position=n;var s=n.top+this.options.parent.getProperty("offsetHeight")+this.fixedOffset;this.getElement().setStyle({position:"fixed",display:"block",top:s+"px",left:n.left+"px",width:e,"max-height":i}),t.Element.wrap(document.body).append(this.getElement());var r=this.getElement().getProperty("offsetHeight"),a=this.getElement().getProperty("offsetWidth"),l=window.innerHeight,h=window.innerWidth,c=this.options.parent.getProperty("offsetHeight"),m=this.options.parent.getProperty("offsetWidth");if(n.top+r+c+this.fixedOffset>l){var p=n.top-r-this.fixedOffset;if(this.getElement().setStyle({top:p+"px"}),0>p){var f=n.top-2*this.fixedOffset,d=l-s-3*this.fixedOffset,u=f>d?f:d,g=f>d?this.fixedOffset:s;this.getElement().setStyle({top:g+"px",maxHeight:u+"px"})}}n.left+a>h&&this.getElement().setStyle({left:n.left-(a-m)+"px"})},isClickTargetChildOfParent:function(t){if(t.originalEvent){var e=t.originalEvent.target||t.originalEvent.srcElement,i=this.options.parent._getHTMLElement();do if(e===i)return!0;while(null!==(e=e.parentElement)&&e!==document.body)}return!1},toggle:function(){this.isShowing=!this.isShowing,this.isShowing?this.show():this.hide()},deleteTransitionEvent:function(){this.transitionEvent&&(this.transitionEvent.destroy(),delete this.transitionEvent)},hide:function(){this.isShowing=!1,this.options.animate?(this.getElement().removeModifier("show","elWidgets-ComponentList"),this.deleteTransitionEvent(),this.transitionEvent=this.getElement().addEventHandler(s.transitionEventName,function(){this.doHide(),this.deleteTransitionEvent()}.bind(this))):this.doHide()},isVisible:function(){return this.isShowing},doHide:function(){clearInterval(this.posInterval),delete this.posInterval,this.getElement().detach()},showMessageInfo:function(t){this.resetCurrentItemFocus(),this.view.getMessageInfo().setText(t),this.getElement().setModifier("info","","ebComponentList"),this.selectedItem=void 0},hideMessageInfo:function(){this.getElement().removeModifier("info","ebComponentList")},setFocusedItem:function(t){t%=this.focusableItems.length,this._currentFocusedItem=this.view.getSelectableItems()[t],this._currentFocusedItem.setModifier("focused","","ebComponentList-item"),s.scrollIntoView(this._currentFocusedItem,this.getElement()),this._currentFocusedItem._indexInList=t,this.selectedItem=this.focusableItems[t]},focusPreviousItem:function(){var t=this.resetCurrentItemFocus();this.setFocusedItem(Math.max(t-1,0))},focusNextItem:function(){var t=this.resetCurrentItemFocus();this.setFocusedItem(Math.min(t+1,this.focusableItems.length-1))},resetCurrentItemFocus:function(){var t=-1;return void 0!==this._currentFocusedItem&&(this._currentFocusedItem.removeModifier("focused","ebComponentList-item"),t=this._currentFocusedItem._indexInList,delete this._currentFocusedItem),t},onListItemClicked:function(t){this.selectedItem=this.flatItems[t],this.resetCurrentItemFocus(),this.setFocusedItem(t),this.selectListItem()},selectListItem:function(){void 0!==this.selectedItem&&(this.trigger("itemSelected"),this.hide())}})}),define("widgets/ComponentList",["widgets/ComponentList/ComponentList"],function(t){return t});