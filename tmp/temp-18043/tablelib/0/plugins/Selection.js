/* Copyright (c) Ericsson 2014 */
define('text',{load:function(e){throw new Error('Dynamic load not allowed: '+e)}});define('styles',{load:function(e){throw new Error('Dynamic load not allowed: '+e)}});define('template',{load:function(e){throw new Error('Dynamic load not allowed: '+e)}});define('json',{load:function(e){throw new Error('Dynamic load not allowed: '+e)}});
define("styles!tablelib/plugins/selection/checkboxheadercell/CheckboxHeaderCell.less",[],function(){return".elTablelib-CheckboxHeaderCell-wrap {\n  text-align: center;\n  width: 100%;\n  margin-left: -2px;\n}\n"}),define("text!tablelib/plugins/selection/checkboxheadercell/CheckboxHeaderCell.html",[],function(){return'<th style="box-sizing: border-box;" class="elTablelib-CheckboxHeaderCell">\n    <div class="elTablelib-CheckboxHeaderCell-wrap">\n        <input class="ebCheckbox" type="checkbox" value="1"/>\n        <span class="ebCheckbox-inputStatus"></span>\n    </div>\n</th>'}),define("tablelib/plugins/selection/checkboxheadercell/CheckboxHeaderCellView",["jscore/core","text!./CheckboxHeaderCell.html","styles!./CheckboxHeaderCell.less"],function(e,t,n){return e.View.extend({getTemplate:function(){return t},getStyle:function(){return n},getCheckboxStatus:function(){return this.getElement().find(".ebCheckbox-inputStatus")}})}),define("tablelib/plugins/selection/checkboxheadercell/CheckboxHeaderCell",["../checkboxcell/CheckboxCell","./CheckboxHeaderCellView"],function(e,t){return e.extend({View:t,eventName:"checkheader",onCellReady:function(){this.getTable().setColumnWidth(this.getIndex(),"40px")},setTriple:function(e){e?this.view.getCheckboxStatus().setModifier("triple"):this.view.getCheckboxStatus().removeModifier("triple")}})}),define("styles!tablelib/plugins/selection/checkboxcell/CheckboxCell.less",[],function(){return".elTablelib-CheckboxCell-wrap {\n  text-align: center;\n  width: 100%;\n  margin-left: -2px;\n}\n"}),define("text!tablelib/plugins/selection/checkboxcell/CheckboxCell.html",[],function(){return'<td class="elTablelib-CheckboxCell">\n    <div class="elTablelib-CheckboxCell-wrap">\n        <input class="ebCheckbox" type="checkbox" value="1"/>\n        <span class="ebCheckbox-inputStatus"></span>\n    </div>\n</td>'}),define("tablelib/plugins/selection/checkboxcell/CheckboxCellView",["jscore/core","text!./CheckboxCell.html","styles!./CheckboxCell.less"],function(e,t,n){return e.View.extend({getTemplate:function(){return t},getStyle:function(){return n}})}),define("tablelib/plugins/selection/checkboxcell/CheckboxCell",["tablelib/Cell","./CheckboxCellView"],function(e,t){return e.extend({View:t,eventName:"check",onViewReady:function(){this.getElement().find(".ebCheckbox").addEventHandler("click",function(e){e.stopPropagation(),this.trigger()}.bind(this)),this.getElement().addEventHandler("click",function(e){e.stopPropagation(),this.check(!this.isChecked(),!0)}.bind(this))},check:function(e,t){var n=this.getElement().find(".ebCheckbox");n.getProperty("checked")!==e&&(n.setProperty("checked",e),t&&this.trigger())},setValue:function(){},isChecked:function(){return this.getElement().find(".ebCheckbox").getProperty("checked")},trigger:function(){this.getTable().trigger(this.eventName,this.getRow(),this.isChecked())}})}),define("tablelib/plugins/Plugin",["jscore/core"],function(e){var t=function(e){this.options=e||{},this.init.apply(this,arguments)};return t.prototype.init=function(){},t.prototype.getOptions=function(){return this.options},t.prototype.getTable=function(){return this._table},t.prototype.injections={before:{},after:{},newMethods:{}},t.extend=e.extend,t}),define("tablelib/plugins/selection/Selection",["jscore/core","../Plugin","./checkboxcell/CheckboxCell","./checkboxheadercell/CheckboxHeaderCell"],function(e,t,n,i){function l(){var e=this.getTable();this._lastSelectedRow=void 0,this.options.checkboxes&&(e._columns.unshift({cellType:n,headerCellType:i}),e.addEventHandler("checkheader",function(t,n){e.getRows().forEach(function(e){b.call(this,e,n)}.bind(this))}.bind(this)),e.addEventHandler("check",function(e,t){b.call(this,e,t)}.bind(this)))}function c(){for(var e=this.getTable().getHeaderRow().getCells(),t=0;t<e.length;t++)if(e[t]instanceof i)return t}function o(e){for(var t=this.getTable().getRows(),n=0;n<t.length;n++)if(t[n]===e)return n}function s(e,t){this["_timeout__"+e]||(this["_timeout__"+e]=setTimeout(function(){t.call(this),delete this["_timeout__"+e]}.bind(this)))}function h(e,t){var n=this.getTable(),i=n.getRows()[void 0!==t?t:n.getRows().length-1];this.options.selectableRows&&(i.getElement().addEventHandler("mousedown",function(e){e.originalEvent.shiftKey&&e.preventDefault()}),i.getElement().addEventHandler("click",function(e){var t=k.call(this);if(this.options.multiselect&&(e.originalEvent.ctrlKey||e.originalEvent.metaKey)||a.call(this),i!==this._lastSelectedRow){if(this.options.multiselect&&e.originalEvent.shiftKey)for(var l=o.call(this,i),c=o.call(this,this._lastSelectedRow),s=Math.min(l,c);s<=Math.max(l,c);s++)s!==l&&(d.call(this,n.getRows()[s],!0),n.trigger("rowselect",n.getRows()[s],n.getRows()[s]._isSelected));d.call(this,i,!i._isSelected),e.originalEvent.shiftKey&&1!==t.length||(this._lastSelectedRow=i)}else this._lastSelectedRow=void 0;n.trigger("rowselect",i,i._isSelected)}.bind(this)))}function a(){var e=k.call(this);e.forEach(function(e){d.call(this,e,!1)}.bind(this))}function r(){this.options.checkboxes&&s.call(this,"calculateCheckboxHeaderStatus",function(){for(var e=this.getTable().getRows(),t=c.call(this),n=0,i=0;i<e.length;i++)e[i]._isChecked&&n++;var l=this.getTable().getHeaderRow().getCells()[t];0===n?l.check(!1):n<e.length?(l.check(!0),l.setTriple(!0)):(l.check(!0),l.setTriple(!1))}.bind(this))}function d(e,t){u.call(this,e,m,t)}function b(e,t){u.call(this,e,R,t)}function u(e,t,n){e[t.prop]!==n&&(e[t.prop]=n,t.drawFn.call(this,e),s.call(this,t.endEventName,function(){this.getTable().trigger(t.endEventName,t.getterFn.call(this))}.bind(this)),this.options.bind&&t.bindFn.call(this,e,n))}function g(e){e._isSelected?e.getElement().setModifier("highlighted"):e.getElement().removeModifier("highlighted")}function f(e){var t=c.call(this);e.getCells()[t].check(e._isChecked),r.call(this)}function p(){return C.call(this,R)}function k(){return C.call(this,m)}function C(e){var t=[];return this.getTable().getRows().forEach(function(n){n[e.prop]&&t.push(n)}.bind(this)),t}function x(e){v.call(this,e,m)}function w(e){v.call(this,e,R)}function v(e,t){var n=this.getTable().getRows();n.forEach(function(n){e(n)&&(t.mainFn.call(this,n,!0),this.options.bind&&t.bindFn.call(this,n,!0))}.bind(this))}var m={prop:"_isSelected",endEventName:"rowselectend",drawFn:g,mainFn:d,bindFn:b,getterFn:k},R={prop:"_isChecked",endEventName:"checkend",drawFn:f,mainFn:b,bindFn:d,getterFn:p};return t.extend({injections:{before:{onViewReady:l},after:{addRow:h,removeRow:r},newMethods:{getSelectedRows:k,unselectAllRows:a,selectRows:x,getCheckedRows:p,checkRows:w}}})}),define("tablelib/plugins/Selection",["tablelib/plugins/selection/Selection"],function(e){return e});