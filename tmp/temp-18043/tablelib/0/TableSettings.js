/* Copyright (c) Ericsson 2014 */
define('text',{load:function(e){throw new Error('Dynamic load not allowed: '+e)}});define('styles',{load:function(e){throw new Error('Dynamic load not allowed: '+e)}});define('template',{load:function(e){throw new Error('Dynamic load not allowed: '+e)}});define('json',{load:function(e){throw new Error('Dynamic load not allowed: '+e)}});
define("styles!tablelib/tablesettings/placeholderitem/PlaceHolderItem.less",[],function(){return".elTablelib-PlaceHolderItem {\n  width: 100%;\n  height: 30px;\n  background-color: #ededed;\n}\n"}),define("text!tablelib/tablesettings/placeholderitem/PlaceHolderItem.html",[],function(){return'<li class="elTablelib-PlaceHolderItem">\n</li>'}),define("tablelib/tablesettings/placeholderitem/PlaceHolderItemView",["jscore/core","text!./PlaceHolderItem.html","styles!./PlaceHolderItem.less"],function(e,t,n){return e.View.extend({getTemplate:function(){return t},getStyle:function(){return n}})}),define("tablelib/tablesettings/placeholderitem/PlaceHolderItem",["jscore/core","./PlaceHolderItemView"],function(e,t){return e.Widget.extend({View:t})}),define("styles!tablelib/tablesettings/tablesettingsitem/TableSettingsItem.less",[],function(){return".elTablelib-TableSettingsItem {\n  background-color: white;\n  height: 30px;\n}\n.elTablelib-TableSettingsItem:first-child .elTablelib-TableSettingsItem-up,\n.elTablelib-TableSettingsItem:last-child .elTablelib-TableSettingsItem-down {\n  opacity: 0.3;\n  cursor: default;\n  pointer-events: none;\n}\n.elTablelib-TableSettingsItem-label {\n  margin: 5px 0;\n  width: calc(100% - 36px);\n  display: inline-block;\n}\n.elTablelib-TableSettingsItem-buttons {\n  padding: 15px 0;\n  border-bottom: 1px solid #E6E6E6;\n  text-align: right;\n}\n.elTablelib-TableSettingsItem-arrows {\n  border-bottom: 1px solid #E6E6E6;\n  padding: 5px 0;\n  width: 36px;\n  display: inline-block;\n}\n.elTablelib-TableSettingsItem-up,\n.elTablelib-TableSettingsItem-down {\n  cursor: pointer;\n}\n"}),define("template!tablelib/tablesettings/tablesettingsitem/TableSettingsItem.html",["jscore/handlebars/handlebars"],function(e){return e.template(function(e,t,n,i,l){function s(){return'checked="true"'}n=n||e.helpers;var a,o,r,c,b="",g=this,d="function",h=n.helperMissing,m=void 0,u=this.escapeExpression;return b+='<li class="elTablelib-TableSettingsItem">\n    <label class="elTablelib-TableSettingsItem-label">\n        <input class="ebCheckbox" type="checkbox" ',r=n.visible,a=r||t.visible,o=n["if"],c=g.program(1,s,l),c.hash={},c.fn=c,c.inverse=g.noop,a=o.call(t,a,c),(a||0===a)&&(b+=a),b+='/>\n\n        <span class="ebCheckbox-inputStatus"></span>\n        <span class="ebCheckbox-label">\n            <span class="elTablelib-TableSettingsItem-labelText ebCheckbox-label-text">',r=n.title,a=r||t.title,typeof a===d?a=a.call(t,{hash:{}}):a===m&&(a=h.call(t,"title",{hash:{}})),b+=u(a)+'</span>\n        </span>\n    </label><span class="elTablelib-TableSettingsItem-arrows">\n        <i class="ebIcon ebIcon_upArrowLarge elTablelib-TableSettingsItem-up"></i>\n        <i class="ebIcon ebIcon_downArrowLarge elTablelib-TableSettingsItem-down"></i>\n    </span>\n</li>'})}),define("tablelib/tablesettings/tablesettingsitem/TableSettingsItemView",["jscore/core","template!./TableSettingsItem.html","styles!./TableSettingsItem.less"],function(e,t,n){return e.View.extend({getTemplate:function(){return t(this.options)},getStyle:function(){return n},getCheckbox:function(){return this.getElement().find(".ebCheckbox")},getUp:function(){return this.getElement().find(".elTablelib-TableSettingsItem-up")},getDown:function(){return this.getElement().find(".elTablelib-TableSettingsItem-down")}})}),define("tablelib/tablesettings/tablesettingsitem/TableSettingsItem",["jscore/core","./TableSettingsItemView"],function(e,t){return e.Widget.extend({view:function(){return new t(this.options)},onViewReady:function(){this.column=this.options,this.view.getCheckbox().addEventHandler("click",function(){return this._isDragging?void this.view.getCheckbox().setProperty("checked",this.column.visible):void(this.column.visible=this.view.getCheckbox().getProperty("checked"))}.bind(this)),this.view.getUp().addEventHandler("click",function(){this.trigger("up",this.column)}.bind(this)),this.view.getDown().addEventHandler("click",function(){this.trigger("down",this.column)}.bind(this))}})}),define("styles!tablelib/tablesettings/TableSettings.less",[],function(){return".elTablelib-TableSettings {\n  margin: 10px 0;\n}\n"}),define("text!tablelib/tablesettings/TableSettings.html",[],function(){return'<ul class="ebList elTablelib-TableSettings">\n</ul>'}),define("tablelib/tablesettings/TableSettingsView",["jscore/core","text!./TableSettings.html","styles!./TableSettings.less"],function(e,t,n){return e.View.extend({getTemplate:function(){return t},getStyle:function(){return n}})}),define("tablelib/tablesettings/TableSettings",["jscore/core","./TableSettingsView","./tablesettingsitem/TableSettingsItem","jscore/ext/utils/base/underscore","./placeholderitem/PlaceHolderItem"],function(e,t,n,i,l){function s(e,t){o.call(this,e,t,-1)}function a(e,t){o.call(this,e,t,1)}function o(e,t,n){var i=r.call(this,t),l=c.call(this,e),s=i+n,a=l+n;this.items.splice(l,1),this.columns.splice(i,1),e.detach();var o=this.getElement()._getHTMLElement().children[a];this.getElement()._getHTMLElement().insertBefore(e.getElement()._getHTMLElement(),o),this.items.splice(a,0,e),this.columns.splice(s,0,t)}function r(e){for(var t=0;t<this.columns.length;t++)if(this.columns[t]===e)return t}function c(e){for(var t=0;t<this.items.length;t++)if(this.items[t]===e)return t}function b(t,n){("mousedown"!==t.originalEvent.type||1===t.originalEvent.which)&&(this._mouseMoveEvent=e.Element.wrap(document.body).addEventHandler("mousemove",d.bind(this,n)),this._mouseUpEvent=e.Element.wrap(document.body).addEventHandler("mouseup mouseleave",m.bind(this,n)),this._listPos=this.getElement().getPosition(),this._dragDeltaX=n.getElement().getPosition().left-t.originalEvent.clientX,this._dragDeltaY=n.getElement().getPosition().top-t.originalEvent.clientY,this._startDragIndex=this._currentDragIndex=this.items.indexOf(n))}function g(e){var t=30,n=e.originalEvent.clientY-this._listPos.top,i=Math.min(Math.max(0,parseInt(n/t)),this.items.length);return i}function d(e,t){e._isDragging||(e._isDragging=!0,this._placeHolder=new l,h.call(this,this._placeHolder,this._startDragIndex),e.getElement().setStyle({position:"fixed",zIndex:100,width:e.getElement().getProperty("offsetWidth")+"px",top:t.originalEvent.clientY+this._dragDeltaY+"px",left:t.originalEvent.clientX+this._dragDeltaX+"px"})),e.getElement().setStyle({top:t.originalEvent.clientY+this._dragDeltaY+"px",left:t.originalEvent.clientX+this._dragDeltaX+"px"}),this._currentDragIndex=g.call(this,t);var n=this._currentDragIndex;n>this._startDragIndex&&n++,h.call(this,this._placeHolder,n)}function h(e,t){var n=e.getElement()._getHTMLElement(),i=this.items[t],l=this.getElement()._getHTMLElement();i?(i=i.getElement()._getHTMLElement(),l.insertBefore(n,i)):(e.detach(),e.attachTo(this.getElement()))}function m(e){e._isDragging&&(e._isDragging=!1,e.getElement().setStyle({width:"inherit",position:"relative",top:"0",left:"0",zIndex:"inherit"}),this._placeHolder.destroy(),h.call(this,e,this._currentDragIndex),o.call(this,e,this.columns[this._startDragIndex],this._currentDragIndex-this._startDragIndex)),this._mouseMoveEvent.destroy(),this._mouseUpEvent.destroy(),document.removeEventListener("mousedown",u,!0)}function u(e){e.preventDefault()}return e.Widget.extend({View:t,onViewReady:function(){this.columns=i.map(this.options.columns,i.clone),this.items=[],this.getElement().setStyle("user-select","none"),this.columns.forEach(function(e){if(void 0===e.visible&&(e.visible=!0),void 0!==e.title){var t=new n(e);t.addEventHandler("up",function(){s.call(this,t,e)}.bind(this)),t.addEventHandler("down",function(){a.call(this,t,e)}.bind(this)),t.attachTo(this.getElement()),this.items.push(t),t.getElement().setStyle("user-select","none"),t.getElement().addEventHandler("mousedown",function(e){document.addEventListener("mousedown",u,!0),this._dragTimeout=setTimeout(function(){b.call(this,e,t),t.getElement().removeEventHandler(this._mouseUpBeforeTimeoutEvent)}.bind(this),100),this._mouseUpBeforeTimeoutEvent=t.getElement().addEventHandler("mouseup mouseleave",function(){clearTimeout(this._dragTimeout),document.removeEventListener("mousedown",u,!0),t.getElement().removeEventHandler(this._mouseUpBeforeTimeoutEvent)}.bind(this))}.bind(this))}}.bind(this))},getUpdatedColumns:function(){return this.columns},setCheckboxes:function(e){this.items.forEach(function(t){var n=t.view.getCheckbox();n.getProperty("checked")!==e&&n.trigger("click")})}})}),define("tablelib/TableSettings",["tablelib/tablesettings/TableSettings"],function(e){return e});